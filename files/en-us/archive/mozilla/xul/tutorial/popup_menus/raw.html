<div class="prevnext" style="text-align: right;">
    <p><a href="/en-US/docs/XUL_Tutorial/More_Menu_Features" style="float: left;">« Previous</a><a href="/en-US/docs/XUL_Tutorial/Scrolling_Menus">Next  »</a></p>
</div>

<p>In the last section, we looked at creating a menu on a menu bar. XUL also has the capability of creating popup menus. Popup menus are typically displayed when the user presses the right mouse button.</p>

<h3 id="Creating_a_Popup_Menu" name="Creating_a_Popup_Menu">Creating a Popup Menu</h3>

<p>XUL has three different types of popups, described below. The main difference is the way in which they appear.</p>

<dl>
 <dt>Plain Popups</dt>
 <dd>The plain popup is a popup window which appears when the user presses the left mouse button on an element. They are much like the menus on the menu bar, except that they can be placed anywhere and can contain any content. A good example is the drop down menu that appears when you click on the little down arrows next to the back and forward buttons in a browser window.</dd>
 <dt>Context Popups</dt>
 <dd>The context popup is a popup window which appears when the user presses the context menu button, which is usually the right mouse button. The exact way that a context menu is opened varies on each platform. On the Macintosh for example, the user can either press the Control key and click the mouse button, or hold the mouse button down for a moment. Also note that it is possible to open context menus without using the mouse, for example by pressing the menu key on a keyboard.</dd>
 <dt>Tooltips</dt>
 <dd>A tooltip popup window will appear when the user hovers over an element with the mouse. This type of popup is usually used to provide a description of a button in more detail than can be provided on the button itself.</dd>
</dl>

<p>All three types of popups differ in the way that the user invokes them. The type of popup is determined by the element that invokes the popup.</p>

<h4 id="Declaring_popup_content" name="Declaring_popup_content">Declaring popup content</h4>

<p>A popup is described using the <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/menupopup" title="menupopup">menupopup</a></code></code> element. It has no special attributes and is a type of box. When invoked, it will display a window containing whatever you put inside the <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/menupopup" title="menupopup">menupopup</a></code></code>. However, you should always put an <code><code id="a-id"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/id">id</a></code></code> attribute on the menupopup as it is used to associate the popup with an element. We'll see what this means soon. First, an example:</p>

<pre>&lt;popupset&gt;
  &lt;menupopup id="clipmenu"&gt;
    &lt;menuitem label="Cut"/&gt;
    &lt;menuitem label="Copy"/&gt;
    &lt;menuitem label="Paste"/&gt;
  &lt;/menupopup&gt;
&lt;/popupset&gt;
</pre>

<p>As can be seen here, a simple popup menu with three commands on it has been created. The <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/menupopup" title="menupopup">menupopup</a></code></code> element surrounds the three <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/menuitem" title="menuitem">menuitem</a></code></code> elements. You will also notice that the <code><code id="a-id"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/id">id</a></code></code> has been set on the <code>menupopup</code> element itself.</p>

<p>The <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/popupset" title="popupset">popupset</a></code></code> element surrounds the entire popup menu declaration. This is a generic container for popups, and is optional. It does not draw on screen but instead is used as a placeholder where you would declare all of your popups. As the name <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/popupset" title="popupset">popupset</a></code></code> implies, you can put multiple popup declarations inside it. Just add additional ones after the first <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/menupopup" title="menupopup">menupopup</a></code></code> element. You can have more than one <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/popupset" title="popupset">popupset</a></code></code> in a file, but usually you will have only one.</p>

<h4 id="Associating_a_popup_with_an_element" name="Associating_a_popup_with_an_element">Associating a popup with an element</h4>

<p>Now that we've created the popup, it's time to make the popup appear. To do this we need to associate the popup with an element where it should appear. We do this because we only want the popup to appear when the user clicks in a certain area of a window. Typically, this will be a specific button or a box.</p>

<p>To associate the popup with an element, you add one of three attributes to the element. The attribute you add depends on which type of popup you want to create. For plain popups, add a <code><code id="a-popup"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/popup">popup</a></code></code> attribute to the element. For context popups, add a <code><code id="a-context"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/context">context</a></code></code> attribute. Finally, for tooltip popups, add a <code><code id="a-tooltip"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/tooltip">tooltip</a></code></code> attribute.</p>

<p>The value of the attribute must be set to the <code><code id="a-id"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/id">id</a></code></code> of the <code>menupopup</code> that you want to have appear. This is why you must put the id on the popup. That way it's easy to have multiple menupopups in one file.</p>

<p>In the example above, we want to make the popup a context menu. That means that we need to use the <code><code id="a-context"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/context">context</a></code></code> attribute and add it to the element which we want to have the popup associated with. The sample below shows how we might do this:</p>

<p><span id="Example_1"><a id="Example_1"></a><strong>Example 1</strong></span> : <a href="https://developer.mozilla.org/samples/xultu/examples/ex_popups_1.xul.txt">Source</a> <a href="https://developer.mozilla.org/samples/xultu/examples/ex_popups_1.xul">View</a></p>

<div class="float-right"><img alt="Image:popups-ex1.png" class="internal" src="/@api/deki/files/813/=Popups-ex1.png"></div>

<pre>&lt;popupset&gt;
  &lt;menupopup id="clipmenu"&gt;
    &lt;menuitem label="Cut"/&gt;
    &lt;menuitem label="Copy"/&gt;
    &lt;menuitem label="Paste"/&gt;
  &lt;/menupopup&gt;
&lt;/popupset&gt;

&lt;box context="clipmenu"&gt;
  &lt;label value="Context click for menu"/&gt;
&lt;/box&gt;
</pre>

<p>Here, the menupopup has been associated with a box. Whenever you context-click (right-click) anywhere inside the box, the popup menu will appear. The popup will also appear even if you click on the children of the box, so it will work if you click on the <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/label" title="label">label</a></code></code> element also. The <code><code id="a-context"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/context">context</a></code></code> attribute has been used to associate the box with a menupopup with the same id. In this case, the menupopup <code>clipmenu</code> will appear. This way, you can have a number of popups and associate them with different elements.</p>

<p>You could associate multiple popups with the same element by putting more attributes of different types on an element. You could also associate the same popup with multiple elements, which is one advantage of using this popup syntax. Popups can only be associated with XUL elements; they cannot be associated with HTML elements.</p>

<h3 id="Tooltips" name="Tooltips">Tooltips</h3>

<p>We'll look at a simple way to create tooltips here. There are two ways to create a tooltip. The simplest way, which is much more common, is to add a <code><code id="a-tooltiptext"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/tooltiptext">tooltiptext</a></code></code> attribute to an element for which you want to assign a tooltip.</p>

<p>The second method is to use a <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/tooltip" title="tooltip">tooltip</a></code></code> element containing the content of a tooltip. This requires you to have a separate block of content for each tooltip or to have a script which sets the content. However, it does allow you to use any content besides text in a tooltip.</p>

<p><span id="Example_2"><a id="Example_2"></a><strong>Example 2</strong></span> : <a href="https://developer.mozilla.org/samples/xultu/examples/ex_popups_2.xul.txt">Source</a> <a href="https://developer.mozilla.org/samples/xultu/examples/ex_popups_2.xul">View</a></p>

<pre>&lt;button label="Save" tooltiptext="Click here to save your stuff"/&gt;

&lt;popupset&gt;
  &lt;tooltip id="moretip" orient="vertical" style="background-color: #33DD00;"&gt;
    &lt;description value="Click here to see more information"/&gt;
    &lt;description value="Really!" style="color: red;"/&gt;
  &lt;/tooltip&gt;
&lt;/popupset&gt;

&lt;button label="More" tooltip="moretip"/&gt;
</pre>

<p>These two buttons each have a tooltip. The first uses the default tooltip style. The second uses a custom tooltip that has a different background color and styled text. The tooltip is associated with the More button using the <code><code id="a-tooltip"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/tooltip">tooltip</a></code></code> attribute, which is set to the corresponding <code><code id="a-id"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/id">id</a></code></code> of the <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/tooltip" title="tooltip">tooltip</a></code></code> element. Note that the <code>tooltip</code> element is still placed inside a <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/popupset" title="popupset">popupset</a></code></code> element like other popup types.</p>

<h3 id="Popup_Alignment" name="Popup_Alignment">Popup Alignment</h3>

<p>By default, the popup and context windows will appear where the mouse pointer is. Tooltips will be placed slightly below the element so that the mouse pointer does not obscure it. There are cases however, where you will want to indicate in more detail where the popup appears. For example, the popup menu that appears when you click the Back button in a browser should appear underneath the back button, not where the mouse pointer is.</p>

<p>To change the popup position, you can use an additional attribute, <code><code id="a-position"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/position">position</a></code></code>, on the <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/menupopup" title="menupopup">menupopup</a></code></code>. You can also add it to the <code><code><a href="/en-US/docs/Mozilla/Tech/XUL/menupopup" title="menupopup">menupopup</a></code></code> element. This attribute is used to indicate the placement of the popup relative to the element invoking the popup. It can be set to a number of values, which are described briefly below:</p>

<dl>
 <dt>after_start</dt>
 <dd>The popup appears below the element with the left edges of the element and the popup window aligned. If the popup window is larger than the element, is extends to the right. This is the value used for the drop-down menus associated with the browser's Back and Forward buttons.</dd>
 <dt>after_end</dt>
 <dd>The popup appears below the element with the right edges of the element and the popup window aligned.</dd>
 <dt>before_start</dt>
 <dd>The popup appears above the element with the left edges of the element and the popup window aligned.</dd>
 <dt>before_end</dt>
 <dd>The popup appears above the element with the right edges of the element and the popup window aligned.</dd>
 <dt>end_after</dt>
 <dd>The popup appears to the right of the element with the bottom edges of the element and the popup window aligned.</dd>
 <dt>end_before</dt>
 <dd>The popup appears to the right of the element with the top edges of the element and the popup window aligned.</dd>
 <dt>start_after</dt>
 <dd>The popup appears to the left of the element with the bottom edges of the element and the popup window aligned.</dd>
 <dt>start_before</dt>
 <dd>The popup appears to the left of the element with the top edges of the element and the popup window aligned.</dd>
 <dt>overlap</dt>
 <dd>The popup appears on top of the element.</dd>
 <dt>at_pointer</dt>
 <dd>The popup appears at the mouse pointer position <span style="color: rgb(255, 0, 0);">(at_pointer is not currently implemented with respect to the mouse pointer. It currently appears at the top of the anchor).</span></dd>
 <dt>after_pointer</dt>
 <dd>The popup appears at the same horizontal position as the mouse pointer but appears below the element. This is how tooltips appear <span style="color: rgb(255, 0, 0);">(after_pointer is not currently implemented with respect to the mouse pointer. It currently offsets 21 pixels vertically from the anchor, see <a class="link-https" href="https://bugzilla.mozilla.org/show_bug.cgi?id=619887" title="https://bugzilla.mozilla.org/show_bug.cgi?id=619887">Bug 619887</a>).</span></dd>
</dl>

<p>By adding the <code>position</code> attribute to a popup element, you can specify precisely where the popup appears. You cannot specify an exact pixel position. The <code>position</code> attribute can be used with all three popup types, although you probably would not change the value for tooltips. The example below demonstrates creating a back button with a popup menu:</p>

<p><span id="Example_3"><a id="Example_3"></a><strong>Example 3</strong></span> : <a href="https://developer.mozilla.org/samples/xultu/examples/ex_popups_3.xul.txt">Source</a> <a href="https://developer.mozilla.org/samples/xultu/examples/ex_popups_3.xul">View</a></p>

<pre>&lt;popupset&gt;
  &lt;menupopup id="backpopup" position="after_start"&gt;
    &lt;menuitem label="Page 1"/&gt;
    &lt;menuitem label="Page 2"/&gt;
  &lt;/menupopup&gt;
&lt;/popupset&gt;

&lt;button label="Pop Me Up" popup="backpopup"/&gt;
</pre>

<h3 id="Our_find_files_example" name="Our_find_files_example">Our find files example</h3>

<p>Let's add a simple popup menu to the find files dialog. For simplicity, we'll just replicate the contents of the Edit menu. Let's have the popup appear when clicking over the first tab panel:</p>

<pre class="eval"><span class="highlightred">&lt;popupset&gt;
  &lt;menupopup id="editpopup"&gt;
    &lt;menuitem label="Cut" accesskey="t"/&gt;
    &lt;menuitem label="Copy" accesskey="c"/&gt;
    &lt;menuitem label="Paste" accesskey="p" disabled="true"/&gt;
  &lt;/menupopup&gt;
&lt;/popupset&gt;</span>

&lt;vbox flex="1"&gt;
.
.
.

<span class="highlightred">&lt;tabpanel id="searchpanel" orient="vertical" context="editpopup"&gt;</span>
</pre>

<p>Here a simple popup that is similar to the edit menu has been added to the first tabpanel. If you right-click (Control-click on the Macintosh) anywhere on the first panel, the popup will appear. However, the popup will not appear if you click anywhere else. Note that the textbox has its own built-in popup menu which will override the one we specified.</p>

<p><span id="Our_Find_files_example_so_far"><a id="Our_Find_files_example_so_far"></a><strong>Our Find files example so far</strong></span> : <a href="https://developer.mozilla.org/samples/xultu/examples/findfile/findfile-popups.xul.txt">Source</a> <a href="https://developer.mozilla.org/samples/xultu/examples/findfile/findfile-popups.xul">View</a></p>

<p>Next, we'll look at how to <a href="/en/XUL_Tutorial/Scrolling_Menus" title="en/XUL_Tutorial/Scrolling_Menus">create scrolling menus</a>.</p>

<div class="prevnext" style="text-align: right;">
    <p><a href="/en-US/docs/XUL_Tutorial/More_Menu_Features" style="float: left;">« Previous</a><a href="/en-US/docs/XUL_Tutorial/Scrolling_Menus">Next  »</a></p>
</div>