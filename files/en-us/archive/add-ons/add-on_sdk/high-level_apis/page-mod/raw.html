<p> </p>

<div class="warning">
<p>Support for extensions using XUL/XPCOM or the Add-on SDK was removed in Firefox 57, released November 2017. As there is no supported version of Firefox enabling these technologies, this page will be removed by December 2020.</p>

<p>Add-ons using the techniques described in this document are considered a legacy technology in Firefox. Don't use these techniques to develop new add-ons. Use <a href="/en-US/Add-ons/WebExtensions">WebExtensions</a> instead. If you maintain an add-on which uses the techniques described here, consider migrating it to use WebExtensions.</p>

<p><strong>Starting from <a href="https://wiki.mozilla.org/RapidRelease/Calendar">Firefox 53</a>, no new legacy add-ons will be accepted on addons.mozilla.org (AMO) for desktop Firefox and Firefox for Android.</strong></p>

<p><strong>Starting from <a href="https://wiki.mozilla.org/RapidRelease/Calendar">Firefox 57</a>, only extensions developed using WebExtensions APIs will be supported on Desktop Firefox and Firefox for Android. </strong></p>

<p>Even before Firefox 57, changes coming up in the Firefox platform will break many legacy extensions. These changes include multiprocess Firefox (e10s), sandboxing, and multiple content processes. Legacy extensions that are affected by these changes should migrate to use WebExtensions APIs if they can. See the <a href="https://blog.mozilla.org/addons/2017/02/16/the-road-to-firefox-57-compatibility-milestones/">"Compatibility Milestones" document</a> for more information.</p>

<p>A wiki page containing <a href="https://wiki.mozilla.org/Add-ons/developer/communication">resources, migration paths, office hours, and more</a>, is available to help developers transition to the new technologies.</p>
</div>

<section class="Quick_links" id="Quick_Links">
<ol>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions"><strong>Browser extensions</strong></a></li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#Getting_started">Getting started</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions">What are extensions?</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension">Your first extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension">Your second extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">Anatomy of an extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Examples">Example extensions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/What_next_">What next?</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#Concepts">Concepts</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs">Using the JavaScript APIs</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">Content scripts</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">Match patterns</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_files">Working with files</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Internationalization">Internationalization</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Security_best_practices">Security best practices</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy">Content Security Policy</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Native_messaging">Native messaging</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#User_Interface">User interface</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface">User Interface</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action">Toolbar button</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions">Address bar button</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars">Sidebars</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items">Context menu items</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages">Options page</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">Extension pages</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications">Notifications</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox">Address bar suggestions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels">Developer tools panels</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#How_to">How to</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests">Intercept HTTP requests</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page">Modify a web page</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page">Insert external content</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar">Add a button to the toolbar</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page">Implement a settings page</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API">Work with the Tabs API</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API">Work with the Bookmarks API</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API">Work with the Cookies API</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities">Work with contextual identities</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#Porting">Porting</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Porting_a_Google_Chrome_extension">Porting a Google Chrome extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Porting_a_legacy_Firefox_add-on">Porting a legacy Firefox extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Embedded_WebExtensions">Embedded WebExtensions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_the_Add-on_SDK">Comparison with the Add-on SDK</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_XUL_XPCOM_extensions">Comparison with XUL/XPCOM extensions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities">Chrome incompatibilities</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Differences_between_desktop_and_Android">Differences between desktop and Android</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#Firefox_workflow">Firefox workflow</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/User_experience_best_practices">User Experience</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Temporary_Installation_in_Firefox">Temporary Installation in Firefox</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Debugging">Debugging</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Testing_persistent_and_restart_features">Testing persistent and restart features</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Developing_WebExtensions_for_Firefox_for_Android">Developing for Firefox for Android</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Getting_started_with_web-ext">Getting started with web-ext</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/web-ext_command_reference">web-ext command reference</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/WebExtensions_and_the_Add-on_ID">Extensions and the Add-on ID</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Request_the_right_permissions">Request the right permissions</a></li>
  </ol>
 </li>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API">JavaScript APIs</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs">Browser support for JavaScript APIs</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/alarms">alarms</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks">bookmarks</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserAction">browserAction</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings">browserSettings</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browsingData">browsingData</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/clipboard">clipboard</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/commands">commands</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts">contentScripts</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities">contextualIdentities</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/cookies">cookies</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/devtools.inspectedWindow">devtools.inspectedWindow</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/devtools.network">devtools.network</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/devtools.panels">devtools.panels</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/dns">dns</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/downloads">downloads</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/events">events</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/extension">extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes">extensionTypes</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/find">find</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/history">history</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n">i18n</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/identity">identity</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/idle">idle</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/management">management</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/menus">menus</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/notifications">notifications</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/omnibox">omnibox</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/pageAction">pageAction</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/permissions">permissions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11">pkcs11</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/privacy">privacy</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/proxy">proxy</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime">runtime</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/search">search</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/sessions">sessions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction">sidebarAction</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/storage">storage</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs">tabs</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/theme">theme</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/topSites">topSites</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/types">types</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation">webNavigation</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest">webRequest</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/windows">windows</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json">Manifest keys</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/applications">applications</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author">author</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background">background</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action">browser_action</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides">chrome_settings_overrides</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides">chrome_url_overrides</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands">commands</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts">content_scripts</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy">content_security_policy</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale">default_locale</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description">description</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer">developer</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page">devtools_page</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url">homepage_url</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons">icons</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito">incognito</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version">manifest_version</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name">name</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox">omnibox</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions">optional_permissions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui">options_ui</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action">page_action</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">permissions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers">protocol_handlers</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name">short_name</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action">sidebar_action</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme">theme</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version">version</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name">version_name</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources">web_accessible_resources</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Themes"><strong>Themes</strong></a></li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Theme_concepts">Browser themes</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Theme_concepts">Browser theme concepts</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Lightweight_themes">Lightweight themes</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Lightweight_themes">Lightweight themes</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Lightweight_Themes/FAQ">Lightweight themes FAQ</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution"><strong>Publishing and Distribution</strong></a></li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution">Publishing add-ons</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution">Signing and distribution overview</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Package_your_extension_">Package your extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution/Submitting_an_add-on">Submit an add-on</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Source_Code_Submission">Source code submission</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution/Resources_for_publishers">Resources for publishers</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Listing">Creating an appealing listing</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/AMO/Policy/Reviews">Review policies</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/AMO/Policy/Agreement">Developer agreement</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/AMO/Policy/Featured">Featured add-ons</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution/Retiring_your_extension">Retiring your extension</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options">Distributing add-ons</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Sideloading_add-ons">For sideloading</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_for_desktop_apps">For desktop apps</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_in_the_enterprise">For an enterprise</a></li>
  </ol>
 </li>
 <li><a href="https://discourse.mozilla.org/c/add-ons"><strong>Community and Support</strong></a></li>
 <li><a href="#">Channels</a>
  <ol>
   <li><a href="https://blog.mozilla.org/addons">Add-ons blog</a></li>
   <li><a href="https://discourse.mozilla.org/c/add-ons">Add-on forums</a></li>
   <li><a href="http://stackoverflow.com/questions/tagged/firefox-addon">Stack Overflow</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/#Contact_us">Contact us</a></li>
  </ol>
 </li>
</ol>
</section>

<p> </p>

<div class="note">
<p>Stable</p>
</div>

<p><span class="seoSummary">Run scripts in the context of web pages whose URL matches a given pattern.</span></p>

<h2 id="Usage">Usage</h2>

<p>To use page-mod, you specify:</p>

<ul>
 <li>one or more scripts to attach. The SDK calls these scripts "content scripts".</li>
 <li>a pattern that a page's URL must match, in order for the script(s) to be attached to that page.</li>
</ul>

<p>For example, the following add-on displays an alert whenever the user visits any page hosted at "mozilla.org":</p>

<pre class="brush: js">var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*.mozilla.org",
  contentScript: 'window.alert("Page matches ruleset");'
});</pre>

<p>You can modify the document in your script:</p>

<pre class="brush: js">var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*.mozilla.org",
  contentScript: 'document.body.innerHTML = ' +
                 ' "&lt;h1&gt;Page matches ruleset&lt;/h1&gt;";'
});</pre>

<p>You can supply the content script(s) in one of two ways:</p>

<ul>
 <li>as a string literal, or an array of string literals, assigned to the <code>contentScript</code> option, as above</li>
 <li>as separate files supplied in your add-on's "data" directory.</li>
</ul>

<p>If you supply the scripts as separate files in the "data" directory, you specify them using with a URL, typically constructed using the <code>url()</code> method of the <a href="/en-US/Add-ons/SDK/High-Level_APIs/self#data"><code>self</code> module's <code>data</code> object</a>:</p>

<pre class="brush: js">var data = require("sdk/self").data;
var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*.mozilla.org",
  contentScriptFile: data.url("my-script.js")
});</pre>

<pre class="brush: js">var data = require("sdk/self").data;
var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*.mozilla.org",
  contentScriptFile: [data.url("jquery-1.7.min.js"),
                      data.url("my-script.js")]
});</pre>

<div class="note">
<p>From Firefox 34, you can use <code>"./my-script.js"</code> as an alias for <code>self.data.url("my-script.js")</code>. So you can rewrite the above code like this:</p>

<pre class="brush: js">var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*.mozilla.org",
  contentScriptFile: "./my-script.js"
});</pre>
</div>

<div class="warning">
<p>Unless your content script is extremely simple and consists only of a static string, don't use <code>contentScript</code>: if you do, you may have problems getting your add-on approved on AMO.</p>

<p>Instead, keep the script in a separate file and load it using <code>contentScriptFile</code>. This makes your code easier to maintain, secure, debug and review.</p>
</div>

<p>A page-mod only attaches scripts to documents loaded in tabs. It will not attach scripts to add-on panels, page-workers, sidebars, or Firefox hidden windows.</p>

<p>To stop a page-mod from making any more modifications, call its <code>destroy()</code> method.</p>

<p>The <code>PageMod</code> constructor takes a number of other options to control its behavior:</p>

<table class="standard-table">
 <tbody>
  <tr>
   <td><code>contentStyle</code></td>
   <td>Lists stylesheets to attach, supplied as strings.</td>
  </tr>
  <tr>
   <td><code>contentStyleFile</code></td>
   <td>Lists stylesheets to attach, supplied in separate files.</td>
  </tr>
  <tr>
   <td><code>contentScriptOptions</code></td>
   <td>Defines read-only values accessible to content scripts.</td>
  </tr>
  <tr>
   <td><code>attachTo</code></td>
   <td>Controls whether to attach scripts to tabs that were already open when the page-mod was created, and whether to attach scripts to iframes as well as the topmost document.</td>
  </tr>
  <tr>
   <td><code>contentScriptWhen</code></td>
   <td>Controls the point during document load at which content scripts are attached.</td>
  </tr>
  <tr>
   <td><code>exclude</code></td>
   <td>
    <p>Has the same syntax as <code>include</code>, but specifies the URLs to which content scripts should <em>not</em> be attached, even if they match <code>include</code>: so it's a way of excluding a subset of the URLs that <code>include</code> specifies. The <code>exclude</code> option is new in Firefox 32.</p>
   </td>
  </tr>
 </tbody>
</table>

<p>These options are documented in detail <a href="/en-US/Add-ons/SDK/High-Level_APIs/page-mod#PageMod(options)">below</a>.</p>

<p>For all the details on content scripts, see the <a href="/en-US/Add-ons/SDK/Guides/Content_Scripts">guide to content scripts</a>.</p>

<h3 id="Communicating_With_Content_Scripts">Communicating With Content Scripts</h3>

<p>Your add-on's "main.js" can't directly access the state of content scripts you load, but you can communicate between your add-on and its content scripts by exchanging messages.</p>

<p>To do this, you'll need to listen to the page-mod's <code>attach</code> event. This event is triggered every time the page-mod's content script is attached to a document. The listener is passed a <a href="/en-US/Add-ons/SDK/Low-Level_APIs/content_worker"><code>worker</code></a> object that your add-on can use to send and receive messages.</p>

<p>For example, the following add-on retrieves the HTML content of specific tags from documents that match the pattern. The main add-on code sends the desired tag to the content script, and the content script replies by sending the HTML content of all the elements with that tag.</p>

<p>/lib/main.js:</p>

<pre class="brush: js">var tag = "p";
var data = require("sdk/self").data;
var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*.mozilla.org",
  contentScriptFile: data.url("element-getter.js"),
  onAttach: function(worker) {
    worker.port.emit("getElements", tag);
    worker.port.on("gotElement", function(elementContent) {
      console.log(elementContent);
    });
  }
});</pre>

<p>/data/element-getter.js:</p>

<pre class="brush: js">self.port.on("getElements", function(tag) {
  var elements = document.getElementsByTagName(tag);
  for (var i = 0; i &lt; elements.length; i++) {
    self.port.emit("gotElement", elements[i].innerHTML);
  }
});</pre>

<p>When the user loads a document hosted at "mozilla.org":</p>

<ul>
 <li>The content script "element-getter.js" is attached to the document and runs. It adds a listener to the <code>getElements</code> message.</li>
 <li>The <code>attach</code> event is sent to the "main.js" code. Its event handler sends the <code>getElements</code> message to the content script, and then adds a listener to the <code>gotElement</code> message.</li>
 <li>The content script receives the <code>getElements</code> message, retrieves all elements of that type, and for each element sends a <code>gotElement</code> message containing the element's <code>innerHTML</code>.</li>
 <li>The "main.js" code receives each <code>gotElement</code> message and logs the contents.</li>
</ul>

<p><img alt="" src="https://mdn.mozillademos.org/files/6593/page-mod-messaging.png" style="display: block; height: 191px; margin-left: auto; margin-right: auto; width: 422px;">If multiple documents that match the page-mod's <code>include</code> pattern are loaded, then each document is loaded into its own execution context with its own copy of the content scripts. In this case the listener assigned to <code>onAttach</code> is called once for each loaded document, and the add-on code will have a separate worker for each document.</p>

<p>To learn much more about communicating with content scripts, see the <a href="/en-US/Add-ons/SDK/Guides/Content_Scripts">guide to content scripts</a> and in particular the chapter on <a href="/en-US/Add-ons/SDK/Guides/using_port">communicating using <code>port</code></a>.</p>

<h3 id="Mapping_Workers_to_Tabs">Mapping Workers to Tabs</h3>

<p>The <code>worker</code> has a <code>tab</code> property which returns the tab associated with this worker. You can use this to access the <a href="/en-US/Add-ons/SDK/High-Level_APIs/tabs"><code>tabs API</code></a> for the tab associated with a specific document:</p>

<pre class="brush: js">var pageMod = require("sdk/page-mod");
var tabs = require("sdk/tabs");

pageMod.PageMod({
  include: ["*"],
  onAttach: function onAttach(worker) {
    console.log(worker.tab.title);
  }
});</pre>

<h3 id="Destroying_Workers">Destroying Workers</h3>

<p>Workers generate a <code>detach</code> event when their associated document is closed: that is, when the tab is closed or when the associated window's <code>unload</code> event occurs. If you are maintaining a list of workers belonging to a page-mod, you can use this event to remove workers that are no longer valid.</p>

<p>For example, if you maintain a list of workers attached to a page-mod:</p>

<pre class="brush: js">var workers = [];

var pageMod = require("sdk/page-mod").PageMod({
  include: ['*'],
  contentScriptWhen: 'ready',
  contentScriptFile: data.url('pagemod.js'),
  onAttach: function(worker) {
    workers.push(worker);
  }
});</pre>

<p>You can remove workers when they are no longer valid by listening to <code>detach</code>:</p>

<pre class="brush: js">var workers = [];

function detachWorker(worker, workerArray) {
  var index = workerArray.indexOf(worker);
  if(index != -1) {
    workerArray.splice(index, 1);
  }
}

var pageMod = require("sdk/page-mod").PageMod({
  include: ['*'],
  contentScriptWhen: 'ready',
  contentScriptFile: data.url('pagemod.js'),
  onAttach: function(worker) {
    workers.push(worker);
    worker.on('detach', function () {
      detachWorker(this, workers);
    });
  }
});</pre>

<h3 id="Cleaning_up_on_add-on_removal">Cleaning up on add-on removal</h3>

<p>Content scripts receive a <code>detach</code> message when the add-on that attached them is disabled or removed: you can use this in the content script to undo any changes that you've made. For example, here's an add-on that attaches a script to every page the user loads:</p>

<pre class="brush: js">var data = require("sdk/self").data;
var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*",
  contentScriptFile: data.url("eaten.js")
});
</pre>

<p>The content script replaces the page contents, but restores the original contents when it receives <code>detach</code>:</p>

<pre class="brush: js">// eaten.js

var oldInnerHTML = window.document.body.innerHTML;

window.document.body.innerHTML = "eaten!";

self.port.on("detach", function() {
  window.document.body.innerHTML = oldInnerHTML;
});</pre>

<p>Try running the add-on, loading some pages, and then disabling the add-on in the Add-ons Manager. Note that this is a very naive implementation, created only for demonstration purposes, and will not work properly in many real-world cases.</p>

<h3 id="Attaching_Content_Scripts_to_Tabs">Attaching Content Scripts to Tabs</h3>

<p>We've seen that the page-mod API attaches content scripts to documents based on their URL. Sometimes, though, we don't care about the URL: we just want to execute a script on demand in the context of a particular tab.</p>

<p>For example, we might want to run a script in the context of the currently active tab when the user clicks a button: to block certain content, to change the font style, or to display the document's DOM structure.</p>

<p>Using the <code>attach</code> method of the <a href="/en-US/Add-ons/SDK/High-Level_APIs/tabs"><code>tab</code></a> object, you can attach a set of content scripts to a particular tab. The scripts are executed immediately.</p>

<p>The following add-on creates a button which, when clicked, highlights all the <code>div</code> elements in the document loaded into the active tab:</p>

<pre class="brush: js">require("sdk/ui/button/action").ActionButton({
  id: "highlight-divs",
  label: "Highlight divs",
  icon: "./icon-16.png",
  onClick: function() {
    require("sdk/tabs").activeTab.attach({
      contentScript:
        'var divs = document.getElementsByTagName("div");' +
        'for (var i = 0; i &lt; divs.length; ++i) {' +
          'divs[i].setAttribute("style", "border: solid red 1px;");' +
        '}'
    });
  }
});</pre>

<p>To run this example you'll also have to have an icon file named "icon-16.png" saved in your add-on's "data" directory. You could use this icon: <img alt="" src="https://mdn.mozillademos.org/files/7661/icon-16.png" style="height: 16px; width: 16px;">.</p>

<h3 id="Private_Windows">Private Windows</h3>

<p>If your add-on has not opted into private browsing, then your page-mods will not attach content scripts to documents loaded into private windows, even if their URLs match the pattern you have specified.</p>

<p>To learn more about private windows, how to opt into private browsing, and how to support private browsing, refer to the <a href="/en-US/Add-ons/SDK/High-Level_APIs/private-browsing">documentation for the <code>private-browsing</code> module</a>.</p>

<h2 id="Globals">Globals</h2>

<h3 id="Constructors">Constructors</h3>

<h4 class="addon-sdk-api-name" id="PageMod(options)"><code>PageMod(options)</code></h4>

<p>Creates a page-mod.</p>

<h5 id="Parameters">Parameters</h5>

<p><strong>options : object</strong></p>

<p><strong>Required options:</strong></p>

<p><strong>Name:</strong> include<br>
 <strong>Type:</strong> string,<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp"> RegExp</a>, or array of (String or RegExp)</p>

<p>A match pattern string or an array of match pattern strings. These define the documents to which the page-mod applies. At least one match pattern must be supplied.</p>

<p>You can specify a URL exactly:</p>

<pre class="brush: js">  var pageMod = require("sdk/page-mod");
  pageMod.PageMod({
    include: "http://www.iana.org/domains/example/",
    contentScript: 'window.alert("Page matches ruleset");'
  });</pre>

<p>You can specify a number of wildcard forms, for example:</p>

<pre class="brush: js">  var pageMod = require("sdk/page-mod");
  pageMod.PageMod({
    include: "*.mozilla.org",
    contentScript: 'window.alert("Matched!");'
  });</pre>

<p>You can specify a set of URLs using a <a href="/en-US/Add-ons/SDK/Low-Level_APIs/util_match-pattern">regular expression</a>. The pattern must match the entire URL, not just a subset, and has <code>global</code>, <code>ignoreCase</code>, and <code>multiline</code> disabled.</p>

<pre class="brush: js">  var pageMod = require("sdk/page-mod");
  pageMod.PageMod({
    include: /.*developer.*/,
    contentScript: 'window.alert("Matched!");'
  });</pre>

<p>To specify multiple patterns, pass an array of match patterns:</p>

<pre class="brush: js">var pageMod = require("sdk/page-mod");
pageMod.PageMod({
  include: ["*.foo.org", "*.bar.com"],
  contentScript: 'window.alert("Matched!");'
});</pre>

<p>See the <a href="/en-US/Add-ons/SDK/Low-Level_APIs/util_match-pattern">match-pattern</a> module for a detailed description of match pattern syntax.</p>

<p><strong>Optional options:</strong></p>

<details><summary> <strong>Name:</strong> contentScriptFile<br>
<strong>Type: </strong>string,array</summary>

<p>This option specifies one or more content scripts to attach to targeted documents.</p>

<p>Each script is supplied as a separate file under your add-on's "data" directory, and is specified by a URL typically constructed using the <code>url()</code> method of the <a href="/en-US/Add-ons/SDK/High-Level_APIs/self#data"><code>self</code> module's <code>data</code> object</a>.</p>

<pre class="brush: js">var data = require("sdk/self").data;
var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*",
  contentScriptFile: data.url("my-script.js")
});</pre>

<div class="note">
<p>From Firefox 34, you can use <code>"./my-script.js"</code> as an alias for the resource:// URL pointing to the script in your "data" directory. So you can rewrite the code above like this:</p>

<pre class="brush: js">var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*",
  contentScriptFile: "./my-script.js"
});</pre>
</div>

<p>To attach multiple scripts, pass an array of URLs.</p>

<pre class="brush: js">var data = require("sdk/self").data;
var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*",
  contentScriptFile: [data.url("jquery.min.js"),
                      data.url("my-script.js")]
});</pre>

<p>Content scripts specified using this option are loaded before those specified by the <code>contentScript</code> option.</p>
</details>

<p> </p>

<p> </p>

<details><summary><strong>Name: </strong>contentScript<br>
<strong>Type: </strong>string,array</summary>

<p>This option specifies one or more content scripts to attach to targeted documents. Each script is supplied directly as a single string:</p>

<pre class="brush: js">    var pageMod = require("sdk/page-mod");
    pageMod.PageMod({
      include: "*",
      contentScript: 'window.alert("Matched!");'
    });</pre>

<p>To attach multiple scripts, supply an array of strings.</p>

<p>Content scripts specified by this option are loaded after those specified by the <code>contentScriptFile</code> option.</p>

<div class="warning">
<p>Unless your content script is extremely simple and consists only of a static string, don't use <code>contentScript</code>: if you do, you may have problems getting your add-on approved on AMO.</p>

<p>Instead, keep the script in a separate file and load it using <code>contentScriptFile</code>. This makes your code easier to maintain, secure, debug and review.</p>
</div>
</details>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<details><summary><strong>Name:</strong> contentScriptWhen<br>
<strong>Type:</strong> string</summary>

<p>By default, content scripts are attached after all the content (DOM, JS, CSS, images) for the document has been loaded, at the time the <a href="https://developer.mozilla.org/en/DOM/window.onload">window.onload event</a> fires. Using this option you can customize this behavior.</p>

<p>The option takes a single string that may take any one of the following values:</p>

<ul>
 <li><code>"start"</code>: Load content scripts immediately after the document element is inserted into the DOM, but before the DOM content itself has been loaded</li>
 <li><code>"ready"</code>: Load content scripts once DOM content has been loaded, corresponding to the <a href="https://developer.mozilla.org/en/Gecko-Specific_DOM_Events">DOMContentLoaded</a> event</li>
 <li><code>"end"</code>: Load content scripts once all the content (DOM, JS, CSS, images) has been loaded, at the time the <a href="https://developer.mozilla.org/en/DOM/window.onload">window.onload event</a> fires</li>
</ul>

<pre class="brush: js">   var pageMod = require("sdk/page-mod");
   pageMod.PageMod({
     include: "*",
     contentScript: 'window.alert("Matched!");',
     contentScriptWhen: "start"
   });</pre>

<p>If you specify <code>"start"</code> for <code>contentScriptWhen</code>, your scripts will not be able to interact with the document's DOM right away (although they could listen for <code>window.onload</code> or <code>DOMContentLoaded</code> themselves).</p>

<p>This property defaults to "end".</p>
</details>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<details><summary><strong>Name:</strong> contentScriptOptions<br>
<strong>Type: </strong>object</summary>

<p>You can use this option to define some read-only values for your content scripts.</p>

<p>The option consists of an object literal listing <code>name:value</code> pairs for the values you want to provide to the content script. For example:</p>

<pre class="brush: js">var data = require("sdk/self").data;
var pageMod = require("sdk/page-mod");
pageMod.PageMod({
  include: "*",
  contentScriptFile: data.url("show.js"),
  contentScriptOptions: {
    showOptions: true,
    numbers: [1, 2],
    greeting: "Hello!"
  }
});</pre>

<p>The values are accessible to content scripts via the <code>self.options</code> property:</p>

<pre class="brush: js">// show.js
if (self.options.showOptions) {
  window.alert(self.options.greeting);
  var sum = self.options.numbers[0] +
            self.options.numbers[1];
  window.alert(sum);
}</pre>

<p>The values can be any JSON-serializable value: a string, number, boolean, null, array of JSON-serializable values, or an object whose property values are themselves JSON-serializable. This means you can't send functions, and if the object contains methods they won't be usable. You also can't pass cyclic values.</p>
</details>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<details><summary><strong>Name:</strong> contentStyleFile<br>
<strong>Type:</strong> string,array</summary>

<p>Use this option to load one or more stylesheets into the targeted documents as <a href="https://developer.mozilla.org/en/CSS/Getting_Started/Cascading_and_inheritance">user stylesheets</a>.</p>

<p>Each stylesheet is supplied as a separate file under your add-on's "data" directory, and is specified by a URL typically constructed using the <code>url()</code> method of the <a href="/en-US/Add-ons/SDK/High-Level_APIs/self#data"><code>self</code> module's <code>data</code> object</a>. To add multiple stylesheet files, pass an array of URLs.</p>

<pre class="brush: js">var data = require("sdk/self").data;
var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*.org",
  contentStyleFile: data.url("style.css")
});</pre>

<div class="note">
<p>From Firefox 34, you can use "./style.css" as an alias for the resource:// URL pointing to the stylesheet in your "data" directory. So you can rewrite the code above like this:</p>

<pre class="brush: js">var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*.org",
  contentStyleFile: "./style.css"
});</pre>
</div>

<p>Content styles specified by this option are loaded before those specified by the <code>contentStyle</code> option.</p>

<div class="note">
<p>In earlier versions of this module, you couldn't use relative URLs in stylesheets loaded in this way, and you had to use a workaround. In current versions this has been fixed, and the workaround is no longer needed.</p>
</div>
</details>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<details><summary><strong>Name:</strong>contentStyle<br>
<strong>Type: </strong>string,array</summary>

<p>Use this option to load one or more stylesheet rules into the targeted documents.</p>

<p>Each stylesheet rule is supplied as a separate string. To supply multiple rules, pass an array of strings:</p>

<pre class="brush: js">var pageMod = require("sdk/page-mod");

pageMod.PageMod({
  include: "*.org",
  contentStyle: [
    "div { padding: 10px; color: red }",
    "img { display: none }"
  ]
});</pre>

<p>Content styles specified by this option are loaded after those specified by the <code>contentStyleFile</code> option.</p>
</details>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<details><summary><strong>Name:</strong> attachTo<br>
<strong>Type:</strong> string,array</summary>

<p>If this option is not specified, content scripts:</p>

<ul>
 <li>are not attached to any tabs that are already open when the page-mod is created.</li>
 <li>are attached to all documents whose URL matches the rule: so if your rule matches a specific hostname and path, and the topmost document that satisfies the rule includes ten iframes using a relative URL, then your page-mod is applied eleven times.</li>
</ul>

<p>You can modify this behavior using the <code>attachTo</code> option.</p>

<p>It accepts the following values:</p>

<ul>
 <li><code>"existing"</code>: the page-mod will be automatically applied on already opened tabs.</li>
 <li><code>"top"</code>: the page-mod will be applied to top-level tab documents</li>
 <li><code>"frame"</code>: the page-mod will be applied to all iframes inside tab documents</li>
</ul>

<p>If the option is set at all, you must set at least one of <code>"top"</code> and <code>"frame"</code>.</p>

<p>For example, the following page-mod will be attached to already opened tabs, but not to any iframes:</p>

<pre class="brush: js">   var pageMod = require("sdk/page-mod");
   pageMod.PageMod({
     include: "*",
     contentScript: "",
     attachTo: ["existing", "top"],
     onAttach: function(worker) {
       console.log(worker.tab.url);
     }
   });</pre>
</details>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<details><summary><strong>Name:</strong> onAttach<br>
<strong>Type:</strong> function</summary>

<p>Assign a listener function to this option to listen to the page-mod's <code>attach</code> event. See the <a href="/en-US/Add-ons/SDK/High-Level_APIs/page-mod#attach">documentation for <code>attach</code></a> and <a href="/en-US/Add-ons/SDK/High-Level_APIs/page-mod#Communicating_With_Content_Scripts">Communicating With Content Scripts</a>.</p>
</details>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<details><summary><strong>Name: </strong>exclude<br>
<strong>Type:</strong> string,<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp"> RegExp</a>, array of (String or RegExp)</summary>

<div class="geckoVersionNote">
<p>This option is new in Firefox 32</p>
</div>

<p>Specifies a range of URLs to exclude. This takes the same syntax as the <code>include</code> option: a <a href="/en-US/Add-ons/SDK/Low-Level_APIs/util_match-pattern">match-pattern</a> string or regular expression, or an array of match pattern strings or regular expressions.</p>

<p>These match-patterns define the documents to which the page-mod will not be applied, even if their URLs match the <code>include</code> option:</p>

<pre class="brush: js">var pageMod = require("sdk/page-mod");
var modScript = 'console.log("matches");';

pageMod.PageMod({
  include: "*.mozilla.org",
  exclude: "*.developer.mozilla.org",
  contentScript: modScript
});

var tabs = require("sdk/tabs");
tabs.open("mozilla.org");             // matches
tabs.open("addons.mozilla.org");      // matches
tabs.open("developer.mozilla.org");   // no match</pre>
</details>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<h2 id="PageMod">PageMod</h2>

<p> </p>

<p> </p>

<p>A page-mod object. Once created a page-mod will execute the supplied content scripts, and load any supplied stylesheets, in the context of any documents matching the pattern specified by the <code>include</code> property.</p>

<h3 id="Methods">Methods</h3>

<h4 class="addon-sdk-api-name" id="destroy()"><code>destroy()</code></h4>

<p>Stops the page-mod from making any more modifications. Once destroyed the page-mod can no longer be used.</p>

<p>Modifications already made to open documents by content scripts will not be undone, but stylesheets added by <code>contentStyle</code> or <code>contentStyleFile</code>, will be unregistered immediately.</p>

<h3 id="Properties">Properties</h3>

<h4 class="addon-sdk-api-name" id="include"><code>include</code></h4>

<p>A <a href="/en-US/Add-ons/SDK/Low-Level_APIs/util_list">list</a> of match pattern strings. These define the documents to which the page-mod applies. See the documentation of the <code>include</code> option above for details of <code>include</code> syntax.</p>

<h3 id="Events">Events</h3>

<h4 class="addon-sdk-api-name" id="attach"><code>attach</code></h4>

<p>This event is emitted when the page-mod's content scripts are attached to a document whose URL matches the page-mod's <code>include</code> pattern.</p>

<p>The listener function is passed a <a href="/en-US/Add-ons/SDK/Low-Level_APIs/content_worker"><code>worker</code></a> object that you can use to <a href="/en-US/Add-ons/SDK/High-Level_APIs/page-mod#Communicating_With_Content_Scripts">communicate with the content scripts</a> your page-mod has loaded into this particular document.</p>

<p>The <code>attach</code> event is triggered every time this page-mod's content scripts are attached to a document. So if the user loads several documents which match this page-mod's <code>include</code> pattern, <code>attach</code> will be triggered for each document, each time with a distinct <code>worker</code> instance.</p>

<p>Each worker then represents a channel of communication with the set of content scripts loaded by this particular page-mod into that particular document.</p>

<h5 id="Arguments">Arguments</h5>

<p><strong>Worker</strong> : The listener function is passed a <a href="/en-US/Add-ons/SDK/Low-Level_APIs/content_worker"><code>Worker</code></a> object that can be used to communicate with any content scripts attached to this document.</p>

<h4 class="addon-sdk-api-name" id="error"><code>error</code></h4>

<p>This event is emitted when an uncaught runtime error occurs in one of the page-mod's content scripts.</p>

<h5 id="Arguments_2">Arguments</h5>

<p><strong>Error</strong> : Listeners are passed a single argument, the <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error">Error</a> object.</p>