<p> </p>

<section class="Quick_links" id="Quick_Links">
<ol>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions"><strong>Browser extensions</strong></a></li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#Getting_started">Getting started</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions">What are extensions?</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension">Your first extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension">Your second extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">Anatomy of an extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Examples">Example extensions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/What_next_">What next?</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#Concepts">Concepts</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs">Using the JavaScript APIs</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">Content scripts</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">Match patterns</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_files">Working with files</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Internationalization">Internationalization</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Security_best_practices">Security best practices</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy">Content Security Policy</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Native_messaging">Native messaging</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#User_Interface">User interface</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface">User Interface</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action">Toolbar button</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions">Address bar button</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars">Sidebars</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items">Context menu items</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages">Options page</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">Extension pages</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications">Notifications</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox">Address bar suggestions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels">Developer tools panels</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#How_to">How to</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests">Intercept HTTP requests</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page">Modify a web page</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page">Insert external content</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar">Add a button to the toolbar</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page">Implement a settings page</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API">Work with the Tabs API</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API">Work with the Bookmarks API</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API">Work with the Cookies API</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities">Work with contextual identities</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#Porting">Porting</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Porting_a_Google_Chrome_extension">Porting a Google Chrome extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Porting_a_legacy_Firefox_add-on">Porting a legacy Firefox extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Embedded_WebExtensions">Embedded WebExtensions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_the_Add-on_SDK">Comparison with the Add-on SDK</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_XUL_XPCOM_extensions">Comparison with XUL/XPCOM extensions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities">Chrome incompatibilities</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Differences_between_desktop_and_Android">Differences between desktop and Android</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#Firefox_workflow">Firefox workflow</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/User_experience_best_practices">User Experience</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Temporary_Installation_in_Firefox">Temporary Installation in Firefox</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Debugging">Debugging</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Testing_persistent_and_restart_features">Testing persistent and restart features</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Developing_WebExtensions_for_Firefox_for_Android">Developing for Firefox for Android</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Getting_started_with_web-ext">Getting started with web-ext</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/web-ext_command_reference">web-ext command reference</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/WebExtensions_and_the_Add-on_ID">Extensions and the Add-on ID</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Request_the_right_permissions">Request the right permissions</a></li>
  </ol>
 </li>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API">JavaScript APIs</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs">Browser support for JavaScript APIs</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/alarms">alarms</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks">bookmarks</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserAction">browserAction</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings">browserSettings</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browsingData">browsingData</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/clipboard">clipboard</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/commands">commands</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts">contentScripts</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities">contextualIdentities</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/cookies">cookies</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/devtools.inspectedWindow">devtools.inspectedWindow</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/devtools.network">devtools.network</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/devtools.panels">devtools.panels</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/dns">dns</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/downloads">downloads</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/events">events</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/extension">extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes">extensionTypes</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/find">find</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/history">history</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n">i18n</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/identity">identity</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/idle">idle</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/management">management</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/menus">menus</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/notifications">notifications</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/omnibox">omnibox</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/pageAction">pageAction</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/permissions">permissions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11">pkcs11</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/privacy">privacy</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/proxy">proxy</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime">runtime</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/search">search</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/sessions">sessions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction">sidebarAction</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/storage">storage</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs">tabs</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/theme">theme</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/topSites">topSites</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/types">types</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation">webNavigation</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest">webRequest</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/windows">windows</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json">Manifest keys</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/applications">applications</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author">author</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background">background</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action">browser_action</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides">chrome_settings_overrides</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides">chrome_url_overrides</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands">commands</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts">content_scripts</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy">content_security_policy</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale">default_locale</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description">description</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer">developer</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page">devtools_page</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url">homepage_url</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons">icons</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito">incognito</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version">manifest_version</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name">name</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox">omnibox</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions">optional_permissions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui">options_ui</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action">page_action</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">permissions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers">protocol_handlers</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name">short_name</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action">sidebar_action</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme">theme</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version">version</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name">version_name</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources">web_accessible_resources</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Themes"><strong>Themes</strong></a></li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Theme_concepts">Browser themes</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Theme_concepts">Browser theme concepts</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Lightweight_themes">Lightweight themes</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Lightweight_themes">Lightweight themes</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Lightweight_Themes/FAQ">Lightweight themes FAQ</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution"><strong>Publishing and Distribution</strong></a></li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution">Publishing add-ons</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution">Signing and distribution overview</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Package_your_extension_">Package your extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution/Submitting_an_add-on">Submit an add-on</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Source_Code_Submission">Source code submission</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution/Resources_for_publishers">Resources for publishers</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Listing">Creating an appealing listing</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/AMO/Policy/Reviews">Review policies</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/AMO/Policy/Agreement">Developer agreement</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/AMO/Policy/Featured">Featured add-ons</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution/Retiring_your_extension">Retiring your extension</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options">Distributing add-ons</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Sideloading_add-ons">For sideloading</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_for_desktop_apps">For desktop apps</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_in_the_enterprise">For an enterprise</a></li>
  </ol>
 </li>
 <li><a href="https://discourse.mozilla.org/c/add-ons"><strong>Community and Support</strong></a></li>
 <li><a href="#">Channels</a>
  <ol>
   <li><a href="https://blog.mozilla.org/addons">Add-ons blog</a></li>
   <li><a href="https://discourse.mozilla.org/c/add-ons">Add-on forums</a></li>
   <li><a href="http://stackoverflow.com/questions/tagged/firefox-addon">Stack Overflow</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/#Contact_us">Contact us</a></li>
  </ol>
 </li>
</ol>
</section>

<p> </p>

<p> </p>

<div class="warning">
<p>Support for extensions using XUL/XPCOM or the Add-on SDK was removed in Firefox 57, released November 2017. As there is no supported version of Firefox enabling these technologies, this page will be removed by December 2020.</p>

<p>Add-ons using the techniques described in this document are considered a legacy technology in Firefox. Don't use these techniques to develop new add-ons. Use <a href="/en-US/Add-ons/WebExtensions">WebExtensions</a> instead. If you maintain an add-on which uses the techniques described here, consider migrating it to use WebExtensions.</p>

<p><strong>Starting from <a href="https://wiki.mozilla.org/RapidRelease/Calendar">Firefox 53</a>, no new legacy add-ons will be accepted on addons.mozilla.org (AMO) for desktop Firefox and Firefox for Android.</strong></p>

<p><strong>Starting from <a href="https://wiki.mozilla.org/RapidRelease/Calendar">Firefox 57</a>, only extensions developed using WebExtensions APIs will be supported on Desktop Firefox and Firefox for Android. </strong></p>

<p>Even before Firefox 57, changes coming up in the Firefox platform will break many legacy extensions. These changes include multiprocess Firefox (e10s), sandboxing, and multiple content processes. Legacy extensions that are affected by these changes should migrate to use WebExtensions APIs if they can. See the <a href="https://blog.mozilla.org/addons/2017/02/16/the-road-to-firefox-57-compatibility-milestones/">"Compatibility Milestones" document</a> for more information.</p>

<p>A wiki page containing <a href="https://wiki.mozilla.org/Add-ons/developer/communication">resources, migration paths, office hours, and more</a>, is available to help developers transition to the new technologies.</p>
</div>

<p> </p>

<p style="text-align: justify;"> </p>

<div class="overheadIndicator draft">
<p><strong>Draft</strong><br>
 This page is not complete.</p>
</div>

<p> </p>

<p> </p>

<div class="prevnext" style="text-align: right;">
<p><a href="/en-US/docs/Firefox_addons_developer_guide/Let%27s_build_a_Firefox_extension" style="float: left;">« Previous</a></p>
</div>

<p> </p>

<p><em>This document was authored by <a class="external" href="http://www.smellman.homelinux.org/" title="http://www.smellman.homelinux.org/">Taro (btm) Matsuzawa</a> </em><em>and was originally published in Japanese for the </em><a class="link-https" href="https://wiki.mozilla.org/Japan/FxDevCon/Summer2007/English" rel="external nofollow" title="https://wiki.mozilla.org/Japan/FxDevCon/Summer2007/English"><em>Firefox Developers Conference Summer 2007</em></a><em>. Matsuzawa-san </em><em>is a co-author of <a class="external" href="http://www.oreilly.co.jp/books/9784873113753/index.html" title="http://www.oreilly.co.jp/books/9784873113753/index.html">Firefox 3 Hacks</a> (O'Reilly Japan, 2008.)</em></p>

<p><span class="seoSummary">This chapter discusses tools to assist in developing extensions.</span></p>

<h2 id="Tools_for_extension_developers">Tools for extension developers</h2>

<p><span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>Are we sure we'll talking about Venkman since it's not well maintained</em></span></p>

<p><span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>We maybe should talk about Firebug and Chromebug</em></span></p>

<p><span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>and what about Console 2 and Docked-JS Console?</em></span></p>

<h3 id="Venkman_the_JavaScript_debugger">Venkman, the JavaScript debugger</h3>

<p>Venkman is a full-fledged JavaScript debugger that runs inside Firefox. It works like typical debuggers, and is useful not only for developing extensions, but also for general web development.</p>

<p>Also, because it works with the JavaScript in extensions and Firefox itself, the debugger can be a good way to learn about design methods.</p>

<h4 id="Installing">Installing</h4>

<p>This is bundled with the Mozilla Suite and the current version of SeaMonkey, but it needs to be installed as an extension in Firefox. See <a class="link-https" href="https://addons.mozilla.org/firefox/216/" rel="freelink">https://addons.mozilla.org/firefox/216/</a>.</p>

<p>Install the extension in Firefox directly from the above URL and relaunch Firefox.</p>

<h4 id="Starting_up">Starting up</h4>

<p>Select “<em>JavaScript Debugger</em>” from the Tools menu.</p>

<h5 id="Targeting_JavaScript_for_debugging.">Targeting JavaScript for debugging.</h5>

<p>When Venkman first launches, it can only debug the file currently open in your web browser. This is because a lot of JavaScript files can slow down the browser down if they’re opened for debugging, but you’ll need to lift this restriction in order to develop extensions. Uncheck the “<em>Exclude Browser Files</em>” menu item under the Debug menu (Figure 1).</p>

<p><span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>Figure 1: Uncheck “Exclude Browser Files.”</em></span></p>

<h5 id="Set_up_QuickNote">Set up QuickNote</h5>

<p>For the purposes of this explanation, we’re going to use the file-storage mechanism in QuickNote<sup><a href="#footnote1" id="from_footnote1">1</a></sup> for our debugger. Install QuickNote from the following URL and relaunch Firefox. <a class="link-https" href="https://addons.mozilla.org/firefox/46/" rel="freelink">https://addons.mozilla.org/firefox/46/</a>.</p>

<p>After relaunching Firefox, activate QuickNote. Then select Tools:QuickNote:Float to display it in its own window.</p>

<h4 id="Using_Venkman">Using Venkman</h4>

<h5 id="Read_in_source_code">Read in source code</h5>

<p>Activate Venkman, and then select <em>Open Windows:quicknote.xul:Files</em> on the top-left of the screen. Double-click on <em>quicknote.js</em> to open it in source-code view (Figure 2).</p>

<p><span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>Figure 2: Selecting source code</em></span></p>

<h5 id="Inserting_breakpoints">Inserting breakpoints</h5>

<p>Now you’ll want to set some breakpoints. Try inserting one within the <code>QuickNote_saveNote</code> function, around line 345 (Figure 3).</p>

<p><span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>Figure 3: Inserting a breakpoint</em></span></p>

<h5 id="Start_debugger">Start debugger</h5>

<p>Type in some text into the QuickNote screen, and then select <em>Save Current Tab</em> from the menu. This should halt the program at the spot where you inserted the breakpoint with Venkman, and start the debugger.</p>

<p>The Local Variables screen should always display variables and objects during step-by-step execution. With functions that include a lot of variables, this will be hard to read, so you can point out specific variables that you want to watch (Figure 4).</p>

<p>Watched variables appear under the Watches tab, and are updated every time they are evaluated.</p>

<p>You can then continue with stepwise execution and watch the changes in the program and variables.</p>

<p>Once you’ve finished your inspection, you can continue and let the halted program resume execution.</p>

<p>The author has done almost no work developing extensions, but has used this to investigate how extensions were implemented. In the QuickNote example, we first set one breakpoint and then stepped through it.</p>

<p>Use <em>Step Over</em> to avoid a function, and <em>Step Into</em> to always call it; once you are done investigating a function, use <em>Step Out</em>, and then you can <em>Step Into</em> the next function.</p>

<p>Set breakpoints in locations of interest where you’re not sure what’s going on, and the next time you run it, use Continue to shift to that location and start investigating again.</p>

<p><span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>Figure 4: Adding a watch target</em></span></p>

<h3 id="MozUnit">MozUnit</h3>

<p>MozUnit is a tool for JavaScript that assists with unit testing. It provides an UI similar to that of Eclipse’s JUnit test runner. It should be very easy for Java programmers to get up to speed on it quickly.</p>

<h4 id="Installing_2">Installing</h4>

<p>MozUnit is a feature of Mozlab. Install Mozlab from the following URL and relaunch Firefox.</p>

<p><a class="external" href="http://hyperstruct.net/projects/mozunit" rel="freelink">http://hyperstruct.net/projects/mozunit</a></p>

<p>After relaunching, set up the editor you’ll use to write tests. Open the <em>about:config</em> screen and edit the <em>extensions.mozlab.mozunit.editor</em> property. Parameters are as shown in Table 1. If you want to use Terapad<sup><a href="#footnote2" id="from_footnote2">2</a></sup>, for example, insert the following:</p>

<pre>C:\app\tpad090\Terapad.exe /jl=%l %f</pre>

<p>Table 1: Parameters used in MozUnit</p>

<table style="width: 259px;">
 <tbody>
  <tr>
   <td>
    <p>Parameter</p>
   </td>
   <td>
    <p>Description</p>
   </td>
  </tr>
  <tr>
   <td>
    <p>%f</p>
   </td>
   <td>
    <p>Filename</p>
   </td>
  </tr>
  <tr>
   <td>
    <p>%l</p>
   </td>
   <td>
    <p>Line number</p>
   </td>
  </tr>
  <tr>
   <td>
    <p>%c</p>
   </td>
   <td>
    <p>Column number</p>
   </td>
  </tr>
 </tbody>
</table>

<p> </p>

<p>The author uses Meadow, which is opened using gnuserv.</p>

<pre>C:\app\Meadow\bin\gnuclientw.exe +%l:%c %f</pre>

<p>Note that, at least in these tests, you will not be able to edit program files in your editor. And it’s probably for the best that you don’t use any filenames that have whitespace in them.</p>

<h4 id="Usage">Usage</h4>

<h5 id="An_RPN_calculator">An RPN calculator</h5>

<p>We’re going to implement a simple RPN<sup><a href="#footnote3" id="from_footnote3">3</a></sup> calculator in JavaScript to see how this can be used.</p>

<p>On the program side, we’ll create a class called <code>RpnCalc</code>. First we’ll sketch out a simple interface for it (Listing 1). Save this as a file called calc.js.</p>

<p>Listing 1: calc.js (stage 1)</p>

<pre class="brush: js">function RpnCalc() {
}
RpnCalc.prototype = {
  init: function() {
  },
  push: function(val) {
  },
  plus: function() {
  },
  pop: function() {
  }
}
</pre>

<h4 id="Implement_the_addition_operation">Implement the addition operation</h4>

<h5 id="Create_test_case">Create test case</h5>

<p>Begin by creating the test case. First, select the menu item <em>Tools:Mozlab:Open MozUnit Runner</em> to bring up the MozUnit window. Select the menu item<em> File:New</em>, and save<em> test_calc.js</em> in the same directory as the file that is the test target. Next, click the Edit button to set up the “2 1+” test case (Listing 2). Note that in this file, the method names serve as the test names.</p>

<p>In JUnit and similar packages, methods containing tests that start with testhoge are recognized as tests. MozUnit uses the same kind of notation, but you can also make the string the method name, making the test self-documenting. Pretty clever.</p>

<p>Listing 2: Content for <em>test_calc.js</em> (first-round test case)</p>

<pre class="brush: js">var TestCase = mozlab.mozunit.TestCase;
var assert = mozlab.mozunit.assertions;
var tc = new TestCase('Rpn Calc Testcase');
var module = new ModuleManager();
var rpncalc = module.require('package', 'calc');
tc.tests = {
  '2 1 +': function() {
    var calc = new rpncalc.RpnCalc();
    calc.init();
    calc.push(2);
    calc.push(1);
    calc.plus();
    assert.equals(calc.pop(), 3);
  }
}
</pre>

<p>Listing 3: Additional content for <em>calc.js</em></p>

<pre class="brush: js">function RpnCalc() {
  this.stack = new Array();
}
RpnCalc.prototype = {
  init: function() {
    this.stack = new Array();
  },
  push: function(val) {
    this.stack.push(Number(val));
  },
  _letfunc: function(func) {
    a = this.pop();
    b = this.pop();
    this.push(func(a, b));
  },
  plus: function() {
    return this._letfunc(this._plus);
  },
  _plus: function(a, b) {
    return a + b;
  },
  pop: function() {
    return this.stack.pop();
  }
}
</pre>

<h5 id="Check_for_errors">Check for errors</h5>

<p>Now you’re ready for your first test. When you run it, you should see a red bar, showing that it failed.</p>

<h5 id="Implement_in_calc.js">Implement in calc.js</h5>

<p>We need to flesh out <em>calc.js</em>. Update it with the contents of Listing 3.</p>

<h5 id="Run_test">Run test</h5>

<p>Run the test again. You should see a green bar showing that the test succeeded.</p>

<h4 id="Implement_the_subtraction_operation">Implement the subtraction operation</h4>

<p>Now let’s add subtraction.</p>

<h5 id="Create_test_case_2">Create test case</h5>

<p>First, add the test case for the subtraction method. Open<em> test_calc.js</em> and update it with the method in Listing 4.</p>

<h5 id="Implement_in_calc.js_2">Implement in calc.js</h5>

<p>Next we need to add the executable code. This will work much as it did for addition. Update <em>calc.js</em> with the method in Listing 5.</p>

<h5 id="Run_test_2">Run test</h5>

<p>If we run the test at this point, we’ll get a red bar. What’s the matter? The screen will display “<em>Expected -1, got 1</em>”. Somehow, using <code>pop()</code> got the order of the arguments mixed up. So let’s update the <code>_letfunc</code> function as shown in Listing 6.</p>

<p>If we run the test again, we should get a green bar, showing that it ran correctly.</p>

<h5 id="Benefits_of_testing">Benefits of testing</h5>

<p>Implementing the tests described here confirms that the methods work correctly, and builds confidence in your implementations.</p>

<p>Multiplication and division are implemented the same way, but what will you do if an invalid string is passed? What if you attempt to run with nothing in the stack—what result will you return then? Try to keep in mind real-world circumstances while you’re working on this.</p>

<p>Listing 4: <code>test_calc.js</code> (adding sample test case)</p>

<pre class="brush: js">'2 1 -': function() {
  var calc = new rpncalc.RpnCalc();
  calc.init();
  calc.push(2);
  calc.push(1);
  calc.minus();
  assert.equals(calc.pop(), 1);
},
</pre>

<p>Listing 5: calc.js (implementing subtraction operation)</p>

<pre class="brush: js">minus: function() {
  this._letfunc(this._minus);
},
_minus: function(a, b) {
  return a - b;
},
</pre>

<p>Listing 6: calc.js (correcting mistake in implementation of subtraction)</p>

<pre class="brush: js">_letfunc: function(func) {
// correct pop order
b = this.pop();
a = this.pop();
this.push(func(a, b));
},
</pre>

<p> </p>

<h2 id="Understanding_source_code">Understanding source code</h2>

<p>In the open-source community, you can learn a lot about how software works by studying its source code; with a massive project like Firefox, people typically use special source-code browsing tools to make sense of it.</p>

<h3 id="Mozilla_Cross-Reference">Mozilla Cross-Reference</h3>

<p>Mozilla Cross-Reference is a full-text searchable source-code listing hosted at mozilla.org. We’re going to use MXR (<a class="external" href="http://mxr.mozilla.org" rel="freelink">http://mxr.mozilla.org</a>), a Linux source-code browser.</p>

<h4 id="Getting_started">Getting started</h4>

<p>Visit this URL: <a class="external" href="http://mxr.mozilla.org" rel="freelink">http://mxr.mozilla.org</a> . In the left-hand sidebar, you should see a link to a search starting point and a search form (Figure 5).</p>

<p><span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>Figure 5: mxr.mozilla.org</em></span></p>

<h4 id="Usage_2">Usage</h4>

<h5 id="What_am_I_looking_for">What am I looking for?</h5>

<p>If you just start poking through the source code at random, you may not find much of anything. So let’s figure out where to start looking.</p>

<p>Let’s say we’ve found the contents of Listing 7 in the source. We can guess from the name that this has something to do with handling files, but we’ve still got the following questions:</p>

<ol>
 <li>What does nsILocalFile.initWithPath do? What arguments does it take?</li>
 <li>How is nsILocalFile.initWithPath actually implemented?</li>
</ol>

<p>Let’s examine these questions one at a time.</p>

<h5 id="What_does_this_do_What_arguments_does_it_take">What does this do? What arguments does it take?</h5>

<p>First we’ll search for the component’s definition. Type interface <code>nsILocalFile</code> (with a trailing space) in the search field and go.</p>

<p>Nearly all components inherit from <code>nsISupports</code> (<span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>why 'Nearly' ?</em></span>), so adding a trailing space when you search serves as a delimiter on the inheritance position, and makes it easier to specify what you’re looking for (see Figures 6, 7).<sup><a href="#footnote4" id="from_footnote4">4</a></sup></p>

<p>This results in the file <em>nsILocalFile.idl</em>. Let’s display it. Every method includes explanatory comments.</p>

<p>In <code>initWithPath</code>, the <code>nsILocalFile</code> object gets initialized, and any information already in it gets reset. Also be aware of a potential problem when using paths not representing entities.<sup><a href="#footnote5" id="from_footnote5">5</a></sup></p>

<p>This requires a full path as an argument. Relative paths will throw errors.</p>

<p>This should help you understand the <code>initWithPath</code> specification.</p>

<p><span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>Figure 6: Searching without a trailing space</em></span></p>

<p><span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>Figure 7: Searching with a trailing space</em></span></p>

<p><span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>Listing 7: Source-code fragment</em></span></p>

<pre class="brush: js">var file = Components.classes['@mozilla.org/file/local;1']
           .createInstance(Components.interfaces.nsILocalFile);
file.initWithPath(hoge);
</pre>

<h5 id="How_is_this_actually_implemented">How is this actually implemented?</h5>

<p>If we want to understand how something was implemented, how do we search for that? Drop the I from <code>nsILocalFile</code>, double the colons, and capitalize the first letter of the function name, resulting in <code>nsLocalFile::InitWithPath</code>. That's the C++ name of the function implementing <code>initWithPath</code>. Use that as your search string.</p>

<p>That should produce <em>nsLocalFileWin.cpp</em> and other OS-specific files. Let’s look inside <em>nsLocalFileWin.cpp</em>—we’ll see, for example, that it’s checking for the presence of a “:” in the drive name.</p>

<p>We can also see how network paths are handled differently on WinCE. Just looking at <code>InitWithPath</code>, we can see how the path-validation process works.</p>

<h2 id="Conclusion">Conclusion</h2>

<p>In this chapter, we looked at some tools beyond the introductory level. If you had any “aha!” moments while reading this, then I hope you’ll take the next step and actually put them to work. I hope you’ll find that this chapter helps make you a more effective extension developer.</p>

<h3 id="gonzui">gonzui</h3>

<p>gonzui is a full-text source-code search engine from Satoru Takabayashi, the well-known developer of the Namazu search engine software. <span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>Not sure we should talk about this tool</em></span></p>

<h4 id="Installation">Installation</h4>

<p>Windows users can take advantage of a self-contained version created by Soutaro Matsumoto called “gonzui for win32”</p>

<p><a class="external" href="http://soutaro.com/gonzui-win32/" rel="freelink">http://soutaro.com/gonzui-win32/</a></p>

<p>Run it as follows:</p>

<ol>
 <li>Download gonzui-win32-1.2.2.zip and expand it into a suitable directory.</li>
 <li>Download the Firefox source code and place it in the same directory as gonzui (simply because it’s easier to specify a file that’s in the same directory).</li>
 <li>Open a command prompt and navigate to the directory containing gonzui.</li>
 <li>The next command will import the source code: <code>gonzui-import.exe mozilla</code></li>
 <li>Once the import process is complete, type the following command to launch the gonzui server: <code>gonzui-server.exe</code></li>
 <li>Now you can access gonzui from your web browser by typing the following into your location bar : <a class="external" href="http://localhost:46984" rel="freelink">http://localhost:46984</a></li>
</ol>

<p>This lets you browse all packages, click on links to traverse them, and take traversed-link locations as search starting points (Figure A).</p>

<p><span class="inlineIndicator todo todoInline"><strong>FIXME:</strong> <em>Figure A: gonzui</em></span></p>

<p> </p>

<div class="note" id="footnote1"><a href="#from_footnote1">1</a> - <a class="external" href="http://quicknote.mozdev.org" rel="freelink">http://quicknote.mozdev.org</a></div>

<div class="note" id="footnote2"><a href="#from_footnote2">2</a> - <a class="external" href="http://www5f.biglobe.ne.jp/~t-susumu/" rel="freelink">http://www5f.biglobe.ne.jp/~t-susumu/</a></div>

<div class="note" id="footnote3"><a href="#from_footnote3">3</a> - Reverse-Polish Notation. A way to represent arithmetic formulas. For example, (1+2)*(3-4) would be represented in RPN as 1 2 + 3 4 - * It uses no parentheses. It is also easy to program.</div>

<div class="note" id="footnote4"><a href="#from_footnote4">4</a> - gonzui does not handle search strings with spaces very well; instead, go to the Advanced Search page, search on a few terms, and then use your browser’s Find function to search for the “:” character.</div>

<div class="note" id="footnote5"><a href="#from_footnote5">5</a> - Mac OS X and other OSs seemingly do not internationalize their directory names, but this hasn’t been confirmed.</div>