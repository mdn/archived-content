---
title: App development FAQ
slug: Archive/B2G_OS/Firefox_OS_apps/App_development_FAQ
tags:
  - Apps
  - FAQ
  - Firefox OS
---
<p></p><section class="Quick_links" id="Quick_Links">

<ol>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS">Build and install</a>
  <ol>
   <li><strong><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS">Build and install overview</a></strong></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_OS_build_process_summary">B2G OS build process summary</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/B2G_OS_build_prerequisites">Build prerequisites</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Preparing_for_your_first_B2G_build">Preparing for your first build</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building">Building B2G OS</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_installer_add-on">B2G installer add-on</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/Building_for_Flame_on_OS_X">Building B2G OS for Flame on Mac OS X</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Choosing_how_to_run_Gaia_or_B2G">Choosing how to run Gaia or B2G OS</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/Compatible_Devices">Compatible Devices</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Installing_on_a_mobile_device">Installing B2G OS on a mobile device</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_OS_update_packages">Creating and applying B2G OS update packages</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building/FOTA_community_builds">Building and installing FOTA community builds</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_Build_Variables_Reference_Sheet">B2G build variables reference sheet</a></li>
  </ol>
 </li>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS">Porting B2G OS</a>
  <ol>
   <li><strong><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS">Porting overview</a></strong></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS/basics">Porting basics</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS/Porting_on_CyanogenMod">Porting on CyanogenMod</a></li>
  </ol>
 </li>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia">Developing Gaia</a>
  <ol>
   <li><strong><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia">Developing Gaia overview</a></strong></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Running_the_Gaia_codebase">Running the Gaia codebase</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Mulet">Run Gaia on desktop using Mulet</a></li>

   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Understanding_the_Gaia_codebase">Understanding the Gaia codebase</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Making_Gaia_code_changes">Making Gaia code changes</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Testing_Gaia_code_changes">Testing Gaia code changes</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Submitting_a_Gaia_patch">Submitting a Gaia patch</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Build_System_Primer">Gaia build system primer</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Different_ways_to_run_Gaia">Different ways to run Gaia</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/make_options_reference">Make options reference</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Gaia_tools_reference">Gaia tools reference</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/B2G_OS/API">B2G OS APIs</a></li>
</ol>
</section><p></p>

<div class="summary">
<p>This FAQ is a compilation of answers to all the common questions received every week by our Business Development and Partner Engineering teams. You will find a lot of information here to help, whether you are a developer looking for help with a problem in your own development work, or another interested party looking to help others find answers. If you can&apos;t find an answer to your question in this document, or you need further information, have a look around the rest of the App Center, or contact us via the <a href="http://www.mozilla.org/about/forums/#dev-webapps">dev-webapps forum</a>.</p>
</div>

<h2 id="App_Development_and_publishing">App Development and publishing</h2>

<h3 id="What_is_an_Open_Web_App_technically">What is an Open Web App, technically?</h3>

<p>An Open Web App basically an HTML website or application, with some more functionality built on top of it. Think of Open Web Apps (OWA) as Web-standards-built applications or &quot;Web runtime&quot; applications. A Web runtime application runs outside a normal browser and can be launched from the desktop (or device equivalent) on any of the popular internet-connected devices. Of course, Web runtime applications can be run inside the browser too if the user prefers.</p>

<p>For an Open Web App, you can use:</p>

<ul>
 <li><a href="/en-US/docs/Web/Guide/HTML/HTML5"><strong>HTML5</strong></a> as the declarative syntax to define the structure of the application&apos;s user interface.</li>
 <li><a href="/en-US/docs/Web/CSS/CSS3"><strong>CSS3</strong></a> as the declarative syntax to define layout, visual aesthetics and portions of the UI behavior. Using CSS3, you can custom-tailor the visual experience to any device that needs a specific presentation without having to re-implement structure or programmatic logic.</li>
 <li><a href="/en-US/docs/JavaScript"><strong>JavaScript</strong></a> as the imperative syntax to implement logic to be executed on the client device.</li>
 <li>New technologies that are part of the HTML5 wave if not the HTML5 markup specification such as <a href="/en-US/docs/HTML/Using_the_application_cache">AppCache</a>, <a href="/en-US/docs/Storage">WebStorage</a>, <a href="/en-US/docs/WebSockets">WebSockets</a>, <a href="/en-US/docs/Web/Guide/Performance/Using_web_workers">WebWorkers</a>, <a href="/en-US/docs/Server-sent_events">Server-Sent Events</a>, <a href="/en-US/docs/Web/API/window.crypto">Crypto API,</a> etc.</li>
</ul>

<p>When appropriate, you can augment Web runtime applications with server-side logic, for use when the user&apos;s device is in a connected state. Though Web runtime applications can run whether or not they can connect to the worldwide Web, you can offer an enhanced experience when connected. You can choose any server-side platform and technology that you like, since the application and the server communicate over <a href="/en-US/docs/HTTP">HTTP/S</a> using standard mechanisms such as <a href="/en-US/docs/JSON">JSON</a> and <a href="/en-US/docs/XML">XML</a>.</p>

<h3 id="I&apos;ve_already_built_a_Web_application._How_do_I_make_it_into_an_installable_app">I&apos;ve already built a Web application. How do I make it into an installable app?</h3>

<p>The steps ar generally quite simple. You can find an easy guide to the basics at <a href="/en-US/docs/Web/Apps/Build/Building_apps_for_Firefox_OS">Building apps for Firefox OS</a>.</p>

<h3 id="How_can_I_protect_business-critical_assetscode">How can I protect business-critical assets/code?</h3>

<p>Fact: Every bit of code on the client side can be &quot;compromised&quot;. Developers need to understand and design accordingly.</p>

<p>You can make this harder via obfuscation with advanced compression (like Google closure compiler), and &quot;bitcode&quot;-style JavaScript generation via Emscripten and asm.js.</p>

<p>Some developers frown on JavaScript because native code requires obfuscation of source during compilation to run; JavaScript doesn&apos;t have to be obfuscated to run, but it can be, easily. Obfuscated JavaScript is analogous to compiled native code. Someone could de-obfuscate JavaScript just as they could de-compile compiled native code, but there&apos;s still a loss of information (spacing, comments, variable names) in both cases. And it is certainly possible for someone to analyze the obfuscated JavaScript code to fully understand what the code is doing, just as someone could analyze the bytecode of a compiled native binary; Rome wasn&apos;t built in a day, however.</p>

<p>For more detailed information and specific techniques, read <a href="https://hacks.mozilla.org/2013/12/protecting-your-firefox-os-app-code/">Protecting your Firefox OS app code</a>.</p>

<h3 id="Can_I_have_protectedencrypted_storage_on_the_phone_for_codeassets">Can I have protected/encrypted storage on the phone for code/assets?</h3>

<p>No, packaged apps are not encrypted. Developers can implement their own algorithms to store encrypted data but storing the secrets is another problem.</p>

<h3 id="Why_is_the_phone_too_slow_to_run_my_game">Why is the phone too slow to run my game?</h3>

<p>Develop it with low-powered mobile phones in mind.</p>

<p>The best first step is to profile it maybe with the Firefox profiler or Webkit profiler, but this is better done through the phone.</p>

<p>General bottlenecks to avoid:</p>

<ul>
 <li>Reduce/remove some optional &quot;juice&quot; (effects, particles, blending/composition, post processing)</li>
 <li>Don&apos;t scale images in your render loop with drawImage.</li>
 <li>Don&apos;t scale the oversized canvas down with CSS to fit device.</li>
 <li>Don&apos;t use heavy-weight libraries like Box2D, write physics to your own needs.</li>
 <li>Be aware of garbage collection and the pauses it can introduce while creating/destroying game entities, re-use object from pools.</li>
 <li>Use WebGL for rendering, Canvas still uses a lot of CPU!</li>
</ul>

<p>For more information and specific code examples, read <a href="https://hacks.mozilla.org/2013/05/optimizing-your-javascript-game-for-firefox-os/">Optimizing your JavaScript game for Firefox OS</a>.</p>

<h3 id="How_do_I_submit_an_updated_version_of_my_packaged_App">How do I submit an updated version of my packaged App?</h3>

<ol>
 <li>Go to the <a href="https://marketplace.firefox.com/">Firefox Marketplace</a></li>
 <li>Sign in</li>
 <li><a href="https://marketplace.firefox.com/developers/submissions">View submissions</a></li>
 <li>Click your app</li>
 <li>Click &quot;Manage Status &amp; Version&quot; on left</li>
 <li>Click &quot;Select a File...&quot; under Upload New Version</li>
 <li>Submit updated .zip file</li>
</ol>

<h3 id="Why_doesn&apos;t_my_app_update_even_though_I_have_updated_the_appcache_manifest">Why doesn&apos;t my app update, even though I have updated the <code>appcache</code> manifest?</h3>

<p>Please check if you send Cache Headers for your <code>appcache</code> manifest. If you don&apos;t, Gecko will use heuristic caching and will serve it from its cache for a few hours. We recommend that you configure an immediate expiration for your <code>appcache</code> manifest. The following Apache config will do just that:</p>

<pre>AddType text/cache-manifest .appcache
ExpiresByType text/cache-manifest &quot;access&quot;</pre>

<p>This might be a good idea for your <code>webapp</code> manifest too:</p>

<pre>AddType application/x-web-app-manifest+json .webapp
ExpiresByType application/x-web-app-manifest+json &quot;access&quot;</pre>

<h3 id="How_can_I_replace_my_hosted_app_with_a_packaged_app">How can I replace my hosted app with a packaged app?</h3>

<p>You have to upload it as a new app and disable the old app. There is no upgrade path for users provided by Marketplace at the moment.</p>

<p>To get the same URL/slug for the new app:</p>

<ol>
 <li>Rename the old app&apos;s slug: Edit the listing page, click [Edit] on Basic Information and change the App URL, e.g. by appending <code>-hosted</code></li>
 <li>Delist the old app on the Manage Status &amp; Versions page</li>
 <li><a href="https://marketplace.firefox.com/developers/submit/">Submit the new packaged app</a></li>
</ol>

<h3 id="How_do_I_push_a_packaged_app_to_a_device">How do I push a packaged app to a device?</h3>

<p>The best way is to use the <a href="/en-US/Firefox_OS/Using_the_App_Manager">Firefox OS App Manager</a>, which requires Firefox OS 1.2 or above.</p>

<p>You can also using the Firefox OS Simulator if needed:</p>

<ol>
 <li>Install the latest version of the <a href="https://addons.mozilla.org/en-US/firefox/addon/firefox-os-simulator/">Firefox OS Simulator Add-on</a> in Firefox</li>
 <li>Open the simulator through the Firefox Menu: Tools &gt; Web Developer &gt; Firefox OS Simulator</li>
 <li>Add your app&apos;s manifest to the simulator dashboard (by pointing the simulator to either your hosted manifest or a local copy of it)</li>
 <li>Connect the device</li>
 <li>Make sure that remote debugging is enabled on the device (Settings &gt; Device Information &gt; More Information &gt; Developer &gt; check Remote Debugging)</li>
 <li>With <a href="http://developer.android.com/tools/help/adb.html">adb installed</a>, run <code>adb devices</code> from the terminal and you should see your device listed. The simulator will recognize the device</li>
 <li>Click &quot;Push to Device&quot; for your app</li>
</ol>

<h2 id="Device_APIs_and_Capabilities">Device APIs and Capabilities</h2>

<h3 id="How_can_I_do_cross_domain_requests">How can I do cross domain requests?</h3>

<p>There are a few different potential solutions here:</p>

<ul>
 <li>Proxy Server: Use a server to proxy all cross origin requests. This requires you to maintain such a server.</li>
 <li>JavaScript Object Notation with Padding (JSONP): This is good in many circumstances, but is vulnerable to CSRF, and disabled with CSP in privileged apps.</li>
 <li>Cross Origin Resource Sharing (CORS): This requires modified response headers, which you can’t control if it’s not your server. <a href="http://enable-cors.org/">Enable CORS</a> has some useful introductory information, and the MDN <a href="/en-US/docs/HTTP/Access_control_CORS">HTTP access control (CORS) page</a> contains detailed guide and reference information. For <a href="/en-US/Apps/Developing/installable_apps">installable apps</a>, you need to set the <code>origin</code> property in your manifest to set packaged apps to a known origin.</li>
 <li>SystemXHR-enabled XHR: <a href="/en-US/Apps/Developing/installable_apps">Installable apps</a> require <code>privileged</code> <code>type</code> and <code>systemXHR</code> in <code>manifest.webapp</code> <code>permissions</code>. Initialize your XHR object with
  <pre class="brush: js">new XMLHttpRequest({mozSystem: true});</pre>

  <p>This is a powerful permission and will get extra scrutiny during review, use with caution! See the MDN <a href="/en-US/docs/Web/API/XMLHttpRequest#XMLHttpRequest%28%29"><code>XMLHttpRequest</code></a> page for more information.</p>
 </li>
</ul>

<h3 id="How_can_I_display_a_notification">How can I display a notification?</h3>

<p>You can use system notifications on desktop Firefox, Firefox for Android, Firefox OS, Chrome and Safari. Read <a href="/en-US/docs/WebAPI/Using_Web_Notifications">Using Web Notifications</a> for a basic introduction, and <a href="/en-US/Apps/Developing/Control_the_display/Notifying_users_via_the_Notification_and_Vibration">Notifying users via the Notification and Vibration APIs</a> for a more detailed example.</p>

<p>Note that the Notification API changed as of Firefox OS 1.2 (Gecko 26). See the <a href="/en-US/docs/WebAPI/Using_Web_Notifications#Gecko_notes">Using Web Notifications Gecko notes</a> for more specifics, and <a href="https://github.com/nickdesaulniers/fxos-irc/blob/master/js/notification.js">this example from the Firefox OS IRC app</a> for a cross-version solution.</p>

<h3 id="Can_I_get_network_speed_or_differ_between_wifimobile_broadband">Can I get network speed or differ between wifi/mobile broadband?</h3>

<p>Yes, when Network Information API lands. See <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=713199" title="[b2g] Network API: Gonk backend">bug 713199</a> for more information.</p>

<h3 id="Marketplace_Review_cited_my_app_for_not_opening_links_in_a_new_window!">Marketplace Review cited my app for not opening links in a new window!</h3>

<p>Your app will run in a chromeless runtime, without URL bar or navigation elements. When users navigate within your app to external websites, they can’t get back.</p>

<p>Within a running instance of a web app on Firefox OS, there is no browser chrome such as the navigation bar, refresh, home, or back buttons. It’s important then to make sure that usage of your app does not depend on these features. You can try disabling the browser chrome in Firefox by unchecking View &gt; Toolbars &gt; Navigation Toolbar and then navigating around your app. If you link to a site outside of your own, with no means to return, then the user must close the app and restart it just to go back. This is a poor user experience that we should try our best to avoid.</p>

<p>So how can we fix it? One way is to open all links to external domains in a new tab using the <code>target=&quot;_blank&quot;</code> attribute. <a href="https://gist.github.com/louisstow/5897420">Find a target blank example</a>. If you are not able to change all links, you can use an <a href="https://github.com/digitarald/chromeless-external-links-snippet">automated script that assigns the attribute on click</a>. See also another example, which <a href="https://gist.github.com/louisstow/5897420">forces external links to open in a new window in Firefox OS</a>.</p>

<h3 id="How_can_I_get_push_notifications">How can I get push notifications?</h3>

<p>Push notifications are available in Firefox OS 1.1 and above via the proprietary <a href="/en-US/docs/WebAPI/Simple_Push">Simple Push</a> API; note that the W3C <a href="/en-US/docs/Web/API/Push_API">Push API</a> is now available on some platforms; Firefox OS should support this at some poin in the future.</p>

<h3 id="How_can_I_detect_countryregion_and_carrier_from_SIM_card">How can I detect country/region and carrier from SIM card?</h3>

<p>For privileged apps, the <a href="/en-US/docs/Web/API/MozMobileConnection">Mobile Connection API</a> provides access to carrier and region codes; these need to be translated to the actual country codes. For a snippet that allows you to do this, look at <a href="https://gist.github.com/digitarald/5717512">Detect carrier and region from `mozMobileConnection`&apos;s `MNC` and `MCC`</a>.</p>

<h3 id="How_can_I_use_a_web_activity_to_send_an_email">How can I use a web activity to send an email?</h3>

<p>Mozilla Hacks has an <a href="https://hacks.mozilla.org/2013/01/introducing-web-activities/">in-depth blog post about web activities</a>, with technical details and several examples.</p>

<p>Specific example code:</p>

<pre class="brush: js">new MozActivity({
    name: &quot;new&quot;,
    data: {
           type: &quot;mail&quot;,
           url: &quot;mailto:?Subject=hello&amp;body=world&quot;
}
});</pre>

<p>See also:</p>

<ul>
 <li><a href="https://github.com/robnyman/Firefox-OS-Boilerplate-App">Firefox OS boilerplate app</a></li>
 <li><a href="/en-US/docs/WebAPI/Web_Activities">Web activities guide on MDN</a></li>
</ul>

<h3 id="How_can_I_share_URLs_through_email">How can I share URLs through email?</h3>

<p>This is not implemented correctly yet.</p>

<h3 id="How_can_I_open_my_listing_in_the_marketplace">How can I open my listing in the marketplace?</h3>

<p>Use <a href="/en-US/docs/WebAPI/Web_Activities">web activities</a>. See the <a href="https://github.com/mozilla/fireplace/wiki/Web-Activities">Firefox Marketplace Web Activities</a> guide for more specifics.</p>

<h3 id="How_can_I_detect_whether_an_app_is_privileged_or_certified">How can I detect whether an app is privileged or certified?</h3>

<p>In your app, you can use <a href="/en-US/docs/Web/API/Apps/getSelf" title="The documentation about this has not yet been written; please consider contributing!"><code>Apps.getSelf()</code></a> to get a <a href="/en-US/docs/Web/API/DOMRequest" title="The documentation about this has not yet been written; please consider contributing!"><code>DOMRequest</code></a> object, and then <code>onsuccess</code> the request result will be an application object representing the app itself. You can then use the <code>manifest</code> property on the app object and the <code>type</code> property on the <code>manifest</code> to tell you if your app is privileged, certified, etc. An example follows:</p>

<pre class="brush: js">var request = window.navigator.mozApps.getSelf();
request.onsuccess = function() {
    console.log(&quot;Your app&apos;s name is: &quot; + request.result.manifest.name);
    console.log(request.result.manifest.name + &quot; is a &quot; + request.result.manifest.type + &quot; app.&quot;);
};</pre>

<h3 id="How_can_my_app_detect_that_it_is_in_the_Web_runtime">How can my app detect that it is in the Web runtime?</h3>

<p>There are a few ways you can check this:</p>

<ul>
 <li>Use the <a href="/en-US/docs/Web/API/Apps.checkInstalled"><code>navigator.mozApps.checkInstalled()</code></a> function.</li>
 <li>Use the <a href="/en-US/docs/Web/API/Apps.getSelf"><code>navigator.mozApps.getSelf()</code></a> function.</li>
 <li>Use <code>window.locationbar.visible</code>. See <a href="/en-US/docs/Web/Apps/Tutorials/General/App_code#Navigation">Navigation</a>.</li>
 <li>To detect if the app is running in Firefox OS, you can use code like this:<br>
  <a href="https://github.com/mozilla/zamboni/blob/master/media/js/mkt/capabilities.js#L64">https://github.com/mozilla/zamboni/blob/master/media/js/mkt/capabilities.js#L64</a></li>
</ul>

<h2 id="Media">Media</h2>

<h3 id="How_should_I_do_media_presentation">How should I do media presentation?</h3>

<p>Currently, for security reasons, the h.264 decoder on Firefox OS devices is only available to privileged code. Because of that, you can&apos;t use the <a href="/en-US/docs/Web/HTML/Element/video" title="The HTML &lt;video&gt; element is used to embed video content in an HTML or XHTML document."><code>&lt;video&gt;</code></a> element to present h.264 content at this time. You can, however, use a <a href="/en-US/docs/WebAPI/Web_Activities">Web Activity</a>. Here&apos;s a code snippet that can help:</p>

<pre class="brush: html  language-html"><code class="language-html">var activity = new MozActivity({
  name: &quot;view&quot;,
  data: {
    type: [
      &quot;video/webm&quot;,
      &quot;video/mp4&quot;,
      &quot;video/3gpp&quot;,
      &quot;video/youtube&quot;
    ],
    url: &quot;http://example.com/myvideo.mp4&quot;
  }
});</code></pre>

<p>This asks Firefox OS to present the MP4 video at the specified URL. You can include one or more video format types in the <code>type</code> list to permit.</p>

<h3 id="Do_we_support_MP4H264MP3AACetc">Do we support MP4/H264/MP3/AAC/etc?</h3>

<p>Firefox OS and Firefox on Android support additional codecs through hardware playback.</p>

<p>Support summary:</p>

<ul>
 <li>Video: OGG, WebM, MPEG 4 &amp; H.264 (AAC or MP3)</li>
 <li>Audio: MP3, AAC, M4A, OGG Vorbis, WAV</li>
</ul>

<p>Read <a href="/en-US/docs/HTML/Supported_media_formats#Browser_compatibility">Supported media formats</a> for more detail.</p>

<p>We recommend H.264 and MP3 for Firefox OS as it’s using hardware playback and therefore will use less CPU and battery.</p>

<div class="warning notecard">
<p>Warning: Codecs that depend on hardware playback can not be tested in Firefox OS Simulator.</p>
</div>

<div class="note notecard">
<p>Known bugs: H.264 and WebM are disabled on 1.0.1.</p>
</div>

<p>See also:</p>

<ul>
 <li><a href="/en-US/docs/WebAPI/Web_Activities#Starting_an_activity">Starting an activity</a></li>
 <li><a href="/en-US/docs/Mozilla/Firefox_OS/Apps/Tips_and_techniques#Media_presentation">Media presentation tips</a></li>
 <li><a href="https://github.com/mozilla/r2d2b2g/wiki/Limitations">B2G limitations</a></li>
</ul>

<h3 id="How_can_I_play_music_in_the_background">How can I play music in the background?</h3>

<p>This requires the <code>audio-channel-content</code> permission in manifest and setting the following property on audio objects/elements:</p>

<pre class="brush: js">audio.mozAudioChannelType = &apos;content&apos;;</pre>

<p>Permission is available to all apps.</p>

<p>This is subject to change in the future, as the behaviour is not well defined.</p>

<h3 id="How_can_I_store_downloaded_files_to_the_phone">How can I store downloaded files to the phone?</h3>

<p>The <a href="/en-US/docs/WebAPI/Device_Storage">Device Storage API</a> allows writing, reading and manipulation of files on the phones SD card, including access to the users music, videos and photos.</p>

<p>This API is privileged; it requires a packaged app and allows fine-grained permissions: see the <code>device-storage:*</code> permissions in our <a href="/en-US/docs/Apps/App_permissions">App permissions reference page</a>.</p>

<h3 id="Does_Firefox_OS_Support_HTTP_Live_Streaming_(HLS)">Does Firefox OS Support HTTP Live Streaming (HLS)?</h3>

<p>While HLS (HTTP Live Streaming) is a fantastic protocol, it&apos;s exclusive to Apple and Apple has taken no steps to standardize it other than an initial submission to the IETF. There is the possibility of using another transmission protocol, but requiring adaptive bitrate streaming; to this end, we have implemented experimental support for <a href="/en-US/docs/Web/API/MediaSource">Media Source Extensions</a>; you also have the options of streaming data over HTTP or <a href="/en-US/docs/WebSockets">WebSockets</a>.</p>

<h3 id="How_can_I_have_DRM_for_musicvideo">How can I have DRM for music/video?</h3>

<p>We are evaluating the feasibility of EME.</p>

<h3 id="Can_I_record_video">Can I record video?</h3>

<p>Yes, with <a href="https://wiki.mozilla.org/TPEPlatform/MediaRecorder"><code>MediaRecorder</code></a>.</p>

<ol>
</ol>

<h2 id="Debugging">Debugging</h2>

<h3 id="How_can_I_debug_my_app_on_the_phone">How can I debug my app on the phone?</h3>

<p>The best way is to use the <a href="/en-US/Firefox_OS/Using_the_App_Manager">Firefox OS App Manager</a>, which is compatible with Firefox OS 1.2 and above.</p>

<p>Alternatively, <a href="http://developer.android.com/tools/help/adb.html">Install ADB</a> and run <code>adb logcat</code> (Remote Debugging and Console needs to be enabled on the phone’s Developer Settings). Remote debugging from Firefox will be enabled in later versions.</p>

<p>logcat output can be filtered (only showing console logs, JS errors and filter out CSS warnings):</p>

<pre class="brush: bash">adb logcat GeckoConsole:* *:F | grep -vE &quot;parsing value|Unknown property|declaration|invalid source| but found |pseudo-&quot;</pre>

<h3 id="Why_is_my_App_fast_in_the_Simulator_but_painfully_slow_on_the_device">Why is my App fast in the Simulator but painfully slow on the device?</h3>

<p>Profiling results are very different between Desktop and phone, due to different Firefox versions and hardware. We recommend profiling on the device!</p>

<ul>
 <li><a href="/en-US/docs/Performance/Profiling_with_the_Built-in_Profiler#Profiling_Boot_to_Gecko_%28with_a_real_device%29">Using Firefox built-in Profiler on device</a></li>
 <li><a href="https://wiki.mozilla.org/B2G/Profiling">New Profiler for B2G</a> (requires building and flashing)</li>
</ul>

<h3 id="Why_is_my_app_being_killed_right_on_start-up">Why is my app being killed right on start-up?</h3>

<p>Your app got killed probably due to excessive memory use or memory spikes (Out-Of-Memory; OOM).</p>

<p>Causes:</p>

<ul>
 <li><code>localStorage</code> access causing memory spikes</li>
 <li>Loading and processing large images</li>
 <li>Memory leaks</li>
</ul>

<h3 id="How_do_I_debug_memory_use_and_OOM">How do I debug memory use and OOM?</h3>

<p>Look for sigkill being sent to your app. The size is listed in pages (4 KB/page). This is done via</p>

<pre class="brush: bash">adb shell dmesg | tail -20</pre>

<p>The following shows the memory usage of processes on the device, at a high level.</p>

<pre class="brush: bash">adb shell b2g-procrank</pre>

<p>There is also a script available: <a href="https://github.com/mozilla-b2g/B2G/blob/master/tools/get_about_memory.py"><code>get_about_memory</code></a>, which gets <code>about:memory</code> information off the phone. It&apos;s the same info we get in the browser if you type <code>about:memory</code> into the location bar. This doesn&apos;t work on Windows.</p>

<p>Steps to investigate OOM crashes:</p>

<ul>
 <li>Check <code>adb shell dmesg</code> to ensure that the crash is actually due to OOM. If it is, you&apos;ll see something about the LMK sending SIGKIL to the app process.</li>
 <li>Run <code>get_about_memory</code> every few seconds. Getting a memory report is not very expensive (if you don&apos;t have DMD enabled), so if you can get a memory report soon before the app crashes, we can get a lot of info that way.</li>
</ul>

<p>For more information, read <a href="/en-US/Firefox_OS/Debugging/Debugging_OOMs">Debugging out of memory errors on Firefox OS</a>.</p>

<h3 id="Why_do_I_get_a_different_user_agent">Why do I get a different user agent?</h3>

<p>Some websites are on a whitelist to send a different user agent. This is to force the website to serve the mobile website if it doesn’t recognize the B2G user agent.</p>

<p>Check if the website is on <a href="https://github.com/mozilla-b2g/gaia/blob/master/build/ua-override-prefs.js">this whitelist</a>.</p>

<p>Why does my app stop rendering on load without error?</p>

<p>This may be due to</p>

<ul>
 <li>GPU Out Of Memory or Long-running script got stopped without notice (see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=921519">bug 921519</a> for more details)</li>
 <li>View contains many scaled down images</li>
</ul>

<h3 id="How_can_I_tell_where_my_phone_is_going_for_updates">How can I tell where my phone is going for updates?</h3>

<p>Browse the phone storage using adb shell and look in:</p>

<ul>
 <li><code>/system/b2g/defaults/pref/user.js</code></li>
 <li><code>/data/b2g/mozilla/[profile]/prefs.js</code></li>
</ul>

<p>mozilla-central/b2g/app/b2g.js -&gt; http://update.boot2gecko.org/[channel]/update.xml</p>

<h3 id="Marketplace_doesn’t_launch_or_shows_an_error_page">Marketplace doesn’t launch or shows an error page</h3>

<p>The time in your device probably isn’t set correctly. it is highly likely that it is still set to some date in 1980. The big year difference causes invalid HTTPS certificates.</p>

<p>Set the correct time, date and timezone in Settings &gt; Time &amp; Date</p>

<h3 id="I_accidentally_uninstalled_the_Marketplace_how_do_I_get_it_back">I accidentally uninstalled the Marketplace, how do I get it back?</h3>

<p>To re-install the marketplace:</p>

<ol>
 <li>In the browser application on device go to the <a href="https://marketplace.firefox.com">Firefox Marketplace</a></li>
 <li>Click the gear icon in the top right to open settings</li>
 <li>Change the region dropdown to Worldwide, hit ok, then Save Changes</li>
 <li>After settings are saved, use the Marketplace search &quot;marketplace&quot; without the quotes</li>
 <li>If you successfully changed your region to worldwide then Marketplace should be the first result</li>
 <li>Click Free, then Install</li>
</ol>

<h3 id="What_are_useful_commands_during_development">What are useful commands during development?</h3>

<p>In the commands below, the output is piped through <a href="https://github.com/dhylands/colored-logcat"><code>colored-logcat</code></a>, remove if not used.</p>

<p>Heavily filtered log (only JS logs and errors)</p>

<pre class="brush: bash">alias b2g-log=&apos;adb logcat GeckoConsole:* *:F | grep -vE &quot;parsing value|Unknown property|declaration|invalid source| but found |pseudo-&quot; | ~/bin/coloredlogcat.py&apos;</pre>

<p>Mostly log (no CSS warnings)</p>

<pre class="brush: bash">alias b2g-log-all=&apos;adb logcat | grep -vE &quot;parsing value|Unknown property|declaration|invalid source| but found |pseudo-&quot; | ~/bin/coloredlogcat.py&apos;</pre>

<p>Show running processes</p>

<pre class="brush: bash">alias b2g-ps=&apos;watch -n1 adb shell b2g-ps&apos;</pre>

<p>Restart B2G on device (faster than a power cycling)</p>

<pre class="brush: bash">alias b2g-restart=&apos;adb shell stop b2g &amp;&amp; adb shell start b2g&apos;</pre>

<p>Edit device prefs (Sublime), store them and restart device</p>

<pre class="brush: bash">alias b2g-pref=&apos;adb pull /system/b2g/defaults/pref/user.js ~/Downloads/user.js &amp;&amp;
subl ~/Downloads/user.js --wait &amp;&amp;
adb shell mount -o rw,remount /system &amp;&amp;
adb push ~/Downloads/user.js /system/b2g/defaults/pref/user.js &amp;&amp;
adb shell mount -o ro,remount /system &amp;&amp;
adb reboot&apos;</pre>

<h3 id="Why_does_my_&lt;meta_nameviewport&gt;_not_work">Why does my <code>&lt;meta name=&quot;viewport&quot;&gt;</code> not work?</h3>

<p>This is currently only supported in the browser and not in installable apps. For more information, read <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=830306" title="Folha app doesn&apos;t zoom out when viewed as an app">bug 830306</a> and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=845690" title="FIXED: Support meta viewport in Firefox OS apps">bug 845690</a>.</p>

<h3 id="Why_am_I_getting_an_address_wasn&apos;t_understood_error_or_broken_images_with_AngularJS">Why am I getting an &quot;address wasn&apos;t understood&quot; error or broken images with AngularJS?</h3>

<p>If you have developed a packaged app with AngularJS, you may see a broken image or run into this error message:</p>

<pre class="language-html">The address wasn&apos;t understood
Firefox doesn&apos;t know how to open this address, because the protocol (unsafe) isn&apos;t associated with any program. </pre>

<p>When you use Angular data binding to generate a URL, Angular will match the URL against its whitelist. If the URL does not match, Angular prefixes the url with &quot;<code>unsafe:</code>&quot; (<a href="http://docs.angularjs.org/api/ng.$compileProvider" class="external external-icon">see the Angular documentation</a>). To make you app work with AngularJS, you can add &quot;<code>app:/</code>&quot;--the protocol FirefoxOS packaged apps use--to Angular&apos;s whitelist. In your app&apos;s configuration, this is how to whitelist &quot;<code>app:/</code>&quot;:</p>

<pre class="language-html">var app = angular.module( &apos;myApp&apos;, [] ).config([&apos;$compileProvider&apos;, function($compileProvider) {
        $compileProvider.<strong>url</strong>SanitizationWhitelist(/^\s*(https?|ftp|mailto|app):/);
    }
]);
</pre>

<p>Or in AngularJS 1.1+</p>

<pre class="language-html">var app = angular.module( &apos;myApp&apos;, [] ).config([&apos;$compileProvider&apos;, function($compileProvider) {
        $compileProvider.<strong>aHref</strong>SanitizationWhitelist(/^\s*(https?|ftp|mailto|app):/);
        $compileProvider.<strong>imgSrc</strong>SanitizationWhitelist(/^\s*(https?|ftp|mailto|app):/);
    }
]);
</pre>

<h2 id="Devices">Devices</h2>

<h3 id="How_do_I_edit_the_preferences_on_the_device">How do I edit the preferences on the device?</h3>

<p>These steps depend on Sublime Text being installed.</p>

<ol>
 <li>Pull the configuration file from the phone into your Downloads folder (edit target folder if needed):
  <pre class="brush: bash">adb pull /system/b2g/defaults/pref/user.js ~/Downloads/user.js &amp;&amp;
</pre>
 </li>
 <li>Open the <code>user.js</code> file which is now in <code>~/Downloads/</code> in your favorite code editor to add or edit preferences.</li>
 <li>Upload the file back to the phone and restart the main process:
  <pre class="brush: bash">adb shell mount -o rw,remount /system &amp;&amp;
adb push ~/Downloads/user.js /system/b2g/defaults/pref/user.js &amp;&amp;
adb shell mount -o ro,remount /system &amp;&amp;
adb reboot</pre>
 </li>
</ol>

<p>If you have Sublime Text installed you can also execute this one-liner which pulls the file, opens Sublime, waits until you close Sublime and uploads the edited file back to the phone:</p>

<pre class="brush: bash">adb pull /system/b2g/defaults/pref/user.js ~/Downloads/user.js &amp;&amp;
subl ~/Downloads/user.js --wait &amp;&amp;
adb shell mount -o rw,remount /system &amp;&amp;
adb push ~/Downloads/user.js /system/b2g/defaults/pref/user.js &amp;&amp;
adb shell mount -o ro,remount /system &amp;&amp;
adb reboot</pre>

<h3 id="How_do_I_update_a_Geeksphone_Keon_or_Peak">How do I update a Geeksphone Keon or Peak?</h3>

<p>See <a href="/en-US/Firefox_OS/Developer_phone_guide/Updating_and_Tweaking_Geeksphone">Updating and Tweaking your Firefox OS Developer Preview phone/Geeksphone</a></p>

<p><strong>The easy way</strong>: Geeksphone provide updates on a public download server:</p>

<ol>
 <li>Go to the <a href="http://downloads.geeksphone.com/">Geeksphone download server</a>.</li>
 <li>Download the latest stable or nightly build for your device</li>
 <li>Unzip the downloaded assets</li>
 <li>Connect device</li>
 <li>Enable remote debugging on device (Settings &gt; Device Information &gt; More Information &gt; Developer &gt; Remote Debugging)</li>
 <li>Run <code>./flash.sh</code> from the unzipped downloaded assets</li>
</ol>

<p><strong>The hard way</strong>: Replace app.update.url with B2G Nightly updates:</p>

<ol>
 <li>Grab and edit the user.js preferences from the phone (the following command uses Sublime, change if needed):
  <pre class="brush: bash">adb pull /system/b2g/defaults/pref/user.js ~/Downloads/user.js &amp;&amp;
subl ~/Downloads/user.js --wait &amp;&amp;
adb shell mount -o rw,remount /system &amp;&amp;
adb push ~/Downloads/user.js /system/b2g/defaults/pref/user.js &amp;&amp;
adb shell mount -o ro,remount /system &amp;&amp;
adb reboot</pre>
 </li>
 <li>Find <code>pref(&quot;app.update.url&quot;, &quot;http://gpfos.s3.amazonaws.com/keon/update.xml&quot;);</code></li>
 <li>Change the URL value to <code>http://update.boot2gecko.org/nightly/update.xml</code></li>
 <li>Save and close your editor, the previous command will put the updated prefs back and relaunch b2g</li>
</ol>

<p>You can force OTA updates using Check Now in the Firefox OS Settings. Changes in user.js should be persisted between updates, but I am not sure.</p>

<p><strong>The hardest way</strong>: <a href="https://gist.github.com/janjongboom/5500846">Flash only gecko and gaia.</a></p>

<h2 id="App_Manifests">App Manifests</h2>

<h3 id="How_can_my_app_access_device-level_APIs">How can my app access device-level APIs?</h3>

<p>Different APIs have different permission levels — See <a href="/en-US/docs/Web/Apps/App_permissions">App permissions</a> for more information. To use some APIs, you may need to declare them in the app manifest <a href="/en-US/Apps/Build/Manifest#permissions">permissions</a> field, declare them to be privileged/certified apps in the manifest <a href="/en-US/Apps/Build/Manifest#type">type</a> field, or more besides.</p>

<h3 id="Why_does_my_app_need_an_app_manifest">Why does my app need an app manifest?</h3>

<p>The app manifest provides useful information about an app (such as name, author, icon, and description) in a simple document usable by both users and app stores. Most importantly, it will contain a list of <a href="/en-US/docs/WebAPI">Web APIs</a> (such as <a href="/en-US/docs/WebAPI/Using_geolocation">geolocation</a>) that your App needs. This allows users to make informed decisions about apps before installing them.</p>

<h3 id="Is_the_Firefox_OS_manifest_format_the_same_as_for_Google_Chrome_extensions_or_the_W3C_manifest">Is the Firefox OS manifest format the same as for Google Chrome extensions, or the <a href="/en-US/docs/Web/Manifest">W3C manifest</a>?</h3>

<p>No. The Firefox OS manifest uses a proprietary fomat that was developed early on out of neccesity. It hoped that in future Firefox OS will adopt the W3C manifest format.</p>

<h3 id="Can_Firefox_OS_apps_be_installed_on_other_platforms">Can Firefox OS apps be installed on other platforms?</h3>

<p>Yes. They can be installed on Firefox for Android and Firefox Desktop 29+. For details of how, read these:</p>

<ul>
 <li><a href="/en-US/Marketplace/Options/Open_web_apps_for_android">Open web apps for Android</a></li>
 <li><a href="/en-US/Marketplace/Options/Open_web_apps_for_desktop">Open web apps for Desktop</a></li>
</ul>

<h3 id="What_is_an_origin">What is an origin?</h3>

<p>The origin of an app is the protocol, domain, and port of the URL together. Each of the following URLs is a different origin:</p>

<ul>
 <li><code>http://example.com</code></li>
 <li><code>http://example.com:8080</code> (different port)</li>
 <li><code>https://example.com</code> (different protocol)</li>
 <li><code>http://www.example.com</code></li>
 <li><code>http://myapp.example.com</code> (subdomain)</li>
</ul>

<p>The following URLs are the same origin:</p>

<ul>
 <li><code>http://Example.com:80</code></li>
 <li><code>http://example.com</code></li>
 <li><code>http://example.com/drawingApp</code></li>
</ul>

<p>See <a href="/en-US/docs/Web/JavaScript/Same_origin_policy_for_JavaScript">Same-origin policy</a> for more information.</p>

<h3 id="Why_do_I_have_to_host_the_app_manifest_at_the_same_origin_as_my_app">Why do I have to host the app manifest at the same origin as my app?</h3>

<p>We assume that only you can host an app manifest at the same origin as your app. This means your users can install your app with confidence, knowing that the installation is based on your app manifest and not someone else&apos;s. Users should have this confidence whether they&apos;re installing your app from Firefox Marketplace, from some other app store, or from your own website if you are self-publishing your app.</p>

<p>If the app manifest were not hosted at the same origin as the app itself, there would be nothing to prevent third parties from making apps directly out of content hosted at your origin. Even worse, third parties could create an app manifest using your branding that would trick users into installing an app that was a facade for stealing passwords or other improper behavior.</p>

<h3 id="Does_this_mean_I_can&apos;t_embed_images_or_JavaScript_from_other_origins">Does this mean I can&apos;t embed images or JavaScript from other origins?</h3>

<p>No. The origin restriction is on content (HTML pages) only. Images and other embedded resources can be located elsewhere (for example, on a content delivery network), except for the app&apos;s icon, which must be served from the app&apos;s origin.</p>

<h3 id="Can_I_have_more_than_one_app_at_one_origin">Can I have more than one app at one origin?</h3>

<p>It used to be the case that you could not host more than one app at the same origin (<a href="/en-US/docs/Web/API/Apps/install" title="The documentation about this has not yet been written; please consider contributing!"><code>Apps.install</code></a> would fail with a <code>MULTIPLE_APPS_PER_ORIGIN_FORBIDDEN </code>error). However, the single-app-per-origin restriction has been lifted (see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=778277" title="FIXED: Add support of installing of multiple apps off of the same origin">bug 778277</a>) — this change was landed in Gecko 34, meaning that Firefox OS 2.1+, Firefox Desktop 34+ and Firefox for Android 34+ are able to install multiple apps from the same origin.</p>

<p>Note that allowing multiple apps at the same origin doesn&apos;t affect our permission model. Say we have three apps at example.com: A, B and C. All three apps have different permissions. If the user installs apps A and B, pages inside app A&apos;s context will have A&apos;s permissions, pages inside app B&apos;s context will have B&apos;s permissions, and no pages will have C&apos;s permissions.</p>

<p>However, there are some subtle security implications to consider. Any page uploaded to example.com might get navigated to by App A, App B, or App C. That means that such a page *might* potentially run with A&apos;s, B&apos;s, or C&apos;s permissions. So for example there is a chance that the user will install App A, and that App A might navigate to an uploaded page outside the app, in which case the page would run with As permissions, which might not be what the developer of App A expected.<br>
 <br>
 So hosting an app with lots of permissions on the same server as other content that you don&apos;t expect to have the same level of permissions is a bad idea, especially if we are talking about apps that deal with sensitive data (e.g. credit card information, customer records.) This could lead to an exploitable vulnerability. You should follow the same security best practices as you would with regular web content — e.g. you would put a sensitive web app on its own domain anyway.</p>

<div class="note notecard">
<p><strong>Note</strong>: If you need to support old versions of Firefox OS/Desktop/Android, we recommend that you use a separate sub-domain for each of your apps. For example, <code>spreadsheet.mycoolapps.com</code> for one app and <code>texteditor.mycoolapps.com</code> for another. For more information, see <a href="/en-US/docs/Web/Apps/Adding_a_subdomain">Adding a subdomain for an app</a>.</p>
</div>

<div class="note notecard">
<p><strong>Note</strong>: Currently the Firefox Marketplace still enforces the single app per origin restriction, even though devices no longer do. This should hopefully be fixed soon (see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1042638" title="[tracking] Enable multiple apps per origin?">bug 1042638</a>.)</p>
</div>

<h3 id="Why_not_just_upload_the_app_manifest_directly_to_the_Firefox_Marketplace">Why not just upload the app manifest directly to the Firefox Marketplace?</h3>

<p>There are several benefits to hosting the manifest at your domain and providing the app manifest URL to the Marketplace:</p>

<ul>
 <li>We intend that the Marketplace (and other app stores) will periodically revisit all the app manifests at the provided URLs and check them for updates. This avoids the need for you to re-upload your app manifest for each update.</li>
 <li>The Marketplace will pass both the original app manifest contents as well as its URL to the user&apos;s device. This allows the device to check for unexpected changes in the app manifest that might indicate tampering. This will be especially important for apps that use Web APIs (for geolocation for example).</li>
</ul>

<h3 id="Why_does_my_Web_server_have_to_use_the_proper_HTTP_Content-Type_header_when_serving_my_app_manifest">Why does my Web server have to use the proper HTTP <code>Content-Type</code> header when serving my app manifest?</h3>

<p>This restriction prevents users of a website that allows user-generated content (for example, a pastebin site) from inadvertently or inappropriately claiming that entire website as their app.</p>

<h3 id="Should_I_use_HTTPS_to_serve_my_app_manifest">Should I use HTTPS to serve my app manifest?</h3>

<p>Yes, it is a good idea. We anticipate that the Firefox Marketplace will require any app using Web APIs (such as <a href="/en-US/docs/Web/API/Geolocation">Geolocation</a>) to serve its app manifest over HTTPS as an additional defense against man-in-the-middle attacks. If you use HTTPS for your manifest, you must also use it for all the pages on your site.</p>

<h3 id="What_if_someone_else_submits_my_app_to_the_Firefox_Marketplace">What if someone else submits my app to the Firefox Marketplace?</h3>

<p>In the unfortunate event that someone guesses the URL to your app manifest and submits it to the Firefox Marketplace before you do, please file a complaint with the <a href="https://marketplace.firefox.com/developers/support">Marketplace support team</a>.</p>
