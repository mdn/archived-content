<p>« <a href="/en-US/docs/XPCOM_API_Reference">XPCOM API Reference</a></p>

<h3 id="Summary" name="Summary">Summary</h3>

<p>The <code>NS_UTF16ToCString</code> function converts the value of a <code><a href="/en/NsAString">nsAString</a></code> instance from UTF-16 to the specified multi-byte encoding and stores the result in a <code><a href="/en/NsACString">nsACString</a></code> instance.</p>

<pre>  #include "nsStringAPI.h"

  nsresult NS_UTF16ToCString(
    const nsAString&amp; aSrc,
    nsCStringEncoding aDestEncoding,
    nsACString&amp; aDest
  );
</pre>

<h3 id="Parameters" name="Parameters">Parameters</h3>

<dl>
 <dt>aSrc</dt>
 <dd>[in] A <code><a href="/en/NsAString">nsAString</a></code> instance containing the source UTF-16 string to be converted. The source string should be encoded using the host byte order.</dd>
</dl>

<dl>
 <dt>aDestEncoding</dt>
 <dd>[in] The character encoding of the destination string. See <code><a href="/en/NsCStringEncoding">nsCStringEncoding</a></code> for the set of values that can be passed for this parameter.</dd>
</dl>

<dl>
 <dt>aDest</dt>
 <dd>[out] A <code><a href="/en/NsACString">nsACString</a></code> instance that will contain the result of the conversion.</dd>
</dl>

<h3 id="Return_Values" name="Return_Values">Return Values</h3>

<p>The <code>NS_UTF16ToCString</code> function returns <code>NS_OK</code> if successful. Otherwise, it returns an error code. The set of possible error codes is currently unspecified.</p>

<h3 id="Example_Code" name="Example_Code">Example Code</h3>

<pre>  // Convert UTF-16 (or UCS-2) string to UTF-8
  void
  CopyUTF16toUTF8(const nsAString&amp; in, nsACString&amp; out)
  {
    NS_UTF16ToCString(in, NS_CSTRING_ENCODING_UTF8, out);
  }
</pre>

<h3 id="History" name="History">History</h3>

<p>This function was frozen for Mozilla 1.7. See bug <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=239123" title="FIXED: exported functions in nsStringAPI.h should be frozen for 1.7 final">bug 239123</a> for details.</p>

<h3 id="See_Also" name="See_Also">See Also</h3>

<p><code><a href="/en/NsACString">nsACString</a></code>, <code><a href="/en/NsAString">nsAString</a></code>, <code><a href="/en/NsCStringEncoding">nsCStringEncoding</a></code></p>