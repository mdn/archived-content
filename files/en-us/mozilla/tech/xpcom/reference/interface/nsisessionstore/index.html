---
title: nsISessionStore
slug: Mozilla/Tech/XPCOM/Reference/Interface/nsISessionStore
tags:
  - Interfaces
  - 'Interfaces:Scriptable'
  - XPCOM
  - XPCOM API Reference
  - XPCOM Interface Reference
---
<p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/browser/components/sessionstore/nsISessionStore.idl" rel="custom">browser/components/sessionstore/nsISessionStore.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

Provides a means for extensions and other code to store data in association with browser sessions, tabs, and windows. The API operates on top-level <code>browser.xul</code> and <code>navigator.xul</code> windows; see <a href="#Note_on_windows">Note on windows</a> for details.
</span>

  <div style="height: 42px; position: relative; padding: 2px; width: auto;">

  <div style="top: 22px; font-size: 11px; position: absolute;">1.0</div>

  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">66</div>

  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 5.714285714285714%;"></div>

<div style="height: 8px; top: 16px; left: 5.714285714285714%; background: #00dd00; position: absolute; width: 94.28571428571429%;" title="Introduced in Gecko 1.8 (Firefox 1.5 / Thunderbird 1.5 / SeaMonkey 1.0)"></div>

<div style="top: 0px; font-size: 11px; position: absolute; left: 5.714285714285714%;">Introduced</div>
<div style="top: 22px; font-size: 11px; position: absolute; left: 5.714285714285714%;">Gecko 1.8</div>

    <div style="height: 8px; top: 16px; left: 10.928571428571429%; background: #eeee00; position: absolute; width: 1%; border-radius: 4px; -webkit-border-radius: 4px;" title="Last changed in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)"></div>

</div>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title>nsISupports</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)</span></div>
</div><p></p>

<p>In versions of Firefox prior to 3.5, the user preference <code>browser.sessionstore.enabled</code> must be <code>true</code> for these calls to be successful. Starting in Firefox 3.5, this preference is no longer used.</p>

<h2 id="Method_overview" name="Method_overview">Method overview</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td><code>void <a href="#deleteTabValue()">deleteTabValue</a>(in nsIDOMNode aTab, in AString aKey);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#deleteWindowValue()">deleteWindowValue</a>(in nsIDOMWindow aWindow, in AString aKey);</code></td>
  </tr>
  <tr>
   <td><code>nsIDOMNode <a href="#duplicateTab()">duplicateTab</a>(in nsIDOMWindow aWindow, in nsIDOMNode aTab);</code> </td>
  </tr>
  <tr>
   <td><code>nsIDOMNode <a href="#forgetClosedTab()">forgetClosedTab</a>(in nsIDOMWindow aWindow, in unsigned long aIndex);</code> </td>
  </tr>
  <tr>
   <td><code>nsIDOMNode <a href="#forgetClosedWindow()">forgetClosedWindow</a>(in unsigned long aIndex);</code> </td>
  </tr>
  <tr>
   <td><code>AString <a href="#getBrowserState()">getBrowserState</a>();</code></td>
  </tr>
  <tr>
   <td><code>unsigned long <a href="#getClosedTabCount()">getClosedTabCount</a>(in nsIDOMWindow aWindow);</code></td>
  </tr>
  <tr>
   <td><code>AString <a href="#getClosedTabData()">getClosedTabData</a>(in nsIDOMWindow aWindow);</code></td>
  </tr>
  <tr>
   <td><code>unsigned long <a href="#getClosedWindowCount()">getClosedWindowCount</a>();</code> </td>
  </tr>
  <tr>
   <td><code>AString <a href="#getClosedWindowData()">getClosedWindowData</a>();</code> </td>
  </tr>
  <tr>
   <td><code>AString <a href="#getTabState()">getTabState</a>(in nsIDOMNode aTab);</code> </td>
  </tr>
  <tr>
   <td><code>AString <a href="#getTabValue()">getTabValue</a>(in nsIDOMNode aTab, in AString aKey);</code></td>
  </tr>
  <tr>
   <td><code>AString <a href="#getWindowState()">getWindowState</a>(in nsIDOMWindow aWindow);</code></td>
  </tr>
  <tr>
   <td><code>AString <a href="#getWindowValue()">getWindowValue</a>(in nsIDOMWindow aWindow, in AString aKey);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#init()">init</a>(in nsIDOMWindow aWindow);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#persistTabAttribute()">persistTabAttribute</a>(in AString aName);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#restoreLastSession()">restoreLastSession</a>();</code> </td>
  </tr>
  <tr>
   <td><code>void <a href="#setBrowserState()">setBrowserState</a>(in AString aState);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setTabState()">setTabState</a>(in nsIDOMNode aTab, in AString aState);</code> </td>
  </tr>
  <tr>
   <td><code>void <a href="#setTabValue()">setTabValue</a>(in nsIDOMNode aTab, in AString aKey, in AString aStringValue);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setWindowState()">setWindowState</a>(in nsIDOMWindow aWindow, in AString aState, in boolean aOverwrite);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setWindowValue()">setWindowValue</a>(in nsIDOMWindow aWindow, in AString aKey, in AString aStringValue);</code></td>
  </tr>
  <tr>
   <td><code>nsIDOMNode <a href="#undoCloseTab()">undoCloseTab</a>(in nsIDOMWindow aWindow, in unsigned long aIndex);</code></td>
  </tr>
  <tr>
   <td><code>nsIDOMWindow <a href="#undoCloseWindow()">undoCloseWindow</a>(in unsigned long aIndex);</code> </td>
  </tr>
 </tbody>
</table>

<h2 id="Attributes" name="Attributes">Attributes</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Attribute</td>
   <td class="header">Type</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>canRestoreLastSession</code></td>
   <td><code><a href="/en/boolean" title="en/boolean">boolean</a></code></td>
   <td>Is it possible to restore the previous session. Will always be <code>false</code> when in Private Browsing mode. </td>
  </tr>
 </tbody>
</table>

<h2 id="Methods" name="Methods">Methods</h2>

<h3 id="deleteTabValue()" name="deleteTabValue()">deleteTabValue()</h3>

<p>Deletes a value from a specified tab.</p>

<pre class="eval">void deleteTabValue(
  in nsIDOMNode aTab,
  in AString aKey
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aTab</code></dt>
 <dd>The <a href="#Note_on_tabs" title="Note on tabs">tab</a> for which to delete the value.</dd>
 <dt><code>aKey</code></dt>
 <dd>The key whose value is to be deleted.</dd>
</dl>

<h6 id="Exceptions_thrown_2"><span>Exceptions thrown</span></h6>

<p>This method throws a <em>NS_ERROR_ILLEGAL_VALUE </em>exception if the key doesn&apos;t exist.</p>

<h3 id="deleteWindowValue()" name="deleteWindowValue()">deleteWindowValue()</h3>

<p>Deletes a value from a specified window.</p>

<pre class="eval">void deleteWindowValue(
  in nsIDOMWindow aWindow,
  in AString aKey
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The window in which to delete the value.</dd>
 <dt><code>aKey</code></dt>
 <dd>The key whose value is to be deleted.</dd>
</dl>

<p></p><h3 id="duplicateTab()">duplicateTab()</h3><p></p>

<p>Duplicates a specified tab as thoroughly as possible.</p>

<pre class="eval">nsIDOMNode duplicateTab(
  in nsIDOMWindow aWindow,
  in nsIDOMNode aTab
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The window in which the duplicated tab will be created.</dd>
 <dt><code>aTab</code></dt>
 <dd>The <a href="#Note_on_tabs" title="Note on tabs">tab</a> to duplicate (can come from a different window).</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>An <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMNode" title>nsIDOMNode</a></code> representing the new tab, the content of which is a duplicate of <code>aTab</code>.</p>

<p></p><h3 id="forgetClosedTab()">forgetClosedTab()</h3><p></p>

<pre class="eval">nsIDOMNode forgetClosedTab(
  in nsIDOMWindow aWindow,
  in unsigned long aIndex
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>Is the browser window associated with the closed tab.</dd>
 <dt><code>aIndex</code></dt>
 <dd>Is the index of the closed tab to be removed (FIFO ordered).</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p> </p>

<p></p><h3 id="forgetClosedWindow()">forgetClosedWindow()</h3><p></p>

<pre class="eval">nsIDOMNode forgetClosedWindow(
  in unsigned long aIndex
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aIndex</code></dt>
 <dd>Is the index of the closed window to be removed (FIFO ordered).</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p> </p>

<h6 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h6>

<dl>
 <dt><code>NS_ERROR_INVALID_ARG</code></dt>
 <dd>When aIndex does not map to a closed window.</dd>
</dl>

<h3 id="getBrowserState()" name="getBrowserState()">getBrowserState()</h3>

<p>Returns the current state of all of windows and all of their tabs.</p>

<pre class="eval">AString getBrowserState();
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<p>None.</p>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>A <a href="/en/JSON" title="en/JSON">JSON</a> string representing the current state of all windows in the web browser.</p>

<h3 id="getClosedTabCount()" name="getClosedTabCount()">getClosedTabCount()</h3>

<p>Returns the number of restorable tabs for a given window.</p>

<pre class="eval">unsigned long getClosedTabCount(
  in nsIDOMWindow aWindow
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The window whose restorable tab count should be returned.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>The number of restorable tabs in the window.</p>

<h3 id="getClosedTabData()" name="getClosedTabData()">getClosedTabData()</h3>

<p>Returns a list of closed tabs for a specified window.</p>

<pre class="eval">AString getClosedTabData(
  in nsIDOMWindow aWindow
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The browser window whose closed tab list is to be retrieved.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>A <a href="/en/JSON" title="https://developer.mozilla.org/en/JSON">JSON</a> string representing the list of closed tabs for the window specified by <code>aWindow</code>. The list is in last in/first out (LIFO) order, so that the first item in the list is the last tab that was closed.</p>

<p></p><h3 id="getClosedWindowCount()">getClosedWindowCount()</h3><p></p>

<p>Returns the number of restorable windows.</p>

<pre class="eval">unsigned long getClosedWindowCount();
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<p>None.</p>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>The number of restorable windows.</p>

<p></p><h3 id="getClosedWindowData()">getClosedWindowData()</h3><p></p>

<p>Returns a list of closed windows.</p>

<pre class="eval">AString getClosedWindowData();
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<p>None.</p>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>A <a href="/en/JSON" title="https://developer.mozilla.org/en/JSON">JSON</a> string representing the list of closed windows. The list is in last in/first out (LIFO) order, so that the first item in the list is the last window that was closed.</p>

<p></p><h3 id="getTabState()">getTabState()</h3><p></p>

<p>Returns the state of the specified tab.</p>

<pre class="eval">AString getTabState(
  in nsIDOMNode aTab
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aTab</code></dt>
 <dd>The <a href="#Note_on_tabs" title="Note on tabs">tab</a> whose state is to be returned.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>A <a href="/en/JSON" title="https://developer.mozilla.org/en/JSON">JSON</a> string representing the state of the specified tab.</p>

<p></p><div class="note notecard"><strong>Note:</strong> The returned string does not include cookies. If you need to retrieve cookies as well, you should use <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISessionStore#getWindowState()">getWindowState()</a></code> instead.</div><p></p>

<h3 id="getTabValue()" name="getTabValue()">getTabValue()</h3>

<p>Returns the value corresponding to a key on a given window.</p>

<pre class="eval">AString getTabValue(
  in nsIDOMNode aTab,
  in AString aKey
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aTab</code></dt>
 <dd>The <a href="#Note_on_tabs" title="Note on tabs">tab</a> on which to get the value.</dd>
 <dt><code>aKey</code></dt>
 <dd>The key whose corresponding value is to be returned.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>The string value that was previously assigned to <code>aKey</code> using <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsISessionStore#setTabValue()">nsISessionStore.setTabValue()</a></code>, or an empty string if no value is set for that key.</p>

<p>If the previously saved value was originally a complex data (ie a JavaScript object) it can then be deserialized u<span id="the-code"><span class="c">sing <a href="/en/JSON" title="https://developer.mozilla.org/en/JSON"><code>JSON.parse</code></a> cf. </span></span><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsISessionStore#setTabValue()">nsISessionStore.setTabValue()</a></code><span id="the-code"><span class="c">.</span></span></p>

<h3 id="getWindowState()" name="getWindowState()">getWindowState()</h3>

<p>Returns the current state of one specified window in the web browser.</p>

<pre class="eval">AString getWindowState(
  in nsIDOMWindow aWindow
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The browser window whose state is to be returned. See <a href="#Note_on_windows">#Note on windows</a>.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>A <a href="/en/JSON" title="en/JSON">JSON</a> string representing a session state that contains only the window specified by <code>aWindow</code>.</p>

<p>If the preference browser.sessionstate.enabled is false when this method is called, then you will get an exception about &quot;aWindows[i] has no properties&quot;.</p>

<h3 id="getWindowValue()" name="getWindowValue()">getWindowValue()</h3>

<p>Returns the string value associated with a given key for a window.</p>

<pre class="eval">AString getWindowValue(
  in nsIDOMWindow aWindow,
  in AString aKey
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The window from which the value is to be retrieved.</dd>
 <dt><code>aKey</code></dt>
 <dd>The key whose corresponding value is to be retrieved.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>The string value that was previously assigned to <code>aKey</code> using <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsISessionStore#setWindowValue()">nsISessionStore.setWindowValue()</a></code>, or an empty string if no value is set for that key.</p>

<p>If the previously saved value was originally a complex data (ie a JavaScript object) it can then be deserialized u<span id="the-code"><span class="c">sing <a href="/en/JSON" title="https://developer.mozilla.org/en/JSON"><code>JSON.parse</code></a> cf. </span></span><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsISessionStore#setWindowValue()">nsISessionStore.setWindowValue()</a></code><span id="the-code"><span class="c">.</span></span></p>

<h3 id="init()" name="init()">init()</h3>

<p>Initializes the session store service.</p>

<p></p><div class="note notecard"><strong>Note:</strong> This function is intended for use only by the browser; extensions shouldn&apos;t call it.</div><p></p>

<pre class="eval">void init(
  in nsIDOMWindow aWindow
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The window for which to initialize the service.</dd>
</dl>

<h3 id="persistTabAttribute()" name="persistTabAttribute()">persistTabAttribute()</h3>

<p>Sets the name of a tab attribute to be saved and restored for all XUL tabs.</p>

<p></p><div class="note notecard"><strong>Note:</strong> At present, there&apos;s no way to pick and choose tabs to set persistent attributes for. This method affects all tabs indiscriminately.</div><p></p>

<pre class="eval">void persistTabAttribute(
  in AString aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aName</code></dt>
 <dd>The name of the attribute to be saved and restored for all tabs.</dd>
</dl>

<p></p><h3 id="restoreLastSession()">restoreLastSession()</h3><p></p>

<p>Restore the previous session if possible. This will not overwrite the current session. Instead the previous session will be merged into the current session. Current windows will be reused if they were windows that pinned tabs were previously restored into. New windows will be opened as needed.</p>

<p></p><div class="note notecard"><strong>Note:</strong> This will throw if there is no previous state to restore. Check with <code>canRestoreLastSession</code> first to avoid thrown errors.</div><p></p>

<pre class="eval">void restoreLastSession();
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<p>None.</p>

<h3 id="setBrowserState()" name="setBrowserState()">setBrowserState()</h3>

<p>Sets the current browsing state.</p>

<p></p><div class="note notecard"><strong>Note:</strong> Calling <code>setBrowserState</code> immediately replaces the current session, restoring the state of the entire application to the state passed in the <code>aState</code> parameter.</div><p></p>

<pre class="eval">void setBrowserState(
  in AString aState
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aState</code></dt>
 <dd>A <a href="/en/JSON" title="https://developer.mozilla.org/en/JSON">JSON</a> string representing the session state to use.</dd>
</dl>

<p></p><h3 id="setTabState()">setTabState()</h3><p></p>

<p>Sets the state of the specified tab.</p>

<pre class="eval">void setTabState(
  in nsIDOMNode aTab,
  in AString aState
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aTab</code></dt>
 <dd>The <a href="#Note_on_tabs" title="Note on tabs">tab</a> whose state is to be set.</dd>
 <dt><code>aState</code></dt>
 <dd>The JSON string representing the tab state to set on the tab, such as one returned by <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISessionStore#getTabState()">getTabState()</a></code>.</dd>
</dl>

<h3 id="setTabValue()" name="setTabValue()">setTabValue()</h3>

<p>Sets the value of a specified key on a tab.</p>

<pre class="eval">void setTabValue(
  in nsIDOMNode aTab,
  in AString aKey,
  in AString aStringValue
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aTab</code></dt>
 <dd>The <a href="#Note_on_tabs" title="Note on tabs">tab</a> for which the value is to be set.</dd>
 <dt><code>aKey</code></dt>
 <dd>The key whose value is to be set.</dd>
 <dt><code>aStringValue</code></dt>
 <dd>A string to set as the value for the key <code>aKey</code>.To assign more complex data (ie JavaScript objects) serialize them <span id="the-code"><span class="c">using <a href="/en/JSON" title="https://developer.mozilla.org/en/JSON">JSON.stringify</a>.</span></span></dd>
</dl>

<h3 id="setWindowState()" name="setWindowState()">setWindowState()</h3>

<p>Sets the state of a single window to a given stored state.</p>

<pre class="eval">void setWindowState(
  in nsIDOMWindow aWindow,
  in AString aState,
  in boolean aOverwrite
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindow" title>nsIDOMWindow</a></code> whose state is to be set to the state indicated by <code>aState</code>.</dd>
 <dt><code>aState</code></dt>
 <dd>The saved state to apply to the specified window.</dd>
 <dt><code>aOverwrite</code></dt>
 <dd>If this parameter is <code>true</code>, all existing tabs are removed and replaced with the tabs in the state <code>aState</code>. If it&apos;s <code>false</code>, the tabs in <code>aState</code> are added to the tabs already in the window.</dd>
</dl>

<h3 id="setWindowValue()" name="setWindowValue()">setWindowValue()</h3>

<p>Sets the value corresponding to a given key for a specified window.</p>

<pre class="eval">void setWindowValue(
  in nsIDOMWindow aWindow,
  in AString aKey,
  in AString aStringValue
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The browser window for which the value is to be set.</dd>
 <dt><code>aKey</code></dt>
 <dd>The key whose value is to be set.</dd>
 <dt><code>aStringValue</code></dt>
 <dd>A string to set as the value for the key <code>aKey</code>. To assign more complex data (ie JavaScript objects) serialize them <span id="the-code"><span class="c">using <a href="/en/JSON" title="https://developer.mozilla.org/en/JSON">JSON.stringify</a>.</span></span></dd>
</dl>

<h3 id="undoCloseTab()" name="undoCloseTab()">undoCloseTab()</h3>

<p>Reopens a closed tab in a specified window.</p>

<pre class="eval">nsIDOMNode undoCloseTab(
  in nsIDOMWindow aWindow,
  in unsigned long aIndex
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aWindow</code></dt>
 <dd>The browser window in which to reopen a closed tab.</dd>
 <dt><code>aIndex</code></dt>
 <dd>The index number of the closed tab to restore. This should be a value from 0 to one less than the value returned by <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISessionStore#getClosedTabCount()">getClosedTabCount()</a></code>. The list of closed tabs is stored in last in/first out (LIFO) order, so the tab at index 0 is the last one that was closed.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Prior to <span title="(Firefox 3.5 / Thunderbird 3.0 / SeaMonkey 2.0)">Gecko 1.9.1</span>, this method did not return anything. Starting with <span title="(Firefox 3.5 / Thunderbird 3.0 / SeaMonkey 2.0)">Gecko 1.9.1</span>, it returns a reference to the reopened tab as an <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMNode" title>nsIDOMNode</a></code> object.</p>

<p></p><h3 id="undoCloseWindow()">undoCloseWindow()</h3><p></p>

<p>Reopens a closed window.</p>

<pre class="eval">nsIDOMWindow undoCloseWindow(
  in unsigned long aIndex
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aIndex</code></dt>
 <dd>The index of the window to be restored. This should be a value from 0 to one less than that returned by <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISessionStore#getClosedWindowCount()">getClosedWindowCount()</a></code>. The list of closed windows is stored in last in/first out (LIFO) order, so the window at index 0 is the last one that was closed.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns a reference to the reopened window as an <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindow" title>nsIDOMWindow</a></code> object.</p>

<h2 id="Note_on_windows" name="Note_on_windows">Note on windows</h2>

<p>The <code>nsISessionStore</code> API stores state information for certain windows inside the web brower. These windows are <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindow" title>nsIDOMWindow</a></code> objects that contain the <code>tabbrowser</code> that users see as tabs; the document in these windows is <code>browser.xul</code>.</p>

<p>For many extensions, those that overlay <code>browser.xul</code>, the appropriate window object for <code>nsISessionStore</code> is the global object <code>&apos;window&apos;</code>.</p>

<p>For JavaScript running in windows other than the one you want to use in <code>nsISessionStore</code>, you need a <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindow" title>nsIDOMWindow</a></code> object containing <code>browser.xul</code>. This will be the outermost or root <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindow" title>nsIDOMWindow</a></code> in a <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindow" title>nsIXULWindow</a></code> (the window seen by users as a moveable frame on the display). This kind of DOMWindow object can be obtained from other <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindow" title>nsIDOMWindow</a></code> objects (like the sidebar window object) by applying the &apos;mainWindow&apos; statement from <a href="/en/Working_with_windows_in_chrome_code" title="en/Working_with_windows_in_chrome_code">Working_with_windows_in_chrome_code</a>. This outermost or root window can also be obtained from the list returned by <code>nsIWindowMediator</code>; see example #3 in <a href="/en/Working_with_windows_in_chrome_code" title="en/Working_with_windows_in_chrome_code">Working_with_windows_in_chrome_code</a>. It can also be obtained from an <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXULWindow" title>nsIXULWindow</a></code> using</p>

<pre class="eval">if (xul_win.docShell instanceof nsIInterfaceRequestor)  {
   var win = xul_win.docShell.getInterface(nsIDOMWindow);
   ...

</pre>

<h2 id="See_also" name="See_also">Note on tabs</h2>

<p>The <code>nsISessionStore</code> APIs referencing <code>nsIDOMNode aTab</code> require you to get hold of the tab node storing the data. If you you are working in a <code>browser.xul</code> overlay and want the currently selected tab, it&apos;s as simple as <code>gBrowser.selectedTab.</code> If you just hold a reference to some content document in the overlay&apos;s chrome window, here is how you find its corresponding tab:</p>

<pre class="eval">function tabFromDoc(doc) {
  var no = gBrowser.getBrowserIndexForDocument(doc);
  return gBrowser.tabContainer.childNodes[no];
}

// example use:
Cc[<a class="link-mailto" href="mailto:&apos;@mozilla.org" rel="freelink">&apos;@mozilla.org</a>/browser/sessionstore;1&apos;]
  .getService(Ci.nsISessionStore)
  .setTabValue(tabFromDoc(myContentDoc), &apos;myKey&apos;, &apos;myValue&apos;);
</pre>

<h2 id="See_also" name="See_also">See also</h2>

<ul>
 <li>The <a href="/en/Session_store_API" title="en/Session_store_API">Session store API</a> article.</li>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISessionStartup" title>nsISessionStartup</a></code></li>
 <li><a href="/en/JSON" title="https://developer.mozilla.org/en/JSON">JSON</a></li>
</ul>
