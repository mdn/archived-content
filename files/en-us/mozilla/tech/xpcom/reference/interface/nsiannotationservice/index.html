---
title: nsIAnnotationService
slug: Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService
tags:
  - Developing Mozilla
  - Extensions
  - Interface
  - Interfaces
  - 'Interfaces:Scriptable'
  - Places
  - XPCOM
  - XPCOM API Reference
  - XPCOM Interface Reference
  - nsIAnnotationService
---
<p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/toolkit/components/places/public/nsIAnnotationService.idl" rel="custom">toolkit/components/places/public/nsIAnnotationService.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

Stores arbitrary data about a web page. Supported for use from trusted code, such as extensions, but not from web content.
</span>

  <div style="height: 42px; position: relative; padding: 2px; width: auto;">

  <div style="top: 22px; font-size: 11px; position: absolute;">1.0</div>

  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">66</div>

  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 8.571428571428571%;"></div>

<div style="height: 8px; top: 16px; left: 8.571428571428571%; background: #00dd00; position: absolute; width: 91.42857142857143%;" title="Introduced in Gecko 1.9 (Firefox 3)"></div>

<div style="top: 0px; font-size: 11px; position: absolute; left: 8.571428571428571%;">Introduced</div>
<div style="top: 22px; font-size: 11px; position: absolute; left: 8.571428571428571%;">Gecko 1.9</div>

    <div style="height: 8px; top: 16px; left: 10.928571428571429%; background: #eeee00; position: absolute; width: 1%; border-radius: 4px; -webkit-border-radius: 4px;" title="Last changed in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)"></div>

</div>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title>nsISupports</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)</span></div>
</div><p></p>

<p>Implemented by: <code>&quot;@mozilla.org/browser/annotation-service;1&quot;</code>. To use this service, use:</p>

<pre>var annotationService = Components.classes[&quot;@mozilla.org/browser/annotation-service;1&quot;]
                        .getService(Components.interfaces.nsIAnnotationService);
</pre>

<div class="note notecard">
<p><strong>Note:</strong> The annotation service is not thread-safe. You should only use it from the main thread.</p>
</div>

<h2 id="Method_overview" name="Method_overview">Method overview</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td><code>void <a href="#setPageAnnotation()">setPageAnnotation</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName, in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIVariant">nsIVariant</a></code> aValue, in long aFlags, in unsigned short aExpiration);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setItemAnnotation()">setItemAnnotation</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName, in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIVariant">nsIVariant</a></code> aValue, in long aFlags, in unsigned short aExpiration);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setPageAnnotationString()">setPageAnnotationString</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName, in AString aValue, in long aFlags, in unsigned short aExpiration);</code></td>
  </tr>
  <tr>
   <td><code>boolean <a href="#setItemAnnotationString()">setItemAnnotationString</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName, in AString aValue, in long aFlags, in unsigned short aExpiration);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setPageAnnotationInt32()">setPageAnnotationInt32</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName, in long aValue, in long aFlags, in unsigned short aExpiration);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setItemAnnotationInt32()">setItemAnnotationInt32</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName, in long aValue, in long aFlags, in unsigned short aExpiration);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setPageAnnotationInt64()">setPageAnnotationInt64</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName, in long long aValue, in long aFlags, in unsigned short aExpiration);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setItemAnnotationInt64()">setItemAnnotationInt64</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName, in long long aValue, in long aFlags, in unsigned short aExpiration);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setPageAnnotationDouble()">setPageAnnotationDouble</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName, in double aValue, in long aFlags, in unsigned short aExpiration);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setItemAnnotationDouble()">setItemAnnotationDouble</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName, in double aValue, in long aFlags, in unsigned short aExpiration);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setPageAnnotationBinary()">setPageAnnotationBinary</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName,[const, array, size_is(aDataLen)] in octet aData, in unsigned long aDataLen, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aMimeType, in long aFlags, in unsigned short aExpiration);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setItemAnnotationBinary()">setItemAnnotationBinary</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName,[const, array, size_is(aDataLen)] in octet aData, in unsigned long aDataLen, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aMimeType, in long aFlags, in unsigned short aExpiration);</code></td>
  </tr>
  <tr>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIVariant">nsIVariant</a></code> <a href="#getPageAnnotation()">getPageAnnotation</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIVariant">nsIVariant</a></code> <a href="#getItemAnnotation()">getItemAnnotation</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>AString <a href="#getPageAnnotationString()">getPageAnnotationString</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>AString <a href="#getItemAnnotationString()">getItemAnnotationString</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>long <a href="#getPageAnnotationInt32()">getPageAnnotationInt32</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>long <a href="#getItemAnnotationInt32()">getItemAnnotationInt32</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>long long <a href="#getPageAnnotationInt64()">getPageAnnotationInt64</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>long long <a href="#getItemAnnotationInt64()">getItemAnnotationInt64</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>double <a href="#getPageAnnotationDouble()">getPageAnnotationDouble</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>double <a href="#getItemAnnotationDouble()">getItemAnnotationDouble</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#getPageAnnotationBinary()">getPageAnnotationBinary</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName,[array, size_is(aDataLen)] out octet aData, out unsigned long aDataLen, out <a href="/en-US/docs/AUTF8String">AUTF8String</a> aMimeType);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#getItemAnnotationBinary()">getItemAnnotationBinary</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName,[array, size_is(aDataLen)] out octet aData, out unsigned long aDataLen, out <a href="/en-US/docs/AUTF8String">AUTF8String</a> aMimeType);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#getPageAnnotationInfo()">getPageAnnotationInfo</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName, out PRInt32 aFlags, out unsigned short aExpiration, out <a href="/en-US/docs/AUTF8String">AUTF8String</a> aMimeType, out unsigned short aType);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#getItemAnnotationInfo()">getItemAnnotationInfo</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName, out long aFlags, out unsigned short aExpiration, out <a href="/en-US/docs/AUTF8String">AUTF8String</a> aMimeType, out unsigned short aType);</code></td>
  </tr>
  <tr>
   <td><code>PRUint16 <a href="#getPageAnnotationType()">getPageAnnotationType</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>PRUint16 <a href="#getItemAnnotationType()">getItemAnnotationType</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#getPagesWithAnnotation()">getPagesWithAnnotation</a>(in <a href="/en-US/docs/AUTF8String">AUTF8String</a> name, [optional] out unsigned long resultCount, [retval, array, size_is(resultCount)] out <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> results);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#getItemsWithAnnotation()">getItemsWithAnnotation</a>(in <a href="/en-US/docs/AUTF8String">AUTF8String</a> name, </code><code>[optional] </code><code>out unsigned long resultCount, [retval, array, size_is(resultCount)] out long long results);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#getPageAnnotationNames()">getPageAnnotationNames</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, </code><code>[optional] </code><code>out unsigned long count, [retval, array, size_is(count)] out <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIVariant">nsIVariant</a></code> result);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#getItemAnnotationNames()">getItemAnnotationNames</a>(in long long aItemId, </code><code>[optional] </code><code>out unsigned long count, [retval, array, size_is(count)] out <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIVariant">nsIVariant</a></code> result);</code></td>
  </tr>
  <tr>
   <td><code>boolean <a href="#pageHasAnnotation()">pageHasAnnotation</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>boolean <a href="#itemHasAnnotation()">itemHasAnnotation</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#removePageAnnotation()">removePageAnnotation</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#removeItemAnnotation()">removeItemAnnotation</a>(in long long aItemId, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#removePageAnnotations()">removePageAnnotations</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#removeItemAnnotations()">removeItemAnnotations</a>(in long long aItemId);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#copyPageAnnotations()">copyPageAnnotations</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aSourceURI, in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aDestURI, in boolean aOverwriteDest);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#copyItemAnnotations()">copyItemAnnotations</a>(in long long aSourceItemId, in long long aDestItemId, in boolean aOverwriteDest);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#addObserver()">addObserver</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationObserver">nsIAnnotationObserver</a></code> aObserver);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#removeObserver()">removeObserver</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationObserver">nsIAnnotationObserver</a></code> aObserver);</code></td>
  </tr>
  <tr>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> <a href="#getAnnotationURI()">getAnnotationURI</a>(in <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI">nsIURI</a></code> aURI, in <a href="/en-US/docs/AUTF8String">AUTF8String</a> aName);</code></td>
  </tr>
 </tbody>
</table>

<h2 id="Constants" name="Constants">Constants</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Constant</td>
   <td class="header">Value</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>EXPIRE_SESSION</code></td>
   <td>0</td>
   <td>For temporary data that can be discarded when the user exits. Removed at application exit.</td>
  </tr>
  <tr>
   <td><code>EXPIRE_WEEKS</code></td>
   <td>2</td>
   <td>For general page settings, things the user is interested in seeing if they come back to this page some time in the near future. Removed at 30 days.</td>
  </tr>
  <tr>
   <td><code>EXPIRE_MONTHS</code></td>
   <td>3</td>
   <td>Something that the user will be interested in seeing in their history like <code>favicons</code>. If they haven&apos;t visited a page in a couple of months, they probably aren&apos;t interested in many other annotations, the positions of things, or other stuff you create, so put that in the weeks policy. Removed at 180 days.</td>
  </tr>
  <tr>
   <td><code>EXPIRE_NEVER</code></td>
   <td>4</td>
   <td>For data that should never expire as long as the URI is in the database.</td>
  </tr>
  <tr>
   <td><code>EXPIRE_WITH_HISTORY</code></td>
   <td>5</td>
   <td>For annotations that only live as long as the URI is in history (For example, has &gt; 0 visits). This is only valid for page annotations.</td>
  </tr>
  <tr>
   <td><code>EXPIRE_DAYS</code></td>
   <td>6</td>
   <td>For short-lived temporary data that you still want to outlast a session. Removed at 7 days.</td>
  </tr>
  <tr>
   <td><code>TYPE_INT32</code></td>
   <td>1</td>
   <td><code>INT32</code> type constant.</td>
  </tr>
  <tr>
   <td><code>TYPE_DOUBLE</code></td>
   <td>2</td>
   <td><code>DOUBLE</code> type constant.</td>
  </tr>
  <tr>
   <td><code>TYPE_STRING</code></td>
   <td>3</td>
   <td><code>STRING</code> type constant.</td>
  </tr>
  <tr>
   <td><code>TYPE_BINARY</code></td>
   <td>4</td>
   <td><code>BINARY</code> type constant.</td>
  </tr>
  <tr>
   <td><code>TYPE_INT64</code></td>
   <td>5</td>
   <td><code>INT64</code> type constant.</td>
  </tr>
 </tbody>
</table>

<div class="note notecard"><strong>Note:</strong> Use of value &quot;1&quot; is omitted due to it&apos;s temporary use as <code>EXPIRE_NEVER</code> in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=319455" title="FIXED: Expire annotations">bug 319455</a>.</div>

<h2 id="Methods" name="Methods">Methods</h2>

<h3 id="setPageAnnotation()" name="setPageAnnotation()">setPageAnnotation()</h3>

<p>This method sets an annotation for given URI, overwriting any previous annotation with the same URL/name. IT IS YOUR JOB TO NAMESPACE YOUR ANNOTATION NAMES. Use the form <code>&quot;namespace/value&quot;</code>, so your name would be like <code>&quot;bills_extension/page_state&quot;</code> or <code>&quot;history/thumbnail&quot;</code>.</p>

<p>Do not use characters that are not valid in URLs such as spaces, <code>&quot;:&quot;</code>, commas, or most other symbols. You should stick to ASCII letters and numbers plus <code>&quot;_&quot;</code>, <code>&quot;-&quot;</code>, and <code>&quot;/&quot;</code>.</p>

<p>The annotation &quot;favicon&quot; is special. Favicons are stored in the favicon service, but are special cased in the protocol handler so they look like annotations. Do not set favicons using this service, it will not work.</p>

<p>Binary annotations should be set using <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setItemAnnotationBinary()">setItemAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setPageAnnotationBinary()">setPageAnnotationBinary()</a></code>. For other types, only C++ consumers may use the type-specific methods.</p>

<pre>void setPageAnnotation(
  in nsIURI aURI,
  in AUTF8String aName,
  in nsIVariant aValue,
  in long aFlags,
  in unsigned short aExpiration
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is to be set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aValue</code></dt>
 <dd>The annotation value.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>

<div class="warning notecard">
<p><strong>Note:</strong> <strong>ALL PAGE ANNOTATIONS WILL GET DELETED WHEN THE PAGE IS REMOVED FROM HISTORY IF THE PAGE IS NOT BOOKMARKED.</strong></p>

<p>This means that if you create an annotation on an unvisited URI, it will get deleted when the browser shuts down. Otherwise, URIs can exist in history as annotations but the user has no way of knowing it, potentially violating their privacy expectations about actions such as Clear history. If there is an important annotation that the user or extension wants to keep, you should add a bookmark for the page and use an EXPIRE_NEVER annotation. This will ensure the annotation exists until the item is removed by the user.</p>
</div>

<h3 id="setItemAnnotation()" name="setItemAnnotation()">setItemAnnotation()</h3>

<p>This method sets an annotation for given item, overwriting any previous annotation with the same URL/name. IT IS YOUR JOB TO NAMESPACE YOUR ANNOTATION NAMES. Use the form <code>&quot;namespace/value&quot;</code>, so your name would be like <code>&quot;bills_extension/page_state&quot;</code> or <code>&quot;history/thumbnail&quot;</code>.</p>

<p>Do not use characters that are not valid in URLs such as spaces, <code>&quot;:&quot;</code>, commas, or most other symbols. You should stick to ASCII letters and numbers plus <code>&quot;_&quot;</code>, <code>&quot;-&quot;</code>, and <code>&quot;/&quot;</code>.</p>

<p>The annotation &quot;favicon&quot; is special. Favicons are stored in the favicon service, but are special cased in the protocol handler so they look like annotations. Do not set favicons using this service, it will not work.</p>

<p>Binary annotations should be set using <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setItemAnnotationBinary()">setItemAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setPageAnnotationBinary()">setPageAnnotationBinary()</a></code>. For other types, only C++ consumers may use the type-specific methods.</p>

<pre>void setItemAnnotation(
  in long long aItemId,
  in AUTF8String aName,
  in nsIVariant aValue,
  in long aFlags,
  in unsigned short aExpiration
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemID</code></dt>
 <dd>The item on which the annotation is to be set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aValue</code></dt>
 <dd>The annotation value.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>

<div class="warning notecard">
<p><strong>Note:</strong> <strong>ALL ITEM ANNOTATIONS WILL GET DELETED WHEN THE BOOKMARK IS REMOVED.</strong></p>
</div>

<h3 id="setPageAnnotationString()" name="setPageAnnotationString()">setPageAnnotationString()</h3>

<p>This method sets an annotation for given URI by taking a <code>String</code> as input value, overwriting any previous annotation with the same URL/name. IT IS YOUR JOB TO NAMESPACE YOUR ANNOTATION NAMES. Use the form <code>&quot;namespace/value&quot;</code>, so your name would be like <code>&quot;bills_extension/page_state&quot;</code> or <code>&quot;history/thumbnail&quot;</code>.</p>

<p>Do not use characters that are not valid in URLs such as spaces, <code>&quot;:&quot;</code>, commas, or most other symbols. You should stick to ASCII letters and numbers plus <code>&quot;_&quot;</code>, <code>&quot;-&quot;</code>, and <code>&quot;/&quot;</code>.</p>

<p>The annotation &quot;favicon&quot; is special. Favicons are stored in the favicon service, but are special cased in the protocol handler so they look like annotations. Do not set favicons using this service, it will not work.</p>

<p>Binary annotations should be set using <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setItemAnnotationBinary()">setItemAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setPageAnnotationBinary()">setPageAnnotationBinary()</a></code>. For other types, only C++ consumers may use the type-specific methods.</p>

<pre>void setPageAnnotationString(
  in nsIURI aURI,
  in AUTF8String aName,
  in AString aValue,
  in long aFlags,
  in unsigned short aExpiration
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is to be set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aValue</code></dt>
 <dd>The annotation value.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>

<div class="warning notecard">
<p><strong>Note:</strong> <strong>ALL PAGE ANNOTATIONS WILL GET DELETED WHEN THE PAGE IS REMOVED FROM HISTORY IF THE PAGE IS NOT BOOKMARKED.</strong></p>

<p>This means that if you create an annotation on an unvisited URI, it will get deleted when the browser shuts down. Otherwise, URIs can exist in history as annotations but the user has no way of knowing it, potentially violating their privacy expectations about actions such as Clear history. If there is an important annotation that the user or extension wants to keep, you should add a bookmark for the page and use an EXPIRE_NEVER annotation. This will ensure the annotation exists until the item is removed by the user.</p>
</div>

<h3 id="setItemAnnotationString()" name="setItemAnnotationString()">setItemAnnotationString()</h3>

<p>This method sets an annotation for given item by taking a <code>String</code> as input value, overwriting any previous annotation with the same URL/name. IT IS YOUR JOB TO NAMESPACE YOUR ANNOTATION NAMES. Use the form <code>&quot;namespace/value&quot;</code>, so your name would be like <code>&quot;bills_extension/page_state&quot;</code> or <code>&quot;history/thumbnail&quot;</code>.</p>

<p>Do not use characters that are not valid in URLs such as spaces, <code>&quot;:&quot;</code>, commas, or most other symbols. You should stick to ASCII letters and numbers plus <code>&quot;_&quot;</code>, <code>&quot;-&quot;</code>, and <code>&quot;/&quot;</code>.</p>

<p>The annotation &quot;favicon&quot; is special. Favicons are stored in the favicon service, but are special cased in the protocol handler so they look like annotations. Do not set favicons using this service, it will not work.</p>

<p>Binary annotations should be set using <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setItemAnnotationBinary()">setItemAnnotationBinary()</a></code>. For other types, only C++ consumers may use the type-specific methods.</p>

<pre>void setPageAnnotation(
  in long long aItemId,
  in AUTF8String aName,
  in AString aValue,
  in long aFlags,
  in unsigned short aExpiration
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemID</code></dt>
 <dd>The item on which the annotation is to be set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aValue</code></dt>
 <dd>The annotation value.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>

<div class="warning notecard">
<p><strong>Note:</strong> <strong>ALL ITEM ANNOTATIONS WILL GET DELETED WHEN THE BOOKMARK IS REMOVED.</strong></p>
</div>

<h3 id="setPageAnnotationInt32()" name="setPageAnnotationInt32()">setPageAnnotationInt32()</h3>

<p>This method sets an annotation for given URI, just like <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setPageAnnotationString()">setPageAnnotationString()</a></code>, but takes an <code>Int32</code> as an input.</p>

<pre>void setPageAnnotationInt32(
  in nsIURI aURI,
  in AUTF8String aName,
  in long aValue,
  in long aFlags,
  in unsigned short aExpiration
);
</pre>

<h6 id="Parameters_5" name="Parameters_5">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is to be set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aValue</code></dt>
 <dd>The annotation value.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>

<h3 id="setItemAnnotationInt32()" name="setItemAnnotationInt32()">setItemAnnotationInt32()</h3>

<p>This method sets an annotation for given item, just like <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setItemAnnotationString()">setItemAnnotationString()</a></code>, but takes an <code>Int32</code> as an input.</p>

<pre>void setItemAnnotationInt32(
  in long long aItemId,
  in AUTF8String aName,
  in long aValue,
  in long aFlags,
  in unsigned short aExpiration
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is to be set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aValue</code></dt>
 <dd>The annotation value.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>

<h3 id="setPageAnnotationInt64()" name="setPageAnnotationInt64()">setPageAnnotationInt64()</h3>

<p>This method sets an annotation for given URI, just like <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setPageAnnotationString()">setPageAnnotationString()</a></code>, but takes an <code>Int64</code> as an input.</p>

<pre>void setPageAnnotationInt64(
  in nsIURI aURI,
  in AUTF8String aName,
  in long long aValue,
  in long aFlags,
  in unsigned short aExpiration
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is to be set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aValue</code></dt>
 <dd>The annotation value.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>

<h3 id="setItemAnnotationInt64()" name="setItemAnnotationInt64()">setItemAnnotationInt64()</h3>

<p>This method sets an annotation for given item, just like <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setItemAnnotationString()">setItemAnnotationString()</a></code>, but takes an <code>Int64</code> as an input.</p>

<pre>void setItemAnnotationInt64(
  in long long aItemId,
  in AUTF8String aName,
  in long long aValue,
  in long aFlags,
  in unsigned short aExpiration
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is to be set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aValue</code></dt>
 <dd>The annotation value.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>

<h3 id="setPageAnnotationDouble()" name="setPageAnnotationDouble()">setPageAnnotationDouble()</h3>

<p>This method sets an annotation for given URI, just like <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setPageAnnotationString()">setPageAnnotationString()</a></code>, but takes an <code>Double</code> as an input.</p>

<pre> void setPageAnnotationDouble(
   in nsIURI aURI,
   in AUTF8String aName,
   in double aValue,
   in long aFlags,
   in unsigned short aExpiration
 );
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is to be set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aValue</code></dt>
 <dd>The annotation value.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>

<h3 id="setItemAnnotationDouble()" name="setItemAnnotationDouble()">setItemAnnotationDouble()</h3>

<p>This method sets an annotation for given item, just like <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setItemAnnotationString()">setItemAnnotationString()</a></code>, but takes an <code>Double</code> as an input.</p>

<pre>void setItemAnnotationDouble(
  in long long aItemId,
  in AUTF8String aName,
  in double aValue,
  in long aFlags,
  in unsigned short aExpiration
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is to be set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aValue</code></dt>
 <dd>The annotation value.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>

<h3 id="setPageAnnotationBinary()" name="setPageAnnotationBinary()">setPageAnnotationBinary()</h3>

<p>This method sets an annotation for given URI, just like <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setPageAnnotationString()">setPageAnnotationString()</a></code>, but takes <code>Binary</code> data as an input. You MUST supply a valid <code>MIME</code> type.</p>

<pre>void setPageAnnotationBinary(
  in nsIURI aURI,
  in AUTF8String aName,
  [const,array,size_is(aDataLen)] in octet aData,
  in unsigned long aDataLen,
  in AUTF8String aMimeType,
  in long aFlags,
  in unsigned short aExpiration
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is to be set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aData</code></dt>
 <dd>Binary contents of the page to save.</dd>
 <dt><code>aDataLen</code></dt>
 <dd>Length of binary data.</dd>
 <dt><code>aMimeType</code></dt>
 <dd><code>MIME</code> type of the data to store. MUST be supplied.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>

<h3 id="setItemAnnotationBinary()" name="setItemAnnotationBinary()">setItemAnnotationBinary()</h3>

<p>This method sets an annotation for given item, just like <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setItemAnnotationString()">setItemAnnotationString()</a></code>, but takes <code>Binary</code> data as an input. You MUST supply a valid <code>MIME</code> type.</p>

<pre>void setItemAnnotationBinary(
  in long long aItemId,
  in AUTF8String aName,
  [const,array,size_is(aDataLen)] in octet aData,
  in unsigned long aDataLen,
  in AUTF8String aMimeType,
  in long aFlags,
  in unsigned short aExpiration
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is to be set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aData</code></dt>
 <dd>Binary contents of the item to save.</dd>
 <dt><code>aDataLen</code></dt>
 <dd>Length of binary data.</dd>
 <dt><code>aMimeType</code></dt>
 <dd><code>MIME</code> type of the data to store. MUST be supplied.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>

<h3 id="getPageAnnotation()" name="getPageAnnotation()">getPageAnnotation()</h3>

<p>This method retrieves the value of a given URI annotation. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>

<pre>nsIVariant getPageAnnotation(
  in nsIURI aURI,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns a page annotation.</p>

<h3 id="getItemAnnotation()" name="getItemAnnotation()">getItemAnnotation()</h3>

<p>This method retrieves the value of a given item annotation. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>

<pre>nsIVariant getItemAnnotation(
  in long long aItemId,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters_14" name="Parameters_14">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns an item annotation.</p>

<h3 id="getPageAnnotationString()" name="getPageAnnotationString()">getPageAnnotationString()</h3>

<p>This method retrieves the value of a given URI annotation in <code>String</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>

<pre>AString getPageAnnotationString(
  in nsIURI aURI,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns a <code>String</code> value page annotation.</p>

<h3 id="getItemAnnotationString()" name="getItemAnnotationString()">getItemAnnotationString()</h3>

<p>This method retrieves the value of a given item annotation in <code>String</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>

<pre>AString getItemAnnotationString(
  in long long aItemId,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns a <code>String</code> value item annotation.</p>

<h3 id="getPageAnnotationInt32()" name="getPageAnnotationInt32()">getPageAnnotationInt32()</h3>

<p>This method retrieves the value of a given URI annotation in a <code>Int32</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>

<pre>long getPageAnnotationInt32(
  in nsIURI aURI,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters_17" name="Parameters_17">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns an <code>Int32</code> value page annotation.</p>

<h3 id="getItemAnnotationInt32()" name="getItemAnnotationInt32()">getItemAnnotationInt32()</h3>

<p>This method retrieves the value of a given item annotation in a <code>Int32</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>

<pre>long getItemAnnotationInt32(
  in long long aItemId,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters_18" name="Parameters_18">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns an <code>Int32</code> value item annotation.</p>

<h3 id="getPageAnnotationInt64()" name="getPageAnnotationInt64()">getPageAnnotationInt64()</h3>

<p>This method retrieves the value of a given URI annotation in a <code>Int64</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>

<pre>long long getPageAnnotationInt64(
  in nsIURI aURI,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters_19" name="Parameters_19">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns an <code>Int64</code> value page annotation.</p>

<h3 id="getItemAnnotationInt64()" name="getItemAnnotationInt64()">getItemAnnotationInt64()</h3>

<p>This method retrieves the value of a given item annotation in a <code>Int64</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>

<pre>long long getItemAnnotationInt64(
  in long long aItemId,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns an <code>Int64</code> value item annotation.</p>

<h3 id="getPageAnnotationDouble()" name="getPageAnnotationDouble()">getPageAnnotationDouble()</h3>

<p>This method retrieves the value of a given URI annotation in <code>Double</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>

<pre>double getPageAnnotationDouble(
  in nsIURI aURI,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns a <code>Double</code> value page annotation.</p>

<h3 id="getItemAnnotationDouble()" name="getItemAnnotationDouble()">getItemAnnotationDouble()</h3>

<p>This method retrieves the value of a given item annotation in <code>Double</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>

<pre>double getItemAnnotationDouble(
  in long long aItemId,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns a <code>Double</code> value item annotation.</p>

<h3 id="getPageAnnotationBinary()" name="getPageAnnotationBinary()">getPageAnnotationBinary()</h3>

<p>This method retrieves the value of a given URI annotation in a <code>Binary</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type. This also returns the <code>MIME</code> type.</p>

<pre>void getPageAnnotationBinary(
  in nsIURI aURI,
  in AUTF8String aName,
  [array,size_is(aDataLen)] out octet aData,
  out unsigned long aDataLen,
  out AUTF8String aMimeType
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aData</code></dt>
 <dd>Binary contents of the page to retrieve.</dd>
 <dt><code>aDataLen</code></dt>
 <dd>Length of binary data.</dd>
 <dt><code>aMimeType</code></dt>
 <dd><code>MIME</code> type of the data to be retrieved.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns a <code>Binary</code> value and a <code>MIME</code> type page annotation.</p>

<h3 id="getItemAnnotationBinary()" name="getItemAnnotationBinary()">getItemAnnotationBinary()</h3>

<p>This method retrieves the value of a given item annotation in a <code>Binary</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type. This also returns the <code>MIME</code> type.</p>

<pre>void getItemAnnotationBinary(
  in long long aItemId,
  in AUTF8String aName,
  [array,size_is(aDataLen)] out octet aData,
  out unsigned long aDataLen,
  out AUTF8String aMimeType
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aData</code></dt>
 <dd>Binary contents of the item to retrieve.</dd>
 <dt><code>aDataLen</code></dt>
 <dd>Length of binary data.</dd>
 <dt><code>aMimeType</code></dt>
 <dd><code>MIME</code> type of the data to be retrieved.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns a <code>Binary</code> value and a <code>MIME</code> type item annotation.</p>

<h3 id="getPageAnnotationInfo()" name="getPageAnnotationInfo()">getPageAnnotationInfo()</h3>

<p>This method retrieves info about an existing annotation for the given URI.</p>

<pre>void getPageAnnotationInfo(
  in nsIURI aURI,
  in AUTF8String aName,
  out PRInt32 aFlags,
  out unsigned short aExpiration,
  out AUTF8String aMimeType,
  out unsigned short aType
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
 <dt><code>aMimeType</code></dt>
 <dd><code>MIME</code> type of the data to be retrieved. Default to <code>&quot;0&quot;</code> if value was not binary data.</dd>
 <dt><code>aType</code></dt>
 <dd>One of <code>TYPE_*</code> constansts defined above.</dd>
</dl>

<h3 id="getItemAnnotationInfo()" name="getItemAnnotationInfo()">getItemAnnotationInfo()</h3>

<p>This method retrieves info about an existing annotation for the given item.</p>

<pre>void getItemAnnotationInfo(
  in long long aItemId,
  in AUTF8String aName,
  out long aFlags,
  out unsigned short aExpiration,
  out AUTF8String aMimeType,
  out unsigned short aType
);
</pre>

<h6 id="Parameters_26" name="Parameters_26">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>aFlags</code></dt>
 <dd>Should be <code>&quot;0&quot;</code> for now, some flags will be defined in the future.</dd>
 <dt><code>aExpiration</code></dt>
 <dd>One of the <code>EXPIRE_*</code> constant value defined above.</dd>
 <dt><code>aMimeType</code></dt>
 <dd><code>MIME</code> type of the data to be retrieved. Default to <code>&quot;0&quot;</code> if value was not binary data.</dd>
 <dt><code>aType</code></dt>
 <dd>One of <code>TYPE_*</code> constansts defined above.</dd>
</dl>

<h3 id="getPageAnnotationType()" name="getPageAnnotationType()">getPageAnnotationType()</h3>

<p>This method retrieves the type of an existing annotation. Use <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getAnnotationInfo()">getAnnotationInfo()</a></code> method, if you need this along with the mime-type etc. It throwns an exception if the annotation is not set.</p>

<pre>PRUint16 getPageAnnotationType(
  in nsIURI aURI,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns one of the <code>TYPE_*</code> constants defined above.</p>

<h3 id="getItemAnnotationType()" name="getItemAnnotationType()">getItemAnnotationType()</h3>

<p>This method retrieves the type of an existing annotation. Use <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#getAnnotationInfo()">getAnnotationInfo()</a></code> method, if you need this along with the mime-type etc. It throwns an exception if the annotation is not set.</p>

<pre>PRUint16 getPageAnnotationType(
  in long long aItemId,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The item on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns one of the <code>TYPE_*</code> constants defined above.</p>

<h3 id="getPagesWithAnnotation()" name="getPagesWithAnnotation()">getPagesWithAnnotation()</h3>

<p>This method returns a list of all URIs having a given annotation.</p>

<pre>void getPagesWithAnnotation(
  in AUTF8String name,
  [optional] out unsigned long resultCount,
  [retval, array, size_is(resultCount)] out nsIURI results
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>name</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>resultCount</code> <span class="optional optionalInline notecard inline">Optional</span></dt>
 <dd>Count of URIs.</dd>
 <dt><code>results</code></dt>
 <dd>Returns the list of all URIs.</dd>
</dl>

<h3 id="getItemsWithAnnotation()" name="getItemsWithAnnotation()">getItemsWithAnnotation()</h3>

<p>This method returns a list of all items having a given annotation.</p>

<pre>void getItemsWithAnnotation(
  in AUTF8String name,
  [optional] out unsigned long resultCount,
  [retval, array, size_is(resultCount)] out long long results
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>name</code></dt>
 <dd>The annotation name.</dd>
 <dt><code>resultCount</code> <span class="optional optionalInline notecard inline">Optional</span></dt>
 <dd>Count of items.</dd>
 <dt><code>results</code></dt>
 <dd>Returns the list of all items.</dd>
</dl>

<h3 id="getPageAnnotationNames()" name="getPageAnnotationNames()">getPageAnnotationNames()</h3>

<p>This method retrieves the names of all annotations for the given URI.</p>

<pre>void getPageAnnotationNames(
  in nsIURI aURI,
  [optional] out unsigned long count,
  [retval, array, size_is(count)] out nsIVariant result
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is set.</dd>
 <dt><code>count</code> <span class="optional optionalInline notecard inline">Optional</span></dt>
 <dd>Count of annotation names available.</dd>
 <dt><code>result</code></dt>
 <dd>Returns the name of all annotations.</dd>
</dl>

<h3 id="getItemAnnotationNames()" name="getItemAnnotationNames()">getItemAnnotationNames()</h3>

<p>This method retrieves the names of all annotations for the given item.</p>

<pre>void getItemAnnotationNames(
  in long long aItemId,
  [optional] out unsigned long count,
  [retval, array, size_is(count)] out nsIVariant result
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is set.</dd>
 <dt><code>count</code> <span class="optional optionalInline notecard inline">Optional</span></dt>
 <dd>Count of annotations name available.</dd>
 <dt><code>result</code></dt>
 <dd>Returns the name of all annotations.</dd>
</dl>

<h3 id="pageHasAnnotation()" name="pageHasAnnotation()">pageHasAnnotation()</h3>

<p>This method tests for annotation existance for given URI.</p>

<pre>boolean pageHasAnnotation(
  in nsIURI aURI,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns <code>true</code>, if an annotation exists for given URI, otherwise returns <code>false</code>.</p>

<h3 id="itemHasAnnotation()" name="itemHasAnnotation()">itemHasAnnotation()</h3>

<p>This method tests for annotation existance for given item.</p>

<pre>boolean itemHasAnnotation(
  in long long aItemId,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns <code>true</code>, if an annotation exists for given item, otherwise returns <code>false</code>.</p>

<h3 id="removePageAnnotation()" name="removePageAnnotation()">removePageAnnotation()</h3>

<p>This method removes a specific annotation for given URI. Succeeds even if the annotation is not found.</p>

<pre>void removePageAnnotation(
  in nsIURI aURI,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h3 id="removeItemAnnotation()" name="removeItemAnnotation()">removeItemAnnotation()</h3>

<p>This method removes a specific annotation for given item. Succeeds even if the annotation is not found.</p>

<pre>void removeItemAnnotation(
  in long long aItemId,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h3 id="removePageAnnotations()" name="removePageAnnotations()">removePageAnnotations()</h3>

<p>This method removes all annotations for the given URI. We may want some other similar functions to get annotations with given flags (once we have flags defined).</p>

<pre>void removePageAnnotations(
  in nsIURI aURI
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is set.</dd>
</dl>

<h3 id="removeItemAnnotations()" name="removeItemAnnotations()">removeItemAnnotations()</h3>

<p>This method removes all annotations for the given item. We may want some other similar functions to get annotations with given flags (once we have flags defined).</p>

<pre>void removeItemAnnotations(
  in long long aItemId
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aItemId</code></dt>
 <dd>The item on which the annotation is set.</dd>
</dl>

<h3 id="copyPageAnnotations()" name="copyPageAnnotations()">copyPageAnnotations()</h3>

<p>This method copies all annotations from the source to the destination URI. If the destination already has an annotation with the same name as one on the source, it will be overwritten if <code>aOverwriteDest</code> is set. Otherwise, the destination URIs will be preferred.</p>

<p>All the source annotations will stay as-is. If you don&apos;t want them any more, use <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#removePageAnnotations()">removePageAnnotations()</a></code> on that URI.</p>

<pre>void copyPageAnnotations(
  in nsIURI aSourceURI,
  in nsIURI aDestURI,
  in boolean aOverwriteDest
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aSourceItemId</code></dt>
 <dd>Source item.</dd>
 <dt><code>aDestItemId</code></dt>
 <dd>Destination item.</dd>
 <dt><code>aOverwriteDest</code></dt>
 <dd>If you want to overwrite existing annotation, set this parameter to <code>true</code>, or else set it to <code>false</code>.</dd>
</dl>

<h3 id="copyItemAnnotations()" name="copyItemAnnotations()">copyItemAnnotations()</h3>

<p>This method copies all annotations from the source to the destination item. If the destination already has an annotation with the same name as one on the source, it will be overwritten if <code>aOverwriteDest</code> is set. Otherwise, the destination URIs will be preferred.</p>

<p>All the source annotations will stay as-is. If you don&apos;t want them any more, use <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#removePageAnnotations()">removePageAnnotations()</a></code> on that URI.</p>

<pre>void copyItemAnnotations(
  in long long aSourceItemId,
  in long long aDestItemId,
  in boolean aOverwriteDest
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aSourceItemId</code></dt>
 <dd>Source item.</dd>
 <dt><code>aDestItemId</code></dt>
 <dd>Destination item.</dd>
 <dt><code>aOverwriteDest</code></dt>
 <dd>If you want to overwrite existing annotation, set this parameter to <code>true</code> or else <code>false</code>.</dd>
</dl>

<h3 id="addObserver()" name="addObserver()">addObserver()</h3>

<p>This method adds an annotation observer. The annotation service will keep an owning reference to the observer object.</p>

<pre>void addObserver(
  in nsIAnnotationObserver aObserver
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aObserver</code></dt>
 <dd>Annotation observer.</dd>
</dl>

<h3 id="removeObserver()" name="removeObserver()">removeObserver()</h3>

<p>This method removes an annotaton observer previously registered by <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#addObserver()">addObserver()</a></code> method.</p>

<pre>void removeObserver(
  in nsIAnnotationObserver aObserver
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aObserver</code></dt>
 <dd>Annotation observer.</dd>
</dl>

<h3 id="getAnnotationURI()" name="getAnnotationURI()">getAnnotationURI()</h3>

<p>This method returns a URI that can be used to access the given binary annotation. This method does NOT check that the annotation exists. Also, note that you can only load URIs for annotations that have have a valid <code>MIME</code> type set by <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setPageAnnotationBinary()">setPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService#setItemAnnotationBinary()">setItemAnnotationBinary()</a></code> methods. No non-URI valid chars in name, especially colon, which will mess up parsing.</p>

<pre>nsIURI getAnnotationURI(
  in nsIURI aURI,
  in AUTF8String aName
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aURI</code></dt>
 <dd>The URI on which the annotation is set.</dd>
 <dt><code>aName</code></dt>
 <dd>The annotation name.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns a URI that can be used to access the given binary annotation.</p>

<h3 id="See_also" name="See_also">See also</h3>

<ul>
 <li><a href="/en-US/docs/Places">Places</a></li>
 <li><a href="/en-US/docs/Using_the_Places_annotation_service">Using the Places annotation service</a></li>
 <li><a href="/en-US/docs/Using_the_Places_favicon_service">Using the Places favicon service</a></li>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationObserver">nsIAnnotationObserver</a></code></li>
</ul>
