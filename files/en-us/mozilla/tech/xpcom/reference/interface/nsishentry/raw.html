<p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/docshell/shistory/public/nsISHEntry.idl" rel="custom">docshell/shistory/public/nsISHEntry.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

Each <code>document</code> or subframe in Session History will have a <code>nsISHEntry</code> associated with it which will hold all information required to recreate the <code>document</code> from history.
</span>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIHistoryEntry" title="">nsIHistoryEntry</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 6.0 (Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3)</span></div>
</div><p></p>
<p>Implemented by: <code>@mozilla.org/browser/session-history-entry;1</code>. To create an instance, use:</p>
<pre class="eval">var shentry = Components.classes["@mozilla.org/browser/session-history-entry;1"]
                        .createInstance(Components.interfaces.nsISHEntry);
</pre>
<h2 id="Method_overview" name="Method_overview">Method overview</h2>
<table class="standard-table"> <tbody> <tr> <td><code>void <a href="#addChildShell()">addChildShell</a>(in nsIDocShellTreeItem shell);</code> </td> </tr> <tr> <td><code>nsIDocShellTreeItem <a href="#childShellAt()">childShellAt</a>(in long index);</code> </td> </tr> <tr> <td><code>void <a href="#clearChildShells()">clearChildShells</a>();</code> </td> </tr> <tr> <td><code>nsISHEntry <a href="#clone()">clone</a>();</code></td> </tr> <tr> <td><code>void <a href="#create()">create</a>(in nsIURI URI, in AString title, in nsIInputStream inputStream, in nsILayoutHistoryState layoutHistoryState, in nsISupports cacheKey, in ACString contentType, in nsISupports owner, in unsigned long long docshellID, in boolean dynamicCreation);</code> <span class="inlineIndicator noscript noscriptInline" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span></td> </tr> <tr> <td><code>nsDocShellEditorDataPtr <a href="#forgetEditorData()">forgetEditorData</a>();</code> <span class="inlineIndicator notXPCOM notXPCOMInline" title="Only use this method if you REALLY know what you are doing!">Violates the XPCOM interface guidelines</span> </td> </tr> <tr> <td><code>nsIContentViewer <a href="#getAnyContentViewer()">getAnyContentViewer</a>(out nsISHEntry ownerEntry);</code> </td> </tr> <tr> <td><code>void <a href="#getScrollPosition()">getScrollPosition</a>(out long x, out long y);</code></td> </tr> <tr> <td><code>void <a href="#getViewerBounds()">getViewerBounds</a>(in nsIntRect bounds);</code> <span class="inlineIndicator noscript noscriptInline" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span> </td> </tr> <tr> <td><code>boolean <a href="#hasDetachedEditor()">hasDetachedEditor</a>();</code> <span class="inlineIndicator notXPCOM notXPCOMInline" title="Only use this method if you REALLY know what you are doing!">Violates the XPCOM interface guidelines</span> </td> </tr> <tr> <td><code>boolean <a href="#hasDynamicallyAddedChild()">hasDynamicallyAddedChild</a>();</code> </td> </tr> <tr> <td><code>boolean <a href="#isDynamicallyAdded()">isDynamicallyAdded</a>();</code> </td> </tr> <tr> <td><code>void <a href="#setEditorData()">setEditorData</a>(in nsDocShellEditorDataPtr aData);</code> <span class="inlineIndicator notXPCOM notXPCOMInline" title="Only use this method if you REALLY know what you are doing!">Violates the XPCOM interface guidelines</span> </td> </tr> <tr> <td><code>void <a href="#setIsSubFrame()">setIsSubFrame</a>(in boolean aFlag);</code></td> </tr> <tr> <td><code>void <a href="#setScrollPosition()">setScrollPosition</a>(in long x, in long y);</code></td> </tr> <tr> <td><code>void <a href="#setTitle()">setTitle</a>(in AString aTitle);</code></td> </tr> <tr> <td><code>void <a href="#setUniqueDocIdentifier()">setUniqueDocIdentifier</a>();</code> </td> </tr> <tr> <td><code>void <a href="#setURI()">setURI</a>(in nsIURI aURI);</code></td> </tr> <tr> <td><code>void <a href="#setViewerBounds()">setViewerBounds</a>(in nsIntRect bounds);</code> <span class="inlineIndicator noscript noscriptInline" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span> </td> </tr> <tr> <td><code>void <a href="#syncPresentationState()">syncPresentationState</a>();</code> </td> </tr> </tbody>
</table>
<h2 id="Attributes" name="Attributes">Attributes</h2>
<table class="standard-table"> <tbody> <tr> <td class="header">Attribute</td> <td class="header">Type</td> <td class="header">Description</td> </tr> <tr> <td><code>cacheKey</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code></td> <td>Set and get the cache key for the entry.</td> </tr> <tr> <td><code>contentType</code></td> <td><code><a href="/en/ACString" title="en/ACString">ACString</a></code></td> <td>Indicates the content-type of the <code>document</code> that this is a session history entry for.</td> </tr> <tr> <td><code>contentViewer</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIContentViewer" title="">nsIContentViewer</a></code></td> <td>Content viewer, for fast restoration of presentation. </td> </tr> <tr> <td><code>docIdentifier</code></td> <td><code><a href="/en/unsigned_long_long" title="en/unsigned long long">unsigned long long</a></code></td> <td>An integer that should be the same for two entries attached to the same docshell if and only if the two entries are entries for the same <code>document</code>. In practice, two entries A and B will have the same <code>docIdentifier</code> if we arrived at B by clicking an anchor link in A or if B was created by A's calling history.pushState(). </td> </tr> <tr> <td><code>docshellID</code></td> <td><code><a href="/en/unsigned_long_long" title="en/unsigned long long">unsigned long long</a></code></td> <td>The history <code>ID</code> of the docshell. </td> </tr> <tr> <td><code>document</code></td> <td><a href="/en-US/docs/Web/API/Document" title="The Document interface represents any web page loaded in the browser and serves as an entry point into the web page's content, which is the DOM tree."><code>nsIDOMDocument</code></a></td> <td>DOM <code>Document</code>. <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 1.5 / Thunderbird 1.5 / SeaMonkey 1.0)">Obsolete since Gecko 1.8</span></td> </tr> <tr> <td><code>expirationStatus</code></td> <td><code><a href="/en/boolean" title="en/boolean">boolean</a></code></td> <td>Indicates whether the page is already expired in cache.</td> </tr> <tr> <td><code>ID</code></td> <td><code><a href="/en/unsigned_long" title="en/unsigned long">unsigned long</a></code></td> <td>An <code>ID</code> to help identify this entry from others during subframe navigation.</td> </tr> <tr> <td><code>layoutHistoryState</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsILayoutHistoryState" title="">nsILayoutHistoryState</a></code></td> <td><code>LayoutHistoryState</code> for scroll position and form values.</td> </tr> <tr> <td><code>loadType</code></td> <td><code><a href="/en/unsigned_long" title="en/unsigned long">unsigned long</a></code></td> <td>The <code>loadType</code> for this entry. This is typically loadHistory except when reload is pressed, it has the appropriate reload flag.</td> </tr> <tr> <td><code>owner</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code></td> <td>Get the owner, if any, that was associated with the channel that the <code>document</code> that was loaded to create this history entry came from. </td> </tr> <tr> <td><code>pageIdentifier</code></td> <td><code><a href="/en/unsigned_long" title="en/unsigned long">unsigned long</a></code></td> <td>An integer that should be the same for two entries attached to the same docshell only if the two entries are entries for the same page in the sense that one could go from the state represented by one to the state represented by the other simply by scrolling (so the entries are separated by an anchor traversal or a subframe navigation in some other frame).  <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3)">Obsolete since Gecko 6.0</span></td> </tr> <tr> <td><code>parent</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISHEntry" title="">nsISHEntry</a></code></td> <td>Parent of this entry.</td> </tr> <tr> <td><code>postData</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIInputStream" title="">nsIInputStream</a></code></td> <td>Post Data for the <code>document</code>.</td> </tr> <tr> <td><code>referrerURI</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI" title="">nsIURI</a></code></td> <td>Referrer URI.</td> </tr> <tr> <td><code>refreshURIList</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupportsArray" title="">nsISupportsArray</a></code></td> <td>Saved refresh URI list for the content viewer. </td> </tr> <tr> <td><code>saveLayoutStateFlag</code></td> <td><code><a href="/en/boolean" title="en/boolean">boolean</a></code></td> <td>Indicate whether <code>layoutHistoryState</code> should be saved.</td> </tr> <tr> <td><code>stateData</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIStructuredCloneContainer" title="">nsIStructuredCloneContainer</a></code></td> <td>Get/set data associated with this history state via a pushState() call, serialized using structured clone. (Prior to <span title="(Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3)">Gecko 6.0</span> returned a JSON encoded string.) </td> </tr> <tr> <td><code>sticky</code></td> <td><code><a href="/en/boolean" title="en/boolean">boolean</a></code></td> <td>Whether the content viewer is marked "<code>sticky</code>" </td> </tr> <tr> <td><code>windowState</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code></td> <td>Saved state of the global window object. </td> </tr> </tbody>
</table>
<h2 id="Methods" name="Methods">Methods</h2>
<p></p><h3 id="addChildShell()">addChildShell()</h3><p></p>
<p>Saved child docshells corresponding to <code>contentViewer</code>. The child shells are restored as children of the <code>parent</code> docshell, in this order, when the <code>parent</code> docshell restores a saved presentation.</p>
<p>Append a child shell to the end of our list.</p>
<pre class="eval">void addChildShell(
  in nsIDocShellTreeItem shell
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>shell</code></dt> <dd>
</dd></dl>
<p></p><h3 id="childShellAt()">childShellAt()</h3><p></p>
<pre class="eval">nsIDocShellTreeItem childShellAt(
  in long index
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>index</code></dt> <dd>The child shell at <code>index</code>; <code>null</code> if <code>index</code> is out of bounds.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p> </p>
<p></p><h3 id="clearChildShells()">clearChildShells()</h3><p></p>
<p>Clear the child shell list.</p>
<pre class="eval">void clearChildShells();
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<p>None.</p>
<h3 id="clone()" name="clone()">clone()</h3>
<pre class="eval">nsISHEntry clone();
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<p>None.</p>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p> </p>
<p></p><div><span class="indicatorInHeadline noscript noscriptMethod" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span><h3 id="create">create</h3></div><p></p>
<p>Additional ways to <code>create</code> an entry.</p>
<pre class="eval">void create(
  in nsIURI URI,
  in AString title,
  in nsIInputStream inputStream,
  in nsILayoutHistoryState layoutHistoryState,
  in nsISupports cacheKey,
  in ACString contentType,
  in nsISupports owner,
  in unsigned long long docshellID,
  in boolean dynamicCreation
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>URI</code></dt> <dd> </dd><dt><code>title</code></dt> <dd> </dd><dt><code>inputStream</code></dt> <dd> </dd><dt><code>layoutHistoryState</code></dt> <dd> </dd><dt><code>cacheKey</code></dt> <dd> </dd><dt><code>contentType</code></dt> <dd> </dd><dt><code>owner</code> </dt> <dd> </dd><dt><code>docshellID</code> </dt> <dd> </dd><dt><code>dynamicCreation</code> </dt> <dd>
</dd></dl>
<p></p><div>
  <span class="indicatorInHeadline notXPCOM notXPCOMMethod" title="Only use this method if you REALLY know what you are doing!">Violates the XPCOM interface guidelines</span>
  <h3 id="forgetEditorData()">forgetEditorData()</h3>
</div><p></p>
<p></p>
<p>Gets the owning pointer to the editor data assosicated with this shistory entry. This forgets its pointer, so free it when you're done.</p>
<pre class="eval">nsDocShellEditorDataPtr forgetEditorData();
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<p>None.</p>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p> </p>
<p></p><h3 id="getAnyContentViewer()">getAnyContentViewer()</h3><p></p>
<p>Return any content viewer present in or below this node in the nsSHEntry tree. This will differ from <code>contentViewer</code> in the case where a child nsSHEntry has the content viewer for this tree.</p>
<pre class="eval">nsIContentViewer getAnyContentViewer(
  out nsISHEntry ownerEntry
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>ownerEntry</code></dt> <dd>
</dd></dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p> </p>
<h3 id="getScrollPosition()" name="getScrollPosition()">getScrollPosition()</h3>
<pre class="eval">void getScrollPosition(
  out long x,
  out long y
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>x</code></dt> <dd> </dd><dt><code>y</code></dt> <dd>
</dd></dl>
<p></p><div><span class="indicatorInHeadline noscript noscriptMethod" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span><h3 id="getViewerBounds">getViewerBounds</h3></div><p></p>
<p></p>
<p>Saved position and dimensions of the content viewer; we must adjust the root view's widget accordingly if this has changed when the presentation is restored.</p>
<pre class="eval">void getViewerBounds(
  in nsIntRect bounds
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>bounds</code></dt> <dd>
</dd></dl>
<p></p><div>
  <span class="indicatorInHeadline notXPCOM notXPCOMMethod" title="Only use this method if you REALLY know what you are doing!">Violates the XPCOM interface guidelines</span>
  <h3 id="hasDetachedEditor()">hasDetachedEditor()</h3>
</div><p></p>
<p></p>
<pre class="eval">boolean hasDetachedEditor();
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<p>None.</p>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p><code>true</code> if this shistory entry is storing a detached editor.</p>
<p></p><h3 id="hasDynamicallyAddedChild()">hasDynamicallyAddedChild()</h3><p></p>
<pre class="eval">boolean hasDynamicallyAddedChild();
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<p>None.</p>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p><code>true</code> if any of the child entries returns <code>true</code> when <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISHEntry#isDynamicallyAdded()">isDynamicallyAdded()</a></code> is called on it.</p>
<p></p><h3 id="isDynamicallyAdded()">isDynamicallyAdded()</h3><p></p>
<p>Returns <code>true</code> if the related docshell was added because of dynamic addition of an iframe/frame.</p>
<pre class="eval">boolean isDynamicallyAdded();
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<p>None.</p>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p> </p>
<p></p><div>
  <span class="indicatorInHeadline notXPCOM notXPCOMMethod" title="Only use this method if you REALLY know what you are doing!">Violates the XPCOM interface guidelines</span>
  <h3 id="setEditorData()">setEditorData()</h3>
</div><p></p>
<p></p>
<p>Sets the owning pointer to the editor data assosicated with this shistory entry. Unless <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISHEntry#forgetEditorData()">forgetEditorData()</a></code> is called, this shentry will destroy the editor data when it is destroyed.</p>
<pre class="eval">void setEditorData(
  in nsDocShellEditorDataPtr aData
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>aData</code></dt> <dd>
</dd></dl>
<h3 id="setIsSubFrame()" name="setIsSubFrame()">setIsSubFrame()</h3>
<p>Attribute that indicates if this entry is for a subframe navigation.</p>
<pre class="eval">void setIsSubFrame(
  in boolean aFlag
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>aFlag</code></dt> <dd>
</dd></dl>
<h3 id="setScrollPosition()" name="setScrollPosition()">setScrollPosition()</h3>
<p>Set/Get scrollers' positon in anchored pages.</p>
<pre class="eval">void setScrollPosition(
  in long x,
  in long y
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>x</code></dt> <dd> </dd><dt><code>y</code></dt> <dd>
</dd></dl>
<h3 id="setTitle()" name="setTitle()">setTitle()</h3>
<p>Title for the <code>document</code>.</p>
<pre class="eval">void setTitle(
  in AString aTitle
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>aTitle</code></dt> <dd>
</dd></dl>
<p></p><h3 id="setUniqueDocIdentifier()">setUniqueDocIdentifier()</h3><p></p>
<p>Changes this entry's doc identifier to a new value which is unique among those of all other entries.</p>
<pre class="eval">void setUniqueDocIdentifier();
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<p>None.</p>
<h3 id="setURI()" name="setURI()">setURI()</h3>
<p>URI for the <code>document</code>.</p>
<pre class="eval">void setURI(
  in nsIURI aURI
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>aURI</code></dt> <dd>
</dd></dl>
<p></p><div><span class="indicatorInHeadline noscript noscriptMethod" title="This method may only be called from C++; don't use it from JavaScript.">Native code only!</span><h3 id="setViewerBounds">setViewerBounds</h3></div><p></p>
<p></p>
<pre class="eval">void setViewerBounds(
  in nsIntRect bounds
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>bounds</code></dt> <dd>
</dd></dl>
<p></p><h3 id="syncPresentationState()">syncPresentationState()</h3><p></p>
<p>Ensure that the cached presentation members are self-consistent. If either <code>contentViewer</code> or <code>windowState</code> are <code>null</code>, then all of the following members are cleared/reset: <code>contentViewer</code>, <code>sticky</code>, <code>windowState</code>, viewerBounds, childShells, <code>refreshURIList</code>.</p>
<pre class="eval">void syncPresentationState();
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<p>None.</p>
<h2 id="Example" name="Example">Example</h2>
<p>see <a href="https://dxr.mozilla.org/mozilla-central/source/browser/components/sessionstore/src/nsSessionStore.js#2158" rel="custom">nsSessionStore.js</a> for a real example.</p>