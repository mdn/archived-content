---
title: nsINavHistoryResultObserver
slug: Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultObserver
tags:
  - Interfaces
  - 'Interfaces:Scriptable'
  - Places
  - XPCOM Interface Reference
---
<p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/toolkit/components/places/nsINavHistoryService.idl" rel="custom">toolkit/components/places/nsINavHistoryService.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

Lets clients observe changes to a result as the result updates itself according to bookmark and history system events.
</span>

  <div style="height: 42px; position: relative; padding: 2px; width: auto;">

  <div style="top: 22px; font-size: 11px; position: absolute;">1.0</div>

  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">66</div>

  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 11.428571428571429%;"></div>

<div style="height: 8px; top: 16px; left: 11.428571428571429%; background: #00dd00; position: absolute; width: 88.57142857142857%;" title="Introduced in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)"></div>

<div style="top: 0px; font-size: 11px; position: absolute; left: 11.428571428571429%;">Introduced</div>
<div style="top: 22px; font-size: 11px; position: absolute; left: 11.428571428571429%;">Gecko 2.0</div>

    <div style="height: 8px; top: 16px; left: 20.928571428571427%; background: #eeee00; position: absolute; width: 1%; border-radius: 4px; -webkit-border-radius: 4px;" title="Last changed in Gecko 11.0 (Firefox 11.0 / Thunderbird 11.0 / SeaMonkey 2.8)"></div>

</div>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title>nsISupports</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 11.0 (Firefox 11.0 / Thunderbird 11.0 / SeaMonkey 2.8)</span></div>
</div><p></p>
<div class="note notecard"><strong>Note:</strong> In Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1), this interface replaced the older <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultViewer" title>nsINavHistoryResultViewer</a></code> interface, which only allowed one client at a time.</div>
<h2 id="Method_overview">Method overview</h2>
<table class="standard-table"> <tbody> <tr> <td><code>void <a href="#batching()">batching</a>(in boolean aToggleMode);</code></td> </tr> <tr> <td><code>void <a href="#containerClosed()">containerClosed</a>(in nsINavHistoryContainerResultNode aContainerNode);</code> <span class="deprecated deprecatedInline notecard inline" title="(Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)">Deprecated since Gecko 2.0</span> <span class="obsolete obsoleteInline notecard inline" title="(Firefox 11.0 / Thunderbird 11.0 / SeaMonkey 2.8)">Obsolete since Gecko 11.0</span></td> </tr> <tr> <td><code>void <a href="#containerOpened()">containerOpened</a>(in nsINavHistoryContainerResultNode aContainerNode);</code> <span class="deprecated deprecatedInline notecard inline" title="(Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)">Deprecated since Gecko 2.0</span> <span class="obsolete obsoleteInline notecard inline" title="(Firefox 11.0 / Thunderbird 11.0 / SeaMonkey 2.8)">Obsolete since Gecko 11.0</span></td> </tr> <tr> <td><code>void <a href="#containerStateChanged()">containerStateChanged</a>(in nsINavHistoryContainerResultNode aContainerNode, in unsigned long aOldState, in unsigned long aNewState);</code></td> </tr> <tr> <td><code>void <a href="#invalidateContainer()">invalidateContainer</a>(in nsINavHistoryContainerResultNode aContainerNode);</code></td> </tr> <tr> <td><code>void <a href="#nodeAnnotationChanged()">nodeAnnotationChanged</a>(in nsINavHistoryResultNode aNode, in AUTF8String aAnnoName);</code></td> </tr> <tr> <td><code>void <a href="#nodeDateAddedChanged()">nodeDateAddedChanged</a>(in nsINavHistoryResultNode aNode, in PRTime aNewValue);</code></td> </tr> <tr> <td><code>void <a href="#nodeHistoryDetailsChanged()">nodeHistoryDetailsChanged</a>(in nsINavHistoryResultNode aNode, in PRTime aNewVisitDate, in unsigned long aNewAccessCount);</code></td> </tr> <tr> <td><code>void <a href="#nodeIconChanged()">nodeIconChanged</a>(in nsINavHistoryResultNode aNode);</code></td> </tr> <tr> <td><code>void <a href="#nodeInserted()">nodeInserted</a>(in nsINavHistoryContainerResultNode aParent, in nsINavHistoryResultNode aNode, in unsigned long aNewIndex);</code></td> </tr> <tr> <td><code>void <a href="#nodeKeywordChanged()">nodeKeywordChanged</a>(in nsINavHistoryResultNode aNode, in AUTF8String aNewKeyword);</code></td> </tr> <tr> <td><code>void <a href="#nodeLastModifiedChanged()">nodeLastModifiedChanged</a>(in nsINavHistoryResultNode aNode, in PRTime aNewValue);</code></td> </tr> <tr> <td><code>void <a href="#nodeMoved()">nodeMoved</a>(in nsINavHistoryResultNode aNode, in nsINavHistoryContainerResultNode aOldParent, in unsigned long aOldIndex, in nsINavHistoryContainerResultNode aNewParent, in unsigned long aNewIndex);</code></td> </tr> <tr> <td><code>void <a href="#nodeRemoved()">nodeRemoved</a>(in nsINavHistoryContainerResultNode aParent, in nsINavHistoryResultNode aItem, in unsigned long aOldIndex);</code></td> </tr> <tr> <td><code>void <a href="#nodeReplaced()">nodeReplaced</a>(in nsINavHistoryContainerResultNode aParentNode, in nsINavHistoryResultNode aOldNode, in nsINavHistoryResultNode aNewNode, in unsigned long aIndex);</code></td> </tr> <tr> <td><code>void <a href="#nodeTagsChanged()">nodeTagsChanged</a>(in nsINavHistoryResultNode aNode);</code></td> </tr> <tr> <td><code>void <a href="#nodeTitleChanged()">nodeTitleChanged</a>(in nsINavHistoryResultNode aNode, in AUTF8String aNewTitle);</code></td> </tr> <tr> <td><code>void <a href="#nodeURIChanged()">nodeURIChanged</a>(in nsINavHistoryResultNode aNode, in AUTF8String aNewURI);</code></td> </tr> <tr> <td><code>void <a href="#sortingChanged()">sortingChanged</a>(in unsigned short sortingMode);</code></td> </tr> </tbody>
</table>
<h2 id="Attributes">Attributes</h2>
<table class="standard-table"> <tbody> <tr> <td class="header">Attribute</td> <td class="header">Type</td> <td class="header">Description</td> </tr> <tr> <td><code>result</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResult">nsINavHistoryResult</a></code></td> <td>The <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResult">nsINavHistoryResult</a></code> this observer monitors. Although this attribute is read-write, you should not alter it directly; instead, call <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryResult#addObserver()">nsINavHistoryResult.addObserver()</a></code> to add an observer to a result.</td> </tr> </tbody>
</table>
<h2 id="Methods">Methods</h2>
<h3 id="batching()">batching()</h3>
<p>Lets the observer know when a batch operation in Places is about to start or end. The observer can then pause updates or events until the batch is completed, so that it won&apos;t handle the large number of updates that are about to be notified. This is especially useful when updating user interfaces, to avoid flicker or continuous selection changes, which may result in performance degradation (for example, if updating a view for each update).</p>
<pre class="eval">void batching(
  in boolean aToggleMode
);
</pre>
<h6 id="Parameters">Parameters</h6>
<dl> <dt><code>aToggleMode</code></dt> <dd>Specify <code>true</code> to start batch mode or <code>false</code> to finish the batch.</dd>
</dl>
<p></p><div class="headingWithIndicator">
        <h3 id="containerClosed()">containerClosed()</h3>
        <span class="obsolete obsoleteMethod notecard inline">Obsolete since Gecko 11.0 (Firefox 11.0 / Thunderbird 11.0 / SeaMonkey 2.8)</span>
        </div><p></p>
<p>Called when a container node&apos;s state changes from opened to closed.</p>
<div class="note notecard"><strong>Note:</strong> This method was deprecated in Gecko 2.0 and removed in Gecko 11.0 (Firefox 11.0 / Thunderbird 11.0 / SeaMonkey 2.8). Implement the <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultObserver#containerStateChanged()">containerStateChanged()</a></code> method instead.</div>
<pre class="eval"> void containerClosed(
   in nsINavHistoryContainerResultNode aContainerNode
 );
</pre>
<h6 id="Parameters_2">Parameters</h6>
<dl> <dt><code>aContainerNode</code></dt> <dd>The container node which was closed.</dd>
</dl>
<p></p><div class="headingWithIndicator">
        <h3 id="containerOpened()">containerOpened()</h3>
        <span class="obsolete obsoleteMethod notecard inline">Obsolete since Gecko 11.0 (Firefox 11.0 / Thunderbird 11.0 / SeaMonkey 2.8)</span>
        </div><p></p>
<p>Called when a container node&apos;s state changes from closed to opened.</p>
<div class="note notecard"><strong>Note:</strong> This method was deprecated in Gecko 2.0 and removed in Gecko 11.0 (Firefox 11.0 / Thunderbird 11.0 / SeaMonkey 2.8). Implement the <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultObserver#containerStateChanged()">containerStateChanged()</a></code> method instead.</div>
<pre class="eval"> void containerOpened(
   in nsINavHistoryContainerResultNode aContainerNode
 );
</pre>
<h6 id="Parameters_3">Parameters</h6>
<dl> <dt><code>aContainerNode</code></dt> <dd>The container node which was opened.</dd>
</dl>
<h3 id="containerStateChanged()">containerStateChanged()</h3>
<p>Called when a container node&apos;s state changes.</p>
<pre class="eval">void containerStateChanged(
  in nsINavHistoryContainerResultNode aContainerNode,
  in unsigned long aOldState,
  in unsigned long aNewState
);
</pre>
<h6 id="Parameters_4">Parameters</h6>
<dl> <dt><code>aContainerNode</code></dt> <dd>The container node whose state changed.</dd> <dt><code>aOldState</code></dt> <dd>The prior state of the node; this will be one of the <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryContainerResultNode#State_constants">nsINavHistoryContainerResultNode.State constants</a></code>.</dd> <dt><code>aNewState</code></dt> <dd>The new state of the node; this is one of the <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryContainerResultNode#State_constants">nsINavHistoryContainerResultNode.State constants</a></code>.</dd>
</dl>
<h3 id="invalidateContainer()">invalidateContainer()</h3>
<p>Called when something has happened that requires that the contents of a container be rebuilt.</p>
<pre class="eval">void invalidateContainer(
  in nsINavHistoryContainerResultNode aContainerNode
);
</pre>
<h6 id="Parameters_5">Parameters</h6>
<dl> <dt><code>aContainerNode</code></dt> <dd>The container that should be rebuilt.</dd>
</dl>
<h3 id="nodeAnnotationChanged()">nodeAnnotationChanged()</h3>
<p>Called right after the annotation on a node has changed. This is called when the annotation is changed, set, or unset.</p>
<pre class="eval">void nodeAnnotationChanged(
  in nsINavHistoryResultNode aNode,
  in AUTF8String aAnnoName
);
</pre>
<h6 id="Parameters_6">Parameters</h6>
<dl> <dt><code>aNode</code></dt> <dd>The node whose title has changed.</dd> <dt><code>aAnnoName</code></dt> <dd>The name of the annotation that changed.</dd>
</dl>
<h3 id="nodeDateAddedChanged()">nodeDateAddedChanged()</h3>
<p>Called right after the dateAdded property property of a node has changed.</p>
<pre class="eval">void nodeDateAddedChanged(
  in nsINavHistoryResultNode aNode,
  in PRTime aNewValue
);
</pre>
<h6 id="Parameters_7">Parameters</h6>
<dl> <dt><code>aNode</code></dt> <dd>The node whose dateAdded property has changed.</dd> <dt><code>aNewValue</code></dt> <dd>The new value of the dateAdded property.</dd>
</dl>
<h3 id="nodeHistoryDetailsChanged()">nodeHistoryDetailsChanged()</h3>
<p>Called right after a node&apos;s time property or accessCount property, or both, have changed.</p>
<pre class="eval">void nodeHistoryDetailsChanged(
  in nsINavHistoryResultNode aNode,
  in PRTime aNewVisitDate,
  in unsigned long aNewAccessCount
);
</pre>
<h6 id="Parameters_8">Parameters</h6>
<dl> <dt><code>aNode</code></dt> <dd>The node whose details have changed.</dd> <dt><code>aNewVisitDate</code></dt> <dd>The new value for the last visit date and time for the node.</dd> <dt><code>aNewAccessCount</code></dt> <dd>The new access count value for the node.</dd>
</dl>
<h3 id="nodeIconChanged()">nodeIconChanged()</h3>
<p>Called right after a node&apos;s icon property has changed.</p>
<pre class="eval">void nodeIconChanged(
  in nsINavHistoryResultNode aNode
);
</pre>
<h6 id="Parameters_9">Parameters</h6>
<dl> <dt><code>aNode</code></dt> <dd>The node whose icon has changed.</dd>
</dl>
<h3 id="nodeInserted()">nodeInserted()</h3>
<p>Called when an item is inserted into a container. The item previously at the specified index (if any) and everything below it is shifted down by one.</p>
<pre class="eval"> void nodeInserted(
   in nsINavHistoryContainerResultNode aParent,
   in nsINavHistoryResultNode aNode,
   in unsigned long aNewIndex
 );
</pre>
<h6 id="Parameters_10">Parameters</h6>
<dl> <dt><code>aParent</code></dt> <dd>The container into which to insert the item.</dd> <dt><code>aNode</code></dt> <dd>The node to insert into the container; it may be either a leaf or another container.</dd> <dt><code>aNewIndex</code></dt> <dd>The index at which to insert the item.</dd>
</dl>
<h3 id="nodeKeywordChanged()">nodeKeywordChanged()</h3>
<p>Called right after the a node&apos;s keyword property has changed.</p>
<pre class="eval">void nodeKeywordChanged(
  in nsINavHistoryResultNode aNode,
  in AUTF8String aNewKeyword
);
</pre>
<h6 id="Parameters_11">Parameters</h6>
<dl> <dt><code>aNode</code></dt> <dd>The node whose keyword property has changed.</dd> <dt><code>aNewKeyword</code></dt> <dd>The new value for the node&apos;s keyword property.</dd>
</dl>
<h3 id="nodeLastModifiedChanged()">nodeLastModifiedChanged()</h3>
<p>Called right after a node&apos;s dateModified property has changed.</p>
<pre class="eval">void nodeLastModifiedChanged(
  in nsINavHistoryResultNode aNode,
  in PRTime aNewValue
);
</pre>
<h6 id="Parameters_12">Parameters</h6>
<dl> <dt><code>aNode</code></dt> <dd>The node whose last modified property has changed.</dd> <dt><code>aNewValue</code></dt> <dd>The new value for the node&apos;s last modified property.</dd>
</dl>
<h3 id="nodeMoved()">nodeMoved()</h3>
<p>Called when a node is moved from <code>aOldParent</code> at <code>aOldIndex</code> to <code>aNewParent</code> at <code>aNewIndex</code>. The item may be a container or a leaf.</p>
<p>At the moment, this method is called only when an item is moved within the same container. When an item is moved between containers, a new node is created for the item, and the itemRemoved/itemAdded methods are used.</p>
<pre class="eval">void nodeMoved(
  in nsINavHistoryResultNode aNode,
  in nsINavHistoryContainerResultNode aOldParent,
  in unsigned long aOldIndex,
  in nsINavHistoryContainerResultNode aNewParent,
  in unsigned long aNewIndex
);
</pre>
<h6 id="Parameters_13">Parameters</h6>
<dl> <dt><code>aNode</code></dt> <dd>The moved node.</dd> <dt><code>aOldParent</code></dt> <dd>The node&apos;s old parent.</dd> <dt><code>aOldIndex</code></dt> <dd>The node&apos;s index in the old parent.</dd> <dt><code>aNewParent</code></dt> <dd>The node&apos;s new parent.</dd> <dt><code>aNewIndex</code></dt> <dd>The node&apos;s index in the new parent.</dd>
</dl>
<h3 id="nodeRemoved()">nodeRemoved()</h3>
<p>Called when a item is removed from a container. The item may be a container or a leaf.</p>
<p>This method is called after the item has been removed from the parent, but before any other action is taken (including zeroing out the item&apos;s parent reference).</p>
<pre class="eval">void nodeRemoved(
   in nsINavHistoryContainerResultNode aParent,
  in nsINavHistoryResultNode aItem,
   in unsigned long aOldIndex
 );
</pre>
<h6 id="Parameters_14">Parameters</h6>
<dl> <dt><code>aParent</code></dt> <dd>The container from which the item was removed.</dd> <dt><code>aItem</code></dt> <dd>The item that was removed from the container. It may be either a container or a leaf.</dd> <dt><code>aOldIndex</code></dt> <dd>The index from which the item was removed.</dd>
</dl>
<h3 id="nodeReplaced()">nodeReplaced()</h3>
<p>Called when a node is being replaced with another node at the same location.</p>
<pre class="eval">void nodeReplaced(
  in nsINavHistoryContainerResultNode aParentNode,
   in nsINavHistoryResultNode aOldNode,
   in nsINavHistoryResultNode aNewNode,
   in unsigned long aIndex
 );
</pre>
<h6 id="Parameters_15">Parameters</h6>
<dl> <dt><code>aParentNode</code></dt> <dd>The container (parent node) in which the item is being replaced.</dd> <dt><code>aOldNode</code></dt> <dd>The node which is being replaced.</dd> <dt><code>aNewNode</code></dt> <dd>The node replacing the <code>aOldNode</code>.</dd> <dt><code>aIndex</code></dt> <dd>The index at which the node is located in the container.</dd>
</dl>
<h3 id="nodeTagsChanged()">nodeTagsChanged()</h3>
<p>Called right after a node&apos;s tags have changed.</p>
<pre class="eval">void nodeTagsChanged(
  in nsINavHistoryResultNode aNode
);
</pre>
<h6 id="Parameters_16">Parameters</h6>
<dl> <dt><code>aNode</code></dt> <dd>The node whose tags have changed.</dd>
</dl>
<h3 id="nodeTitleChanged()">nodeTitleChanged()</h3>
<p>Called right after a node&apos;s title has changed.</p>
<pre class="eval">void nodeTitleChanged(
  in nsINavHistoryResultNode aNode,
  in AUTF8String aNewTitle
);
</pre>
<h6 id="Parameters_17">Parameters</h6>
<dl> <dt><code>aNode</code></dt> <dd>The node whose title has changed.</dd> <dt><code>aNewTitle</code></dt> <dd>The new title of the node.</dd>
</dl>
<h3 id="nodeURIChanged()">nodeURIChanged()</h3>
<p>Called right after the URI of a node has changed.</p>
<pre class="eval">void nodeURIChanged(
  in nsINavHistoryResultNode aNode,
  in AUTF8String aNewURI
);
</pre>
<h6 id="Parameters_18">Parameters</h6>
<dl> <dt><code>aNode</code></dt> <dd>The node whose URI has changed.</dd> <dt><code>aNewURI</code></dt> <dd>The node&apos;s new URI.</dd>
</dl>
<h3 id="sortingChanged()">sortingChanged()</h3>
<p>This is called to indicate to the UI that the sort has changed to the given mode. For trees, for example, this would update the column headers to reflect the sorting. For many other types of views, this will not be applicable.</p>
<pre class="eval"> void sortingChanged(
   in unsigned short sortingMode
 );
</pre>
<h6 id="Parameters_19">Parameters</h6>
<dl> <dt><code>sortingMode</code></dt> <dd>One of the <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryQueryOptions#Sorting_methods">nsINavHistoryQueryOptions.Sorting methods</a></code>, indicating the new sorting mode.</dd>
</dl>
<h2 id="See_also">See also</h2>
<ul> <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResult">nsINavHistoryResult</a></code></li> <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsITreeView">nsITreeView</a></code></li> <li><a class="internal" href="/en/Displaying_Places_information_using_views">Displaying Places information using views</a></li>
</ul>
