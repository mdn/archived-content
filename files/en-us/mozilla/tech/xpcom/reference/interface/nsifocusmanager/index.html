---
title: nsIFocusManager
slug: Mozilla/Tech/XPCOM/Reference/Interface/nsIFocusManager
tags:
  - Interfaces
  - 'Interfaces:Scriptable'
  - NeedsContent
---
<p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/dom/interfaces/base/nsIFocusManager.idl" rel="custom">dom/interfaces/base/nsIFocusManager.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

<i>Please add a summary to this article.</i>
</span>

  <div style="height: 42px; position: relative; padding: 2px; width: auto;">

  <div style="top: 22px; font-size: 11px; position: absolute;">1.0</div>

  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">66</div>

  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 10.476190285714287%;"></div>

<div style="height: 8px; top: 16px; left: 10.476190285714287%; background: #00dd00; position: absolute; width: 89.52380971428572%;" title="Introduced in Gecko 1.9.2 (Firefox 3.6 / Thunderbird 3.1 / Fennec 1.0)"></div>

<div style="top: 0px; font-size: 11px; position: absolute; left: 10.476190285714287%;">Introduced</div>
<div style="top: 22px; font-size: 11px; position: absolute; left: 10.476190285714287%;">Gecko 1.9.2</div>

    <div style="height: 8px; top: 16px; left: 12.357142857142856%; background: #eeee00; position: absolute; width: 1%; border-radius: 4px; -webkit-border-radius: 4px;" title="Last changed in Gecko 5.0 (Firefox 5.0 / Thunderbird 5.0 / SeaMonkey 2.2)"></div>

</div>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title>nsISupports</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 5.0 (Firefox 5.0 / Thunderbird 5.0 / SeaMonkey 2.2)</span></div>
</div><p></p>
<p>Implemented by: <code><span class="str">@mozilla.org/focus-manager;1</span></code> as a service:</p>
<pre class="eval language-html">var focusManager = Components.classes[&quot;@mozilla.org/focus-manager;1&quot;]
                     .getService(Components.interfaces.nsIFocusManager);</pre>
<h2 id="Method_overview" name="Method_overview">Method overview</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td><code>void <a href="#clearFocus()">clearFocus</a>(in nsIDOMWindow aWindow);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#contentRemoved()">contentRemoved</a>(in nsIDocument aDocument, in nsIContent aElement);</code> <span class="noscript noscriptInline notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span> <span class="obsolete obsoleteInline notecard inline" title="(Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)">Obsolete since Gecko 2.0</span></td>
  </tr>
  <tr>
   <td><code>void <a href="#fireDelayedEvents()">fireDelayedEvents</a>(in nsIDocument aDocument);</code> <span class="noscript noscriptInline notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span></td>
  </tr>
  <tr>
   <td><code>void <a href="#focusPlugin()">focusPlugin</a>(in nsIContent aPlugin);</code> <span class="noscript noscriptInline notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span> </td>
  </tr>
  <tr>
   <td><code>nsIDOMElement <a href="#getFocusedElementForWindow()">getFocusedElementForWindow</a>(in nsIDOMWindow aWindow, in PRBool aDeep, out nsIDOMWindow aFocusedWindow);</code></td>
  </tr>
  <tr>
   <td><code>PRUint32 <a href="#getLastFocusMethod()">getLastFocusMethod</a>(in nsIDOMWindow window);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#moveCaretToFocus()">moveCaretToFocus</a>(in nsIDOMWindow aWindow);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#elementIsFocusable()">elementIsFocusable</a>(in nsIDOMElement aElement, in unsigned long aFlags);</code></td>
  </tr>
  <tr>
   <td><code>nsIDOMElement <a href="#moveFocus()">moveFocus</a>(in nsIDOMWindow aWindow, in nsIDOMElement aStartElement, in unsigned long aType, in unsigned long aFlags);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#setFocus()">setFocus</a>(in nsIDOMElement aElement, in unsigned long aFlags);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#windowHidden()">windowHidden</a>(in nsIDOMWindow aWindow);</code> <span class="noscript noscriptInline notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span></td>
  </tr>
  <tr>
   <td><code>void <a href="#windowLowered()">windowLowered</a>(in nsIDOMWindow aWindow);</code> <span class="noscript noscriptInline notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span></td>
  </tr>
  <tr>
   <td><code>void <a href="#windowRaised()">windowRaised</a>(in nsIDOMWindow aWindow);</code> <span class="noscript noscriptInline notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span></td>
  </tr>
  <tr>
   <td><code>void <a href="#windowShown()">windowShown</a>(in nsIDOMWindow aWindow, in PRBool aNeedsFocus);</code> <span class="noscript noscriptInline notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span></td>
  </tr>
 </tbody>
</table>
<h2 id="Attributes" name="Attributes">Attributes</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Attribute</td>
   <td class="header">Type</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>activeWindow</code></td>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindow">nsIDOMWindow</a></code></code></td>
   <td>The most active (frontmost) window, or <code>null</code> if no window that is part of the application is active. Setting the <code>activeWindow</code> raises it, and focuses the current child window&apos;s current element, if any. Setting this to <code>null</code> or to a non-top-level window throws an NS_ERROR_INVALID_ARG exception.</td>
  </tr>
  <tr>
   <td><code>focusedElement</code></td>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMElement">nsIDOMElement</a></code></code></td>
   <td>The element that is currently focused. This will always be an element within the document loaded in <code>focusedWindow</code> or <code>null</code> if no element in that document is focused. <strong>Read only.</strong></td>
  </tr>
  <tr>
   <td><code>focusedWindow</code></td>
   <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMWindow">nsIDOMWindow</a></code></code></td>
   <td>The child window within the <code>activeWindow</code> that is focused. This will always be <code>activeWindow</code>, a child window of <code>activeWindow</code> or <code>null</code> if no child window is focused. Setting the <code>focusedWindow</code> changes the focused window and raises the toplevel window it is in. If the current focus within the new <code>focusedWindow</code> is a frame element, then the <code>focusedWindow</code> will actually be set to the child window and the current element within that set as the focused element. This process repeats downwards until a non-frame element is found.</td>
  </tr>
 </tbody>
</table>
<h2 id="Constants" name="Constants">Constants</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Constant</td>
   <td class="header">Value</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>FLAG_RAISE</code></td>
   <td><code>1</code></td>
   <td> </td>
  </tr>
  <tr>
   <td><code>FLAG_NOSCROLL</code></td>
   <td><code>2</code></td>
   <td>Do not scroll the element to focus into view.</td>
  </tr>
  <tr>
   <td><code>FLAG_NOSWITCHFRAME</code></td>
   <td><code>4</code></td>
   <td>If attempting to change focus in a window that is not focused, do not switch focus to that window. Instead, just update the focus within that window and leave the application focus as is. This flag will have no effect if a child window is focused and an attempt is made to adjust the focus in an ancestor, as the frame must be switched in this case.</td>
  </tr>
  <tr>
   <td><code>FLAG_BYMOUSE</code></td>
   <td><code>0x1000</code></td>
   <td>Focus is changing due to a mouse operation, for instance the mouse was clicked on an element.</td>
  </tr>
  <tr>
   <td><code>FLAG_BYKEY</code></td>
   <td><code>0x2000</code></td>
   <td>Focus is changing due to a key operation, for instance pressing the tab key. This flag would normally be passed when <code>MOVEFOCUS_FORWARD</code> or <code>MOVEFOCUS_BACKWARD</code> is used.</td>
  </tr>
  <tr>
   <td><code>FLAG_BYMOVEFOCUS</code></td>
   <td><code>0x4000</code></td>
   <td>Focus is changing due to a call to <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFocusManager#MoveFocus()">MoveFocus()</a></code>. This flag will be implied when <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFocusManager#MoveFocus()">MoveFocus()</a></code> is called except when one of the other mechanisms (mouse or key) is specified, or when the type is <code>MOVEFOCUS_ROOT</code> or <code>MOVEFOCUS_CARET</code>.</td>
  </tr>
  <tr>
   <td><code>FLAG_SHOWRING</code></td>
   <td><code>0x100000</code></td>
   <td>Always show the focus ring or other indicator of focus, regardless of other state. </td>
  </tr>
  <tr>
   <td><code>MOVEFOCUS_FORWARD</code></td>
   <td><code>1</code></td>
   <td>Move focus forward one element, used when pressing TAB.</td>
  </tr>
  <tr>
   <td><code>MOVEFOCUS_BACKWARD</code></td>
   <td><code>2</code></td>
   <td>Move focus backward one element, used when pressing Shift+TAB.</td>
  </tr>
  <tr>
   <td><code>MOVEFOCUS_FORWARDDOC</code></td>
   <td><code>3</code></td>
   <td>Move focus forward to the next frame document, used when pressing F6.</td>
  </tr>
  <tr>
   <td><code>MOVEFOCUS_BACKWARDDOC</code></td>
   <td><code>4</code></td>
   <td>Move focus forward to the previous frame document, used when pressing Shift+F6.</td>
  </tr>
  <tr>
   <td><code>MOVEFOCUS_FIRST</code></td>
   <td><code>5</code></td>
   <td>Move focus to the first focusable element.</td>
  </tr>
  <tr>
   <td><code>MOVEFOCUS_LAST</code></td>
   <td><code>6</code></td>
   <td>Move focus to the last focusable element.</td>
  </tr>
  <tr>
   <td><code>MOVEFOCUS_ROOT</code></td>
   <td><code>7</code></td>
   <td>Move focus to the root element in the document.</td>
  </tr>
  <tr>
   <td><code>MOVEFOCUS_CARET</code></td>
   <td><code>8</code></td>
   <td>Move focus to a link at the position of the caret. This is a special value used to focus links as the caret moves over them in caret browsing mode.</td>
  </tr>
 </tbody>
</table>
<h2 id="Methods" name="Methods">Methods</h2>
<h3 id="clearFocus()" name="clearFocus()">clearFocus()</h3>
<p>Clears the focused element within <code>aWindow</code>. If the current <code>focusedWindow</code> is a descendant of <code>aWindow</code>, sets the current <code>focusedWindow</code> to <code>aWindow</code>.</p>
<pre class="eval">void clearFocus(
  in nsIDOMWindow aWindow
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aWindow</code></dt>
 <dd>
   </dd>
</dl>
<h6 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h6>
<dl>
 <dt>
  <code>NS_ERROR_INVALID_ARG</code></dt>
 <dd>
  If <code>aWindow</code> is <code>null</code>.</dd>
</dl>
<p></p><div><span class="noscript noscriptMethod notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span><h3 id="contentRemoved">contentRemoved</h3></div><p></p>
<p></p><div class="obsolete obsoleteHeader notecard"><p><strong><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span> Obsolete since Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)</strong><br>This feature is obsolete. Although it may still work in some browsers, its use is discouraged since it could be removed at any time. Try to avoid using it.</p></div><p></p>
<p>Called when content has been removed.</p>
<pre class="eval">void contentRemoved(
  in nsIDocument aDocument,
  in nsIContent aElement
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aDocument</code></dt>
 <dd>
   </dd>
 <dt>
  <code>aElement</code></dt>
 <dd>
   </dd>
</dl>
<p></p><div><span class="noscript noscriptMethod notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span><h3 id="fireDelayedEvents">fireDelayedEvents</h3></div><p></p>
<p>Fire any events that have been delayed due to synchronized actions.</p>
<pre class="eval">void fireDelayedEvents(
  in nsIDocument aDocument
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aDocument</code></dt>
 <dd>
   </dd>
</dl>
<p></p><div><span class="noscript noscriptMethod notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span><h3 id="focusPlugin">focusPlugin</h3></div><p></p>
<p></p>
<p>Indicate that a plugin wishes to take the focus. This is similar to a normal focus except that the widget focus is not changed. Updating the widget focus state is the responsibility of the caller.</p>
<pre class="eval">void focusPlugin(
  in nsIContent aPlugin
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aPlugin</code></dt>
 <dd>
   </dd>
</dl>
<h3 id="getFocusedElementForWindow()" name="getFocusedElementForWindow()">getFocusedElementForWindow()</h3>
<pre class="eval">nsIDOMElement getFocusedElementForWindow(
  in nsIDOMWindow aWindow,
  in PRBool aDeep,
  out nsIDOMWindow aFocusedWindow
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aWindow</code></dt>
 <dd>
  If equal to the current value of <code>focusedWindow</code>, then the returned element will be the application-wide focused element (the value of <code>focusedElement</code>). The return value will be <code>null</code> if no element is focused.</dd>
 <dt>
  <code>aDeep</code></dt>
 <dd>
  If <code>true</code>, then child frames are traversed and the return value may be the element within a child descendant window that is focused. If <code>false</code>, then the return value will be the frame element if the focus is in a child frame.</dd>
 <dt>
  <code>aFocusedWindow</code></dt>
 <dd>
  Will be set to the currently focused descendant window of <code>aWindow</code>, or to <code>aWindow</code> if <code>aDeep</code> is <code>false</code>. This will be set even if no element is focused.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>The currently focused element within <code>aWindow</code>.</p>
<h6 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h6>
<dl>
 <dt>
  <code>NS_ERROR_INVALID_ARG</code></dt>
 <dd>
  If aWindow is <code>null</code>.</dd>
</dl>
<h3 id="getLastFocusMethod()" name="getLastFocusMethod()">getLastFocusMethod()</h3>
<pre class="eval">PRUint32 getLastFocusMethod(
  in nsIDOMWindow window
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>window</code></dt>
 <dd>
  If <code>null</code>, then the current <code>focusedWindow</code> will be used by default. This has the result of retrieving the method that was used to focus the currently focused element.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>The method that was used to focus the element in window. This will either be 0, <code>FLAG_BYMOUSE</code> or <code>FLAG_BYKEY</code>.</p>
<h3 id="moveCaretToFocus()" name="moveCaretToFocus()">moveCaretToFocus()</h3>
<p>Moves the selection caret within <code>aWindow</code> to the current focus.</p>
<pre class="eval">void moveCaretToFocus(
  in nsIDOMWindow aWindow
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aWindow</code></dt>
 <dd>
   </dd>
</dl>
<h3 id="elementIsFocusable()" name="elementIsFocusable()">elementIsFocusable()</h3>
<p>Check if given element is focusable.</p>
<pre><code id="line-141">boolean elementIsFocusable(in nsIDOMElement aElement, in unsigned long aFlags);</code></pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  aElement</dt>
 <dd>
   </dd>
 <dt>
  aFlags</dt>
 <dd>
   </dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>True if aElement is focusable.</p>
<dl>
 <dt>
   </dt>
</dl>
<h3 id="moveFocus()" name="moveFocus()">moveFocus()</h3>
<p>Move the focus to another element. If <code>aStartElement</code> is specified, then movement is done relative to <code>aStartElement</code>. If <code>aStartElement</code> is <code>null</code>, then movement is done relative to the currently focused element. If no element is focused, focus the first focusable element within the document (or the last focusable element if <code>aType</code> is <code>MOVEFOCUS_END</code>). This method is equivalent to setting the <code>focusedElement</code> to the new element.</p>
<p>Specifying <code>aStartElement</code> and using <code>MOVEFOCUS_LAST</code> is not currently implemented.</p>
<p>If no element is found, and <code>aType</code> is either <code>MOVEFOCUS_ROOT</code> or <code>MOVEFOCUS_CARET</code>, then the focus is cleared. If <code>aType</code> is any other value, the focus is not changed.</p>
<pre class="eval">nsIDOMElement moveFocus(
  in nsIDOMWindow aWindow,
  in nsIDOMElement aStartElement,
  in unsigned long aType,
  in unsigned long aFlags
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aWindow</code></dt>
 <dd>
   </dd>
 <dt>
  <code>aStartElement</code></dt>
 <dd>
   </dd>
 <dt>
  <code>aType</code></dt>
 <dd>
   </dd>
 <dt>
  <code>aFlags</code></dt>
 <dd>
   </dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>The element that was focused.</p>
<h3 id="setFocus()" name="setFocus()">setFocus()</h3>
<p>Changes the focused element reference within the window containing <code>aElement</code> to <code>aElement</code>.</p>
<pre class="eval">void setFocus(
  in nsIDOMElement aElement,
  in unsigned long aFlags
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aElement</code></dt>
 <dd>
   </dd>
 <dt>
  <code>aFlags</code></dt>
 <dd>
   </dd>
</dl>
<p></p><div><span class="noscript noscriptMethod notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span><h3 id="windowHidden">windowHidden</h3></div><p></p>
<p>Called when a document in a window has been hidden or otherwise can no longer accept focus.</p>
<pre class="eval">void windowHidden(
  in nsIDOMWindow aWindow
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aWindow</code></dt>
 <dd>
   </dd>
</dl>
<p></p><div><span class="noscript noscriptMethod notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span><h3 id="windowLowered">windowLowered</h3></div><p></p>
<p>Called when a window has been lowered.</p>
<pre class="eval">void windowLowered(
  in nsIDOMWindow aWindow
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aWindow</code></dt>
 <dd>
   </dd>
</dl>
<p></p><div><span class="noscript noscriptMethod notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span><h3 id="windowRaised">windowRaised</h3></div><p></p>
<p>Called when a window has been raised.</p>
<pre class="eval">void windowRaised(
  in nsIDOMWindow aWindow
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aWindow</code></dt>
 <dd>
   </dd>
</dl>
<p></p><div><span class="noscript noscriptMethod notecard inline" title="This method may only be called from C++; don&apos;t use it from JavaScript.">Native code only!</span><h3 id="windowShown">windowShown</h3></div><p></p>
<p>Called when a new document in a window is shown.</p>
<pre class="eval">void windowShown(
  in nsIDOMWindow aWindow,
  in PRBool aNeedsFocus
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aWindow</code></dt>
 <dd>
   </dd>
 <dt>
  <code>aNeedsFocus</code></dt>
 <dd>
  If <code>true</code>, then focus events are expected to be fired on the window if this window is in the focused window chain.</dd>
</dl>
