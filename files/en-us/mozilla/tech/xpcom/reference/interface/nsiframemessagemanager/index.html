---
title: nsIFrameMessageManager
slug: Mozilla/Tech/XPCOM/Reference/Interface/nsIFrameMessageManager
tags:
  - Gecko
  - Interface
  - Obsolete
  - Reference
  - XPCOM
  - XPCOM Interface Reference
---
<p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/content/base/public/nsIMessageManager.idl" rel="custom">content/base/public/nsIMessageManager.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

Provides methods for managing message listeners on local frames. This provides a way for local frames to receive messages from remote frames.
</span>

  <div style="height: 42px; position: relative; padding: 2px; width: auto;">

  <div style="top: 22px; font-size: 11px; position: absolute;">1.0</div>

  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">66</div>

  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 11.428571428571429%;"></div>

<div style="height: 8px; top: 16px; left: 11.428571428571429%; background: #00dd00; position: absolute; width: 18.57142857142857%;" title="Introduced in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)"></div>

<div style="top: 0px; font-size: 11px; position: absolute; left: 11.428571428571429%;">Introduced</div>
<div style="top: 22px; font-size: 11px; position: absolute; left: 11.428571428571429%;">Gecko 2.0</div>

    <div style="height: 8px; top: 16px; left: 30%; background: #000000; position: absolute; width: 70%;" title="Obsolete in Gecko 17.0 (Firefox 17.0 / Thunderbird 17.0 / SeaMonkey 2.14)"></div>

  <div style="top: 0px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 30%;">Obsolete</div>

  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 30%;">Gecko 17.0</div>

    <div style="height: 8px; top: 16px; left: 29.5%; background: #eeee00; position: absolute; width: 1%; border-radius: 4px; -webkit-border-radius: 4px;" title="Last changed in Gecko 17.0 (Firefox 17.0 / Thunderbird 17.0 / SeaMonkey 2.14)"></div>

</div>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title>nsISupports</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 17.0 (Firefox 17.0 / Thunderbird 17.0 / SeaMonkey 2.14)</span></div>
</div><p></p>

<div class="warning notecard">
<p>This interface is obsolete and was removed in Firefox 17. You should use <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIMessageListenerManager" title>nsIMessageListenerManager</a></code> or <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIMessageSender" title>nsIMessageSender</a></code> instead.</p>
</div>

<h2 id="Method_overview" name="Method_overview">Method overview</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td><code>void <a href="#addMessageListener()">addMessageListener</a>(in AString aMessage, in nsIFrameMessageListener aListener, [optional] in boolean listenWhenClosed);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#removeMessageListener()">removeMessageListener</a>(in AString aMessage, in nsIFrameMessageListener aListener);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="/en/XPCOM_Interface_Reference/nsIFrameMessageManager#sendAsyncMessage()" title="En/XPCOM Interface Reference/nsIFrameMessageManager#sendAsyncMessage()">sendAsyncMessage</a>(in AString aMessage, in AString json);</code></td>
  </tr>
 </tbody>
</table>

<h2 id="Methods" name="Methods">Methods</h2>

<h3 id="addMessageListener()" name="addMessageListener()">addMessageListener()</h3>

<p>Adds a message listener to the local frame. This listener will receive messages sent from the remote frame.</p>

<pre class="eval">void addMessageListener(
  in AString aMessage,
  in nsIFrameMessageListener aListener
  [optional in boolean listenWhenClosed
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aMessage</code></dt>
 <dd>The name of the message for which to add a listener.</dd>
 <dt><code>aListener</code></dt>
 <dd>An object implementing <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFrameMessageListener" title>nsIFrameMessageListener</a></code> whose <code>receiveMessage</code> method will be called when the message is received.</dd>
 <dt><code>listenWhenClosed</code></dt>
 <dd>Default is <code>false</code>. Set to <code>oo</code> if you want to receive messages during the short period after a frame has been removed from the DOM and before its frame script has finished unloading. This parameter only has an effect for frame message managers in the main process. An alternative method to listen for death of frame script is to use <code>message-manager-disconnect</code>  observer: <a href="/en-US/docs/Observer_Notifications#Message_manager">Observer Notifications :: Message Manager</a>.</dd>
</dl>

<h3 id="removeMessageListener()" name="removeMessageListener()">removeMessageListener()</h3>

<p>Removes a message listener previously added by calling <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFrameMessageManager#addMessageListener()">addMessageListener()</a></code>.</p>

<pre class="eval">void removeMessageListener(
  in AString aMessage,
  in nsIFrameMessageListener aListener
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>aMessage</code></dt>
 <dd>The name of the message for which to remove a listener.</dd>
 <dt><code>aListener</code></dt>
 <dd>An object implementing <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFrameMessageListener" title>nsIFrameMessageListener</a></code> to stop receiving messages.</dd>
</dl>

<h3 id="sendAsyncMessage()">sendAsyncMessage()</h3>

<p>Asynchronously sends a message to the listeners.</p>

<pre>void sendAsyncMessage(
  in AString aMessage,
  in AString json
);
</pre>

<h6 id="Parameters_2">Parameters</h6>

<dl>
 <dt><code>aMessage</code></dt>
 <dd>The name of the message to send to the listeners.</dd>
 <dt><code>json</code> <span class="optional optionalInline notecard inline">Optional</span></dt>
 <dd>A JSON object containing data to be delivered to the listeners.</dd>
</dl>

<h2 id="See_also" name="See_also">See also</h2>

<ul>
 <li><a href="/en/Content_process_event_handling">Content process event handling</a></li>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFrameMessageListener">nsIFrameMessageListener</a></code></li>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISyncMessageSender">nsISyncMessageSender</a></code></li>
</ul>

<dl><br>
 <br>
 <br>
 <br>
 <br>
 <br>

 <dd> </dd>
 <dd> </dd>
 <dd> </dd>
 <dd> </dd>
</dl>
