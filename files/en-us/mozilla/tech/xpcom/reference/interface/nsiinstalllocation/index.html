---
title: nsIInstallLocation
slug: Mozilla/Tech/XPCOM/Reference/Interface/nsIInstallLocation
tags:
  - Add-ons
  - Extensions
  - Interfaces
  - Themes
  - XPCOM
  - XPCOM API Reference
  - XPCOM Interface Reference
---
<p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/toolkit/mozapps/extensions/public/nsIExtensionManager.idl" rel="custom">toolkit/mozapps/extensions/public/nsIExtensionManager.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

Interface representing a location where extensions, themes and so on are installed.
</span>

  <div style="height: 42px; position: relative; padding: 2px; width: auto;">

  <div style="top: 22px; font-size: 11px; position: absolute;">1.0</div>

  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">66</div>

  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 5.714285714285714%;"></div>

<div style="height: 8px; top: 16px; left: 5.714285714285714%; background: #00dd00; position: absolute; width: 5.714285714285714%;" title="Introduced in Gecko 1.8 (Firefox 1.5 / Thunderbird 1.5 / SeaMonkey 1.0)"></div>

<div style="top: 0px; font-size: 11px; position: absolute; left: 5.714285714285714%;">Introduced</div>
<div style="top: 22px; font-size: 11px; position: absolute; left: 5.714285714285714%;">Gecko 1.8</div>

    <div style="height: 8px; top: 16px; left: 11.428571428571429%; background: #000000; position: absolute; width: 88.57142857142857%;" title="Obsolete in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)"></div>

  <div style="top: 0px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 11.428571428571429%;">Obsolete</div>

  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 11.428571428571429%;">Gecko 2.0</div>

    <div style="height: 8px; top: 16px; left: 10.928571428571429%; background: #eeee00; position: absolute; width: 1%; border-radius: 4px; -webkit-border-radius: 4px;" title="Last changed in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)"></div>

</div>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title>nsISupports</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)</span></div>
</div><p></p>
<div class="note"><strong>Note:</strong> While this API still works, Firefox 4 <a href="/en/Firefox_4_for_developers#XPI_unpacking" title="en/Firefox 4 for developers#XPI unpacking">no longer extracts XPIs</a> by default, so this will now point to the XPI file instead of to the directory. Any <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFile" title>nsIFile</a></code> operations that assume a directory and plain files will fail in Firefox 4, unless you specify <a href="/en/Install_Manifests#unpack" title="en/Install Manifests#unpack"><code>&lt;em:unpack&gt;</code></a>.</div>
<p>You can get the install location of a particular add-on using <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIExtensionManager" title>nsIExtensionManager</a></code> interface:</p>
<pre class="eval">var il = Components.classes[&quot;@mozilla.org/extensions/manager;1&quot;]
                   .getService(Components.interfaces.nsIExtensionManager)
                   .getInstallLocation(<em>&quot;add-on id&quot;</em>)
</pre>
<h2 id="Method_overview" name="Method_overview">Method overview</h2>
<table class="standard-table"> <tbody> <tr> <td><code>AString <a href="#getIDForLocation()">getIDForLocation</a>(in nsIFile file);</code></td> </tr> <tr> <td><code>nsIFile <a href="#getItemFile()">getItemFile</a>(in AString id, in AString path);</code></td> </tr> <tr> <td><code>nsIFile <a href="#getItemLocation()">getItemLocation</a>(in AString id);</code></td> </tr> <tr> <td><code>nsIFile <a href="#getStageFile()">getStageFile</a>(in AString id);</code> </td> </tr> <tr> <td><code>boolean <a href="#itemIsManagedIndependently()">itemIsManagedIndependently</a>(in AString id);</code></td> </tr> <tr> <td><code>void <a href="#removeFile()">removeFile</a>(in nsIFile file);</code> </td> </tr> <tr> <td><code>nsIFile <a href="#stageFile()">stageFile</a>(in nsIFile file, in AString id);</code> </td> </tr> </tbody>
</table>
<h2 id="Attributes" name="Attributes">Attributes</h2>
<table class="standard-table"> <tbody> <tr> <td class="header">Attribute</td> <td class="header">Type</td> <td class="header">Description</td> </tr> <tr> <td><code>canAccess</code></td> <td><code><a href="/en/boolean" title="en/boolean">boolean</a></code></td> <td>Whether or not the user can write to the Install Location with the current access privileges. This is different from <code>restricted</code> because it&apos;s not whether or not the <code>location</code> *might* be <code>restricted</code>, it&apos;s whether or not it actually *is* <code>restricted</code> right now. <strong>Read only.</strong></td> </tr> <tr> <td><code>itemLocations</code></td> <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDirectoryEnumerator" title>nsIDirectoryEnumerator</a></code></code></td> <td> <p>An enumeration of <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFile" title>nsIFile</a></code>s for:</p> <ul> <li>Locations that contain items</li> <li>Potential dropped-in XPIs</li> </ul> <div class="note notecard"><strong>Note:</strong> This enumeration resolves Text Links to the directories they refer to.</div> <strong>Read only.</strong></td> </tr> <tr> <td><code>location</code></td> <td><code><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFile" title>nsIFile</a></code></code></td> <td> <p>The file system location where items live. Items can be dropped in at this location. Can be <code>null</code> for Install Locations that don&apos;t have a file system presence.</p> <div class="note notecard"><strong>Note:</strong> This is a clone of the actual location which the caller can modify freely.</div> <strong>Read only.</strong></td> </tr> <tr> <td><code>name</code></td> <td><code><a href="/en/AString" title="en/AString">AString</a></code></td> <td>The string identifier of this Install Location. <strong>Read only.</strong></td> </tr> <tr> <td><code>priority</code></td> <td><code><a href="/en/long" title="en/long">long</a></code></td> <td>The <code>priority</code> level of this Install Location in loading. <strong>Read only.</strong></td> </tr> <tr> <td><code>restricted</code></td> <td><code><a href="/en/boolean" title="en/boolean">boolean</a></code></td> <td>Whether or not this Install Location is on an area of the file system that could be <code>restricted</code> on a <code>restricted</code>-access account, regardless of whether or not the <code>location</code> is <code>restricted</code> with the current user privileges. <strong>Read only.</strong></td> </tr> </tbody>
</table>
<h2 id="Constants" name="Constants">Constants</h2>
<p>Constants representing priority of some default Install Locations. You should not use the exact values here, you should offset from these values each time you create a new Install Location. Offsetting can be brittle but you should know what Install Locations are being defined for your own application.</p>
<table class="standard-table"> <tbody> <tr> <td class="header">Constant</td> <td class="header">Value</td> <td class="header">Description</td> </tr> <tr> <td><code>PRIORITY_APP_PROFILE</code></td> <td><code>0</code></td> <td> </td> </tr> <tr> <td><code>PRIORITY_APP_SYSTEM_USER</code></td> <td><code>10</code></td> <td> </td> </tr> <tr> <td><code>PRIORITY_XRE_SYSTEM_USER</code></td> <td><code>100</code></td> <td> </td> </tr> <tr> <td><code>PRIORITY_APP_SYSTEM_GLOBAL</code></td> <td><code>1000</code></td> <td> </td> </tr> <tr> <td><code>PRIORITY_XRE_SYSTEM_GLOBAL</code></td> <td><code>10000</code></td> <td> </td> </tr> </tbody>
</table>
<h2 id="Methods" name="Methods">Methods</h2>
<h3 id="getIDForLocation()" name="getIDForLocation()">getIDForLocation()</h3>
<p>Retrieves the GUID for an item at the specified location.</p>
<p></p><div class="note notecard"><strong>Note:</strong> This function makes no promises about whether or not this path is actually maintained by this Install Location.</div><p></p>
<pre class="eval">AString getIDForLocation(
  in nsIFile file
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>file</code></dt> <dd>The location where an item might live.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>The ID for an item that might live at the location specified.</p>
<h3 id="getItemFile()" name="getItemFile()">getItemFile()</h3>
<p>Gets a <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFile" title>nsIFile</a></code> object for a file within an item&apos;s directory structure.</p>
<pre class="eval">nsIFile getItemFile(
  in AString id,
  in AString path
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>id</code></dt> <dd>The GUID of the item.</dd> <dt><code>path</code></dt> <dd>The path to the file beneath an Extension&apos;s directory.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>A file object at the requested location. The file does not necessarily have to exist.</p>
<h3 id="getItemLocation()" name="getItemLocation()">getItemLocation()</h3>
<p>Gets the directory that contains an item.</p>
<pre class="eval">nsIFile getItemLocation(
  in AString id
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>id</code></dt> <dd>The GUID of the item.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>The location of the item.</p>
<p></p><h3 id="getStageFile()">getStageFile()</h3><p></p>
<p>Returns the most recently staged package (for example the last XPI or JAR in a directory) for an item and removes items that do not qualify.</p>
<pre class="eval">nsIFile getStageFile(
  in AString id
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>id</code></dt> <dd>The ID of the staged package.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>An <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFile" title>nsIFile</a></code> if the package exists otherwise <code>null</code>.</p>
<h3 id="itemIsManagedIndependently()" name="itemIsManagedIndependently()">itemIsManagedIndependently()</h3>
<p>Determines whether or not an item&apos;s resources are managed by the Extension System or by some other user or process. For example, items linked to by text links are managed by the user, and items linked to from Registry Install Locations are usually managed by other applications or installers.</p>
<pre class="eval">boolean itemIsManagedIndependently(
  in AString id
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>id</code></dt> <dd>The GUID of the item.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p><code>true</code> if the item&apos;s resources are managed independently of the Extension System, <code>false</code> otherwise.</p>
<p></p><h3 id="removeFile()">removeFile()</h3><p></p>
<p>Removes a file from the stage. This cleans up the stage if there is nothing else left after the remove operation.</p>
<pre class="eval">void removeFile(
  in nsIFile file
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>file</code></dt> <dd>The file to remove.</dd>
</dl>
<p></p><h3 id="stageFile()">stageFile()</h3><p></p>
<p>Stages the specified file by copying it to some location from where it can be retrieved later to complete installation.</p>
<pre class="eval">nsIFile stageFile(
  in nsIFile file,
  in AString id
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl> <dt><code>file</code></dt> <dd>The file to stage.</dd> <dt><code>id</code></dt> <dd>The GUID of the item the file represents.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>The staged file.</p>
