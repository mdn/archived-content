---
title: nsINavHistoryQueryOptions
slug: Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryQueryOptions
tags:
  - Developing Mozilla
  - Extensions
  - Interfaces
  - 'Interfaces:Scriptable'
  - Places
  - XPCOM Interface Reference
---
<p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/toolkit/components/places/nsINavHistoryService.idl" rel="custom">toolkit/components/places/nsINavHistoryService.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

Represents the global options for executing a query.
</span>

  <div style="height: 42px; position: relative; padding: 2px; width: auto;">

  <div style="top: 22px; font-size: 11px; position: absolute;">1.0</div>

  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">66</div>

  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 8.571428571428571%;"></div>

<div style="height: 8px; top: 16px; left: 8.571428571428571%; background: #00dd00; position: absolute; width: 91.42857142857143%;" title="Introduced in Gecko 1.9 (Firefox 3)"></div>

<div style="top: 0px; font-size: 11px; position: absolute; left: 8.571428571428571%;">Introduced</div>
<div style="top: 22px; font-size: 11px; position: absolute; left: 8.571428571428571%;">Gecko 1.9</div>

    <div style="height: 8px; top: 16px; left: 23.785714285714285%; background: #eeee00; position: absolute; width: 1%; border-radius: 4px; -webkit-border-radius: 4px;" title="Last changed in Gecko 13.0 (Firefox 13.0 / Thunderbird 13.0 / SeaMonkey 2.10)"></div>

</div>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 13.0 (Firefox 13.0 / Thunderbird 13.0 / SeaMonkey 2.10)</span></div>
</div><p></p>
<h2 id="Method_overview" name="Method_overview">Method overview</h2>
<table class="standard-table">
  <tbody>
    <tr>
      <td><code>nsINavHistoryQueryOptions <a href="#clone()">clone</a>();</code></td>
    </tr>
  </tbody>
</table>
<h2 id="Attributes" name="Attributes">Attributes</h2>
<table class="standard-table">
  <tbody>
    <tr>
      <td class="header">Attribute</td>
      <td class="header">Type</td>
      <td class="header">Description</td>
    </tr>
    <tr>
      <td><code>applyOptionsToContainers</code></td>
      <td><code>boolean</code></td>
      <td>If <code>true</code>, the query options are only applied to the containers.</td>
    </tr>
    <tr>
      <td><code>asyncEnabled</code></td>
      <td><code>boolean</code></td>
      <td>
        <p>When <code>true</code>, the root container node generated by these options and all of its descendant containers are opened asynchronously if they support doing so. By default, this is <code>false</code>.</p>
        <div class="note">
          <strong>Note:</strong> Currently, only bookmark folder containers support being opened asynchronously.</div>
      </td>
    </tr>
    <tr>
      <td><code>excludeItemIfParentHasAnnotation</code> <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 13.0 / Thunderbird 13.0 / SeaMonkey 2.10)">Obsolete since Gecko 13.0</span></td>
      <td><code><a href="/en/AUTF8String" title="en/AUTF8String">AUTF8String</a></code></td>
      <td>This option excludes items from a bookmarks query if the parent of the item has this annotation. An example is to exclude livemark items (parent folders have the <code>"livemark/feedURI"</code> annotation). Ignored for queries over history.</td>
    </tr>
    <tr>
      <td><code>excludeItems</code></td>
      <td><code>boolean</code></td>
      <td>This option excludes all URIs and separators from a bookmarks query. This would be used if you just wanted a list of bookmark folders and queries (such as the left pane of the places page). Ignored for queries over history. Defaults to <code>false</code>.</td>
    </tr>
    <tr>
      <td><code>excludeQueries</code></td>
      <td><code>boolean</code></td>
      <td>Set to <code>true</code> to exclude queries (<code>"place:"</code> URIs) from the query results. Simple folder queries (bookmark folder symlinks) will still be included. Defaults to <code>false</code>.</td>
    </tr>
    <tr>
      <td><code>excludeReadOnlyFolders</code></td>
      <td><code>boolean</code></td>
      <td>Set to <code>true</code> to exclude read-only folders from the query results. This is designed for cases where you want to give the user the option of filing something into a list of folders. It only affects cases where the actual folder result node would appear in its parent folder and filters it out. It doesn't affect the query at all, and doesn't affect more complex queries (such as "folders with annotation X").</td>
    </tr>
    <tr>
      <td><code>expandQueries</code></td>
      <td><code>boolean</code></td>
      <td>When set, allows items with <code>"place:"</code> URIs to appear as containers, with the container's contents filled in from the stored query. If not set, these will appear as normal items. Doesn't do anything if <code>excludeQueries</code> is set. Defaults to <code>false</code>.
        <p>Note that this has no effect on folder links, which are place: URIs returned by <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavBookmarkService" title="">nsINavBookmarkService</a></code>'s <code>getFolderURI</code> method. These are always expanded and will appear as bookmark folders.</p>
      </td>
    </tr>
    <tr>
      <td><code>includeHidden</code></td>
      <td><code>boolean</code></td>
      <td>Most items in history are marked "hidden." Only toplevel pages that the user sees in the URL bar are not hidden. Hidden things include the content of iframes and all images on web pages. Normally, you don't want these things. If you do, set this flag and you'll get all items, even hidden ones. Does nothing for bookmark queries. Defaults to <code>false</code>.</td>
    </tr>
    <tr>
      <td><code>maxResults</code></td>
      <td><code>long</code></td>
      <td>This is the maximum number of results that you want. The query is exeucted, the results are sorted, and then the top <code>maxResults</code> results are taken and returned. Set to <code>"0"</code> (the default) to get all results.
        <p><strong>This does not work in conjunction with sorting by title</strong>. This is because sorting by title requires us to sort after using locale-sensetive sorting (as opposed to letting the database do it for us). Instead, we get the result ordered by date, pick the <code>maxResult</code> most recent ones, and <strong>then</strong> sort by title.</p>
      </td>
    </tr>
    <tr>
      <td><code>queryType</code></td>
      <td><code>short</code></td>
      <td>The type of search to use when querying the DB; This attribute is only honored by query nodes. It is silently ignored for simple folder queries. See <a href="#Query_type_constants">Query type constants</a> for possible values.</td>
    </tr>
    <tr>
      <td><code>redirectsMode</code> </td>
      <td><code>unsigned short</code></td>
      <td>
        <p>Specifies how to handle redirects; see <a href="#Redirects_mode_constants">Redirects mode constants</a> for details. The default value is <code>REDIRECTS_MODE_ALL</code>.</p>
        <div class="note">
          <strong>Note:</strong> This option is only used on <code>QUERY_TYPE_HISTORY</code>.</div>
      </td>
    </tr>
    <tr>
      <td><code>resolveNullBookmarkTitles</code></td>
      <td><code>boolean</code></td>
      <td>If a bookmark title is <code>NULL</code> (note, not empty), attempt to use the history title. It is set to <code>false</code> by default.</td>
    </tr>
    <tr>
      <td><code>resultType</code></td>
      <td><code>short</code></td>
      <td>Sets the result type. See <a href="#Result_type_constants">Result type constants</a> for possible values.</td>
    </tr>
    <tr>
      <td><code>showSessions</code></td>
      <td><code>boolean</code></td>
      <td>Separate/group history items based on session information. Only matters when sorting by date.</td>
    </tr>
    <tr>
      <td><code>sortingAnnotation</code></td>
      <td><code><a href="/en/AUTF8String" title="en/AUTF8String">AUTF8String</a></code></td>
      <td>The annotation to use in <code>SORT_BY_ANNOTATION_*</code> sorting modes.</td>
    </tr>
    <tr>
      <td><code>sortingMode</code></td>
      <td><code>short</code></td>
      <td>The sorting annotation to use; see <a href="#Sorting_methods">Sorting methods</a> for possible values.</td>
    </tr>
  </tbody>
</table>
<h2 id="Constants" name="Constants">Constants</h2>
<h3 id="Sorting_methods">Sorting methods</h3>
<p>You can ask for the results to be pre-sorted. Since the DB has indices of many items, it can produce sorted results almost for free. Note: re-sorting is slower, as is sorting by title or when you have a host name.</p>
<table class="standard-table">
  <tbody>
    <tr>
      <td class="header">Constant</td>
      <td class="header">Value</td>
      <td class="header">Description</td>
    </tr>
    <tr>
      <td><code>SORT_BY_NONE</code></td>
      <td>0</td>
      <td>For bookmark items, this constant means sort by the natural bookmark order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_TITLE_ASCENDING</code></td>
      <td>1</td>
      <td>Sort by the ascending title order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_TITLE_DESCENDING</code></td>
      <td>2</td>
      <td>Sort by the descending title order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_DATE_ASCENDING</code></td>
      <td>3</td>
      <td>Sort by the ascending date order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_DATE_DESCENDING</code></td>
      <td>4</td>
      <td>Sort by the descending date order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_URI_ASCENDING</code></td>
      <td>5</td>
      <td>Sort by the ascending URI order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_URI_DESCENDING</code></td>
      <td>6</td>
      <td>Sort by the descending URI order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_VISITCOUNT_ASCENDING</code></td>
      <td>7</td>
      <td>Sort by the ascending visit count order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_VISITCOUNT_DESCENDING</code></td>
      <td>8</td>
      <td>Sort by the descending visit count order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_KEYWORD_ASCENDING</code></td>
      <td>9</td>
      <td>Sort by the ascending keyword order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_KEYWORD_DESCENDING</code></td>
      <td>10</td>
      <td>Sort by the descending keyword order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_DATEADDED_ASCENDING</code></td>
      <td>11</td>
      <td>Sort by the ascending added date order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_DATEADDED_DESCENDING</code></td>
      <td>12</td>
      <td>Sort by the descending added date order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_LASTMODIFIED_ASCENDING</code></td>
      <td>13</td>
      <td>Sort by the ascending last modified order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_LASTMODIFIED_DESCENDING</code></td>
      <td>14</td>
      <td>Sort by the descending last modified order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_TAGS_ASCENDING</code></td>
      <td>17</td>
      <td>Sort by the ascending tags order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_TAGS_DESCENDING</code></td>
      <td>18</td>
      <td>Sort by the descending tags order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_ANNOTATION_ASCENDING</code></td>
      <td>19</td>
      <td>Sort by the ascending annotation order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_ANNOTATION_DESCENDING</code></td>
      <td>20</td>
      <td>Sort by the descending annotation order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_FRECENCY_ASCENDING</code> </td>
      <td>21</td>
      <td>Sort by ascending frecency order.</td>
    </tr>
    <tr>
      <td><code>SORT_BY_FRECENCY_DESCENDING</code> </td>
      <td>22</td>
      <td>Sort by descending frecency order.</td>
    </tr>
  </tbody>
</table>
<h3 id="Result_type_constants">Result type constants</h3>
<table class="standard-table">
  <tbody>
    <tr>
      <td class="header">Constant</td>
      <td class="header">Value</td>
      <td class="header">Description</td>
    </tr>
    <tr>
      <td><code>RESULTS_AS_URI</code></td>
      <td>0</td>
      <td>"URI" results, one for each URI visited in the range. Individual result nodes will be of type "URI".</td>
    </tr>
    <tr>
      <td><code>RESULTS_AS_VISIT</code></td>
      <td>1</td>
      <td>"Visit" results, with one for each time a page was visited (this will often give you multiple results for one URI). Individual result nodes will have type "Visit".</td>
    </tr>
    <tr>
      <td><code>RESULTS_AS_FULL_VISIT</code></td>
      <td>2</td>
      <td>
        <p>This is identical to <code>RESULT_TYPE_VISIT</code> except that individual result nodes will have type "FullVisit". This is used for the attributes that are not commonly accessed to save space in the common case (the lists can be very long).</p>
        <div class="note">
          <strong>Note:</strong> Supported only for <code>QUERY_TYPE_HISTORY</code>.</div>
      </td>
    </tr>
    <tr>
      <td><code>RESULTS_AS_DATE_QUERY</code></td>
      <td>3</td>
      <td>
        <p>Returns <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryQueryResultNode" title="">nsINavHistoryQueryResultNode</a></code> nodes for each predefined date range where we had visits.</p>
        <div class="note">
          <strong>Note:</strong> Supported only for <code>QUERY_TYPE_HISTORY</code>.</div>
      </td>
    </tr>
    <tr>
      <td><code>RESULTS_AS_SITE_QUERY</code></td>
      <td>4</td>
      <td>
        <p>Returns <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryQueryResultNode" title="">nsINavHistoryQueryResultNode</a></code> nodes for each site where we have visits.</p>
        <div class="note">
          <strong>Note:</strong> Supported only for <code>QUERY_TYPE_HISTORY</code>.</div>
      </td>
    </tr>
    <tr>
      <td><code>RESULTS_AS_DATE_SITE_QUERY</code></td>
      <td>5</td>
      <td>
        <p>Returns <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryQueryResultNode" title="">nsINavHistoryQueryResultNode</a></code> nodes for each site where we have visits, grouped by date.</p>
        <div class="note">
          <strong>Note:</strong> Supported only for <code>QUERY_TYPE_HISTORY</code>.</div>
      </td>
    </tr>
    <tr>
      <td><code>RESULTS_AS_TAG_QUERY</code></td>
      <td>6</td>
      <td>
        <p>Returns <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryQueryResultNode" title="">nsINavHistoryQueryResultNode</a></code> nodes for each tag. Each tag node is a <code>RESULTS_AS_TAG_CONTENTS</code> container defined as <code>place:querytype=1&amp;resultType=7&amp;folder=tag_folder_id</code>.</p>
        <div class="note">
          <strong>Note:</strong> Using this result type forces the query type to be <code>QUERY_TYPE_BOOKMARKS</code>.</div>
      </td>
    </tr>
    <tr>
      <td><code>RESULTS_AS_TAG_CONTENTS</code></td>
      <td>7</td>
      <td>
        <p>Returns <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryResultNode" title="">nsINavHistoryResultNode</a></code> nodes for each bookmark contained into the defined tag. To specify the tag you need to add a <code>folder=tag_folder_id</code> to the query, and only one folder is allowed.</p>
        <div class="note">
          <strong>Note:</strong> Using this result type forces the query type to be <code>QUERY_TYPE_BOOKMARKS</code>. At this time, sorting methods are not supported; results will always be returned in reverse order of insertion.</div>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="Query_type_constants">Query type constants</h3>
<table class="standard-table">
  <tbody>
    <tr>
      <td class="header">Constant</td>
      <td class="header">Value</td>
      <td class="header">Description</td>
    </tr>
    <tr>
      <td><code>QUERY_TYPE_HISTORY</code></td>
      <td>0</td>
      <td>Query's type is history.</td>
    </tr>
    <tr>
      <td><code>QUERY_TYPE_BOOKMARKS</code></td>
      <td>1</td>
      <td>Query's type is bookmarks.</td>
    </tr>
    <tr>
      <td><code>QUERY_TYPE_UNIFIED</code></td>
      <td>2</td>
      <td>Query's type is unified.</td>
    </tr>
  </tbody>
</table>
<h3 id="Redirects_mode_constants">Redirects mode constants</h3>
<table class="standard-table">
  <tbody>
    <tr>
      <td class="header">Constant</td>
      <td class="header">Value</td>
      <td class="header">Description</td>
    </tr>
    <tr>
      <td><code>REDIRECTS_MODE_ALL</code></td>
      <td>0</td>
      <td>Include both redirected-from and redirected-to pages in the results. </td>
    </tr>
    <tr>
      <td><code>REDIRECTS_MODE_SOURCE</code></td>
      <td>1</td>
      <td>Include redirected-from pages but not redirected-to pages in the results. </td>
    </tr>
    <tr>
      <td><code>REDIRECTS_MODE_TARGET</code></td>
      <td>2</td>
      <td>Include redirected-to pages but not redirected-from pages in the results. </td>
    </tr>
  </tbody>
</table>
<h2 id="Methods" name="Methods">Methods</h2>
<h3 id="clone()" name="clone()">clone()</h3>
<p>This method creates a new options item with the same parameters of this one.</p>
<pre class="eval"> nsINavHistoryQueryOptions clone();
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<p>None.</p>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns the newly created cloned options.</p>
<h2 id="See_also" name="See_also">See also</h2>
<ul>
  <li><a href="/en/Places" title="en/Places">Places</a></li>
  <li><a href="/en/Using_the_Places_history_service" title="en/Using_the_Places_history_service">Using the Places history service</a></li>
  <li><a href="/en/Places_query_URIs" title="Places query URIs">Places query URIs</a></li>
  <li><a href="/en/Querying_Places" title="en/Querying_Places">Querying Places</a></li>
  <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService" title="">nsINavHistoryService</a></code></li>
</ul>
