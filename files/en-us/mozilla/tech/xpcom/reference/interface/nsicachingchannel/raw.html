<p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/netwerk/base/public/nsICachingChannel.idl" rel="custom">netwerk/base/public/nsICachingChannel.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

<i>Please add a summary to this article.</i>
</span>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheInfoChannel" title="">nsICacheInfoChannel</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)</span></div>
</div><p></p>
<p>This interface provides:</p>
<ol> <li>Support for "stream as file" semantics (for JAR and plugins).</li> <li>Support for "pinning" cached data in the cache (for printing and save-as).</li> <li>Support for uniquely identifying cached data in cases when the URL is insufficient. For example a HTTP form submission.</li>
</ol>
<p>A channel may optionally implement this interface to allow clients to affect its behavior with respect to how it uses the cache service.</p>
<h2 id="Method_overview" name="Method_overview">Method overview</h2>
<table class="standard-table"> <tbody> <tr> <td><code>boolean <a href="#isFromCache()">isFromCache</a>();</code> <span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)">Obsolete since Gecko 2.0</span></td> </tr> </tbody>
</table>
<h2 id="Attributes" name="Attributes">Attributes</h2>
<table class="standard-table"> <tbody> <tr> <td class="header">Attribute</td> <td class="header">Type</td> <td class="header">Description</td> </tr> <tr> <td><code>cacheAsFile</code></td> <td><code><a href="/en/boolean" title="en/boolean">boolean</a></code></td> <td>Specifies whether or not the data should be cached to a file. This may fail if the disk cache is not present. The value of this attribute is usually only settable during the processing of a channel's <code>OnStartRequest</code>. The default value of this attribute depends on the particular implementation of <code>nsICachingChannel</code>.</td> </tr> <tr> <td><code>cacheFile</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIFile" title="">nsIFile</a></code></td> <td>Get the "file" where the cached data can be found. This is valid for as long as a reference to the cache token is held. This may return an error if <code>cacheAsFile</code> is <code>false</code>. <strong>Read only.</strong></td> </tr> <tr> <td><code>cacheForOfflineUse</code></td> <td><code><a href="/en/boolean" title="en/boolean">boolean</a></code></td> <td>Specifies whether or not the data should be placed in the offline cache, in addition to normal memory/disk caching. This may fail if the offline cache is not present. The value of this attribute should be set before opening the channel. </td> </tr> <tr> <td><code>cacheKey</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code></td> <td> <p>Uniquely identifies the data in the cache for this channel. Holding a reference to this key does <strong>not</strong> prevent the cached data from being removed.</p> <p>A cache key retrieved from a particular instance of <code>nsICachingChannel</code> could be set on another instance of <code>nsICachingChannel</code> provided the underlying implementations are compatible and provided the new channel instance was created with the same URI. The implementation of <code>nsICachingChannel</code> would be expected to use the cache entry identified by the cache token. Depending on the value of <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIRequest#loadFlags()">nsIRequest.loadFlags()</a></code>, the cache entry may be validated, overwritten, or simply read.</p> The cache key may be <code>null</code> indicating that the URI of the channel is sufficient to locate the same cache entry. Setting a <code>null</code> cache key is likewise valid.</td> </tr> <tr> <td><code>cacheToken</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code></td> <td> <p>Uniquely identifies the data in the cache. Holding a reference to this token prevents the cached data from being removed.</p> <p>A cache token retrieved from a particular instance of <code>nsICachingChannel</code> could be set on another instance of <code>nsICachingChannel</code> provided the underlying implementations are compatible. The implementation of <code>nsICachingChannel</code> would be expected to only read from the cache entry identified by the cache token and not try to validate it.</p> The cache token can be <code>QueryInterface</code>'d to a <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheEntryInfo" title="">nsICacheEntryInfo</a></code> if more detail about the cache entry is needed. For example, expiration time.</td> </tr> <tr> <td><code>offlineCacheClientID</code></td> <td><code><a href="/en/ACString" title="en/ACString">ACString</a></code></td> <td>The session into which to cache offline data. If not specified, data will be placed in "HTTP-offline". </td> </tr> <tr> <td><code>offlineCacheToken</code></td> <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title="">nsISupports</a></code></td> <td>The same as <code>cacheToken</code> but accessing the offline app cache token if there is any.  <h6 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h6> <dl> <dt><code>NS_ERROR_NOT_AVAILABLE</code></dt> <dd>When there is not offline cache token.</dd> </dl> </td> </tr> </tbody>
</table>
<h2 id="Constants" name="Constants">Constants</h2>
<table class="standard-table"> <tbody> <tr> <td class="header">Constant</td> <td class="header">Value</td> <td class="header">Description</td> </tr> <tr> <td><code>LOAD_NO_NETWORK_IO</code></td> <td><code>1 &lt;&lt; 26</code></td> <td> <p>This load flag inhibits fetching from the net. An error of <code>NS_ERROR_DOCUMENT_NOT_CACHED</code> will be sent to the listener's <code>onStopRequest</code> if network IO is necessary to complete the request.</p> <p>This flag can be used to find out whether fetching this URL would cause validation of the cache entry via the network.</p> Combining this flag with <code>LOAD_BYPASS_LOCAL_CACHE</code> will cause all loads to fail. This flag differs from <code>LOAD_ONLY_FROM_CACHE</code> in that this flag fails the load if validation is required while <code>LOAD_ONLY_FROM_CACHE</code> skips validation where possible. </td> </tr> <tr> <td><code>LOAD_CHECK_OFFLINE_CACHE</code></td> <td><code>1 &lt;&lt; 27</code></td> <td> <p>This load flag causes the offline cache to be checked when fetching a request. It will be set automatically if the browser is offline.</p> This flag will not be transferred through a redirect. </td> </tr> <tr> <td><code>LOAD_BYPASS_LOCAL_CACHE</code></td> <td><code>1 &lt;&lt; 28</code></td> <td>This load flag causes the local cache to be skipped when fetching a request. Unlike <code>LOAD_BYPASS_CACHE</code>, it does not force an end-to-end load (That is, it does not affect proxy caches). </td> </tr> <tr> <td><code>LOAD_BYPASS_LOCAL_CACHE_IF_BUSY</code></td> <td><code>1 &lt;&lt; 29</code></td> <td>This load flag causes the local cache to be skipped if the request would otherwise block waiting to access the cache. </td> </tr> <tr> <td><code>LOAD_ONLY_FROM_CACHE</code></td> <td><code>1 &lt;&lt; 30</code></td> <td>This load flag inhibits fetching from the net if the data in the cache has been evicted. An error of <code>NS_ERROR_DOCUMENT_NOT_CACHED</code> will be sent to the listener's <code>onStopRequest</code> in this case. This flag is set automatically when the application is offline.</td> </tr> <tr> <td><code>LOAD_ONLY_IF_MODIFIED</code></td> <td><code>1 &lt;&lt; 31</code></td> <td> <p>This load flag controls what happens when a document would be loaded from the cache to satisfy a call to <code>AsyncOpen</code>. If this attribute is set to <code>true</code>, then the document will not be loaded from the cache. A stream listener can check <code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICachingChannel#isFromCache()">isFromCache()</a></code> to determine if the <code>AsyncOpen</code> will actually result in data being streamed.</p> If this flag has been set, and the request can be satisfied via the cache, then the <code>OnDataAvailable</code> events will be skipped. The listener will only see <code>OnStartRequest</code> followed by <code>OnStopRequest</code>.</td> </tr> </tbody>
</table>
<h2 id="Methods" name="Methods">Methods</h2>
<p></p><div class="headingWithIndicator">
        <h3 id="isFromCache()">isFromCache()</h3>
        <span class="indicatorInHeadline obsolete obsoleteMethod">Obsolete since Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)</span>
        </div><p></p>
<p>This method finds out whether or not this channel's data is being loaded from the cache.</p>
<pre class="eval">boolean isFromCache();
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<p>None.</p>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns <code>true</code> if this channel's data is being loaded from the cache, otherwise returns <code>false</code>. This value is undefined before the channel fires its <code>OnStartRequest</code> notification and after the channel fires its <code>OnStopRequest</code> notification.</p>
<h2 id="See_also" name="See_also">See also</h2>
<ul> <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICache" title="">nsICache</a></code></li>
</ul>