---
title: nsICacheService
slug: Mozilla/Tech/XPCOM/Reference/Interface/nsICacheService
tags:
  - Cache
  - Interfaces
  - 'Interfaces:Scriptable'
  - XPCOM
  - XPCOM API Reference
  - XPCOM Interface Reference
---
<p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;">
<div style="background: #eee; padding: 2px;"><code><a href="https://dxr.mozilla.org/mozilla-central/source/netwerk/cache/public/nsICacheService.idl" rel="custom">netwerk/cache/public/nsICacheService.idl</a></code><span style="text-align: right; float: right;"><a href="/en-US/docs/Interfaces/About_Scriptable_Interfaces" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div>
<span style="padding: 4px 2px;">

Handles visiting and evicting entries operations along with the creating of cache sessions and creation of temporary client IDs operations for offline caching.
</span>

  <div style="height: 42px; position: relative; padding: 2px; width: auto;">

  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">66</div>

<div style="height: 8px; top: 16px; left: 0%; background: #00dd00; position: absolute; width: 100%;" title="Introduced in Gecko 1.0 "></div>

<div style="top: 0px; font-size: 11px; position: absolute; left: 0%;">Introduced</div>
<div style="top: 22px; font-size: 11px; position: absolute; left: 0%;">Gecko 1.0</div>

    <div style="height: 8px; top: 16px; left: 10.928571428571429%; background: #eeee00; position: absolute; width: 1%; border-radius: 4px; -webkit-border-radius: 4px;" title="Last changed in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)"></div>

</div>

<div style="background: #eee; padding: 2px;">
Inherits from: <code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISupports" title>nsISupports</a></code>
<span style="text-align: right; float: right;">Last changed in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)</span></div>
</div><p></p>

<div class="warning notecard">
<p>This interface is no longer supported and planned to be removed soon: use nsICacheStorageService instead. At the time of writing there is no documentation for nsICacheStorageService but comments are available <a href="https://dxr.mozilla.org/mozilla-central/source/netwerk/cache2/nsICacheStorageService.idl">in the source</a>.</p>
</div>

<div class="note">
<p><strong>Note:</strong> Starting in <span title="(Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)">Gecko 2.0</span>, cache I/O is handled asynchronously.</p>
</div>

<h2 id="Method_overview" name="Method_overview">Method overview</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td><code>nsICacheSession <a href="#createSession()">createSession</a>(in string clientID, in nsCacheStoragePolicy storagePolicy, in boolean streamBased);</code></td>
  </tr>
  <tr>
   <td><code>ACString <a href="#createTemporaryClientID()">createTemporaryClientID</a>(in nsCacheStoragePolicy storagePolicy);</code>  <span title="This deprecated API should no longer be used, but will probably still work."><i class="icon-thumbs-down-alt"> </i></span> <span class="obsolete obsoleteInline notecard inline" title="(Firefox 3.6 / Thunderbird 3.1 / Fennec 1.0)">Obsolete since Gecko 1.9.2</span></td>
  </tr>
  <tr>
   <td><code>void <a href="#evictEntries()">evictEntries</a>(in nsCacheStoragePolicy storagePolicy);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#init()">init</a>();</code> <span class="obsolete obsoleteInline notecard inline" title="(Firefox 1.5 / Thunderbird 1.5 / SeaMonkey 1.0)">Obsolete since Gecko 1.8</span></td>
  </tr>
  <tr>
   <td><code>void <a href="#shutdown()">shutdown</a>();</code> <span class="obsolete obsoleteInline notecard inline" title="(Firefox 1.5 / Thunderbird 1.5 / SeaMonkey 1.0)">Obsolete since Gecko 1.8</span></td>
  </tr>
  <tr>
   <td><code>void <a href="#visitEntries()">visitEntries</a>(in nsICacheVisitor visitor);</code></td>
  </tr>
 </tbody>
</table>

<h2 id="Methods" name="Methods">Attributes</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Attribute</td>
   <td class="header">Type</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>cacheIOTarget</code></td>
   <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIEventTarget">nsIEventTarget</a></code></td>
   <td>The event target for cache I/O operation notifications. <strong>Read only.</strong></td>
  </tr>
 </tbody>
</table>

<h2 id="Methods" name="Methods">Methods</h2>

<h3 id="createSession()" name="createSession()">createSession()</h3>

<p>This method creates a cache session.</p>

<p>A cache session represents a client&apos;s access into the cache. The cache session is not &quot;owned&quot; by the cache service. Hence, it is possible to create duplicate cache sessions. Entries created by a cache session are invisible to other cache sessions, unless the cache sessions are equivalent.</p>

<pre class="eval">nsICacheSession createSession(
  in string clientID,
  in nsCacheStoragePolicy storagePolicy,
  in boolean streamBased
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>clientID</code></dt>
 <dd>Specifies the name of the client using the cache.</dd>
 <dt><code>storagePolicy</code></dt>
 <dd>Limits the storage policy for all entries accessed via the returned session. As a result, devices excluded by the storage policy will not be searched when opening entries from the returned session.</dd>
 <dt><code>streamBased</code></dt>
 <dd>Indicates whether or not the data being cached can be represented as a stream. The <code>storagePolicy</code> must be consistent with the value of this field. For example, a non-stream-based cache entry can only have a storage policy of <code>STORE_IN_MEMORY</code>.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns a new cache session.</p>

<p></p><h3 id="createTemporaryClientID()">createTemporaryClientID()</h3><p></p>

<p></p><div class="deprecated deprecatedHeader notecard">
            <p><strong><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span> Deprecated</strong><br>This feature is no longer recommended. Though some browsers might still support it, it may have already been removed from the relevant web standards, may be in the process of being dropped, or may only be kept for compatibility purposes. Avoid using it, and update existing code if possible; see the <a href="#Browser_compatibility">compatibility table</a> at the bottom of this page to guide your decision. Be aware that this feature may cease to work at any time.</p>
        </div><p></p>

<p></p><div class="obsolete obsoleteHeader notecard"><p><strong><span class="icon-only-inline" title="This is an obsolete API and is no longer guaranteed to work."><i class="icon-trash"> </i></span> Obsolete since Gecko 1.9.2 (Firefox 3.6 / Thunderbird 3.1 / Fennec 1.0)</strong><br>This feature is obsolete. Although it may still work in some browsers, its use is discouraged since it could be removed at any time. Try to avoid using it.</p></div><p></p>

<p>This method creates and returns a unique, temporary cache client ID.</p>

<p>This is used by the offline cache. The offline cache lets clients accumulate entries in a temporary client and merge them in as a group using <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIOfflineCacheSession#mergeTemporaryClient()">nsIOfflineCacheSession.mergeTemporaryClient()</a></code>.</p>

<pre class="eval">ACString createTemporaryClientID(
  in nsCacheStoragePolicy storagePolicy
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>storagePolicy</code></dt>
 <dd>The cache storage policy.</dd>
</dl>

<h6 id="Return_value" name="Return_value">Return value</h6>

<p>Returns a newly created unique, temporary cache client ID.</p>

<h6 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h6>

<dl>
 <dt><code>NS_ERROR_NOT_IMPLEMENTED</code></dt>
 <dd>This method is deprecated.</dd>
</dl>

<h3 id="evictEntries()" name="evictEntries()">evictEntries()</h3>

<p>This method evicts all entries in all devices implied by the storage policy.</p>

<p></p><div class="note notecard"><strong>Note:</strong> This function may evict some items but will throw if it fails to evict everything.</div><p></p>

<pre class="eval">void evictEntries(
  in nsCacheStoragePolicy storagePolicy
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>storagePolicy</code></dt>
 <dd>The cache storage policy.</dd>
</dl>

<p></p><div class="headingWithIndicator">
        <h3 id="init()">init()</h3>
        <span class="obsolete obsoleteMethod notecard inline">Obsolete since Gecko 1.8 (Firefox 1.5 / Thunderbird 1.5 / SeaMonkey 1.0)</span>
        </div><p></p>

<p>Initialize the cache service.</p>

<pre class="eval">void init();
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<p>None.</p>

<h6 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h6>

<dl>
 <dt><code>Missing Exception</code></dt>
 <dd>Missing Description</dd>
</dl>

<p></p><div class="headingWithIndicator">
        <h3 id="shutdown()">shutdown()</h3>
        <span class="obsolete obsoleteMethod notecard inline">Obsolete since Gecko 1.8 (Firefox 1.5 / Thunderbird 1.5 / SeaMonkey 1.0)</span>
        </div><p></p>

<p><code><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheService#Shutdown()">Shutdown()</a></code> the cache service.</p>

<pre class="eval">void shutdown();
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<p>None.</p>

<h3 id="visitEntries()" name="visitEntries()">visitEntries()</h3>

<p>This method visits entries stored in the cache. Used to implement the <code>about:cache</code> URI.</p>

<pre class="eval">void visitEntries(
  in nsICacheVisitor visitor
);
</pre>

<h6 id="Parameters" name="Parameters">Parameters</h6>

<dl>
 <dt><code>visitor</code></dt>
 <dd>The entry to be visited.</dd>
</dl>

<h2 id="See_also" name="See_also">See also</h2>

<ul>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICache">nsICache</a></code></li>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsISimpleEnumerator">nsISimpleEnumerator</a></code></li>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheListener">nsICacheListener</a></code></li>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheSession">nsICacheSession</a></code></li>
 <li><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsICacheVisitor">nsICacheVisitor</a></code></li>
</ul>
