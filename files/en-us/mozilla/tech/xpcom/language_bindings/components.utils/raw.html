<p><code><a href="/en-US/docs/Components_object">Components</a>.utils</code> is a collection of various useful XPConnect features. Its interface is defined at <code><a href="https://dxr.mozilla.org/mozilla-central/source/js/xpconnect/idl/xpccomponents.idl" rel="custom">js/xpconnect/idl/xpccomponents.idl</a></code>.</p>

<p>The object currently has the following members:</p>

<p><span class="comment">EDITORS! please keep this list in sync with the <a href="/en/Components_object" title="en/Components object">Components object</a> page</span></p>

<h2 id="Methods">Methods</h2>

<table class="fullwidth-table">
 <tbody>
  <tr>
   <th>Method</th>
   <th>Description</th>
  </tr>
  <tr>
   <td><a href="/en-US/docs/Components.utils.cloneInto"><code>cloneInto()</code></a></td>
   <td> Create a <a href="/en-US/docs/Web/Guide/API/DOM/The_structured_clone_algorithm">structured clone</a> of an object in a different JavaScript context.</td>
  </tr>
  <tr>
   <td><code>createArrayIn()</code></td>
   <td>
    <div class="note">
    <p>Removed in Gecko 31</p>
    </div>

    <p> Returns an array created in specified compartment.</p>
   </td>
  </tr>
  <tr>
   <td><a href="/en/Components.utils.createObjectIn" title="en/Components.utils.createObjectIn"><code>createObjectIn()</code></a></td>
   <td> Creates a new object, created in the scope of the specified object's compartment.</td>
  </tr>
  <tr>
   <td><code>dispatch()</code></td>
   <td> Dispatches a runnable to the current/main thread. If the parameter is passed, the runnable will be dispatch in the compartment of the parameter, which affects which error reporter gets called.</td>
  </tr>
  <tr>
   <td><code><a href="/en/Components.utils.evalInSandbox" title="en/Components.utils.evalInSandbox">evalInSandbox()</a></code></td>
   <td>Runs JavaScript code in a sandbox, usually used to run code with restricted privileges.</td>
  </tr>
  <tr>
   <td><code><a href="/en-US/docs/Components.utils.evalInWindow">evalInWindow()</a></code></td>
   <td>
    <div class="note">
    <p>Removed in Gecko 34.</p>
    </div>

    <p> Evaluate JavaScript code in a less-privileged JavaScript context.</p>
   </td>
  </tr>
  <tr>
   <td><a href="/en-US/docs/Components.utils.exportFunction"><code>exportFunction()</code></a></td>
   <td> Export a JavaScript function from a more-privileged to a less-privileged scope, allowing it to be called in the less-privileged scope.</td>
  </tr>
  <tr>
   <td><code><a href="/en/Components.utils.forceGC" title="en/Components.utils.forceGC">forceGC()</a></code></td>
   <td> Forces a garbage collection cycle.</td>
  </tr>
  <tr>
   <td><code>forceCC()</code></td>
   <td> Forces a cycle collection cycle.</td>
  </tr>
  <tr>
   <td><code>forceShrinkingGC()</code></td>
   <td> Forces a shrinking garbage collection cycle.</td>
  </tr>
  <tr>
   <td><code>getComponentsForScope()</code></td>
   <td> This seemingly-paradoxical API allows privileged code to explicitly give <span class="difflineplus">unprivileged code a reference to its own Components object (whereas it's </span><span class="difflineplus">normally hidden away on a scope chain visible only to XBL methods). See</span><span class="difflineplus"> also SpecialPowers.getComponents.</span></td>
  </tr>
  <tr>
   <td><code><a href="/en/Components.utils.getGlobalForObject" title="en/Components.utils.getGlobalForObject">getGlobalForObject()</a></code></td>
   <td> Returns the global object with which a given object is associated (through its prototype chain at birth, for example).</td>
  </tr>
  <tr>
   <td><code>getJSTestingFunctions()</code></td>
   <td></td>
  </tr>
  <tr>
   <td><a href="/en-US/docs/Components.utils.getObjectPrincipal"><code>getObjectPrincipal()</code></a></td>
   <td>Gets the <a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIPrincipal"><code>nsIPrincipal</code></a> for the given JavaScript object.</td>
  </tr>
  <tr>
   <td><code><a href="/en/Components.utils.getWeakReference" title="en/Components.utils.getWeakReference">getWeakReference()</a></code></td>
   <td> Gets a weak reference for the object passed in.</td>
  </tr>
  <tr>
   <td><code><a href="/en/Components.utils.import" title="en/Components.utils.import">import()</a></code></td>
   <td> Loads a JS module into the current script, without sharing a scope.</td>
  </tr>
  <tr>
   <td><code><a href="/en-US/docs/Components.utils.importGlobalProperties">importGlobalProperties()</a></code></td>
   <td> Specify a list of constructors to import into the scope.</td>
  </tr>
  <tr>
   <td><code><a href="/en-US/docs/Components.utils.isXrayWrapper">isXrayWrapper()</a></code></td>
   <td> Test whether a given object is an <a href="/en-US/docs/Xray_vision">Xray</a> or not.</td>
  </tr>
  <tr>
   <td><code><a href="/en/Components.utils.unload" title="en/Components.utils.unload">unload()</a></code></td>
   <td> Unloads a JS module loaded with <a href="/en/Components.utils.import" title="en/Components.utils.import">import()</a>.</td>
  </tr>
  <tr>
   <td><code>isDeadWrapper()</code></td>
   <td> Determines whether this object is backed by a DeadObjectProxy.</td>
  </tr>
  <tr>
   <td><code>lookupMethod()</code></td>
   <td>Looks up a native (i.e. declared in the interface) method or property of an XPCOM object. Serves the same purpose as <a href="/en/XPCNativeWrapper" title="en/XPCNativeWrapper">XPCNativeWrapper</a>.</td>
  </tr>
  <tr>
   <td><a href="/en/Components.utils.makeObjectPropsNormal" title="en/Components.utils.makeObjectPropsNormal"><code>makeObjectPropsNormal()</code></a></td>
   <td>Ensures that all functions come from the specified object's scope, and aren't cross-compartment wrappers. May only be called from JavaScript code. </td>
  </tr>
  <tr>
   <td><code>nondeterministicGetWeakMapKeys()</code></td>
   <td>
    <p>Return the keys in a weak map. This operation is non-deterministic because it is affected by the scheduling of the garbage collector and the cycle collector. This should only be used to write tests of the interaction of the GC and CC with weak maps. </p>

    <p><span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 45 / Thunderbird 45 / SeaMonkey 2.42)">Obsolete since Gecko 45</span> the function was moved to <code>ThreadSafeChromeUtils </code></p>
   </td>
  </tr>
  <tr>
   <td><code>nukeSandbox()</code></td>
   <td></td>
  </tr>
  <tr>
   <td><code>recomputeWrappers()</code></td>
   <td>To be called from JS only. This is for Gecko internal use only, and may disappear at any moment.</td>
  </tr>
  <tr>
   <td><code><a href="/en/Components.utils.reportError" title="en/Components.utils.reportError">reportError()</a></code></td>
   <td>Reports a JavaScript Error object to the <a href="/en/Error_Console" title="en/Error_Console">Error Console</a>.</td>
  </tr>
  <tr>
   <td><code>setWantXrays()</code></td>
   <td> To be called from JS only. This is for Gecko internal use only, and may disappear at any moment.</td>
  </tr>
  <tr>
   <td><a href="/en/Components.utils.schedulePreciseGC" title="en/Components.utils.schedulePreciseGC"><code>schedulePreciseGC()</code></a></td>
   <td>Schedules a garbage collection cycle for some time in the future at which no JavaScript code is running. This lets you specify a callback so you can be notified once the garbage collection cycle has been performed. </td>
  </tr>
  <tr>
   <td><a href="/en/Components.utils.setGCZeal" title="en/Components.utils.setGCZeal"><code>setGCZeal()</code></a></td>
   <td>Sets the level of garbage collection level for full garbage collection. See <a href="/en-US/docs/Mozilla/Projects/SpiderMonkey/JSAPI_reference/JS_SetGCZeal" title="JS_SetGCZeal sets the level of additional garbage collection to perform for a runtime, for the purpose of finding or reproducing bugs."><code>JS_SetGCZeal</code></a> for details; this method calls through to that with the specified value as the <code>zeal</code> value. </td>
  </tr>
  <tr>
   <td><code><a href="/en-US/docs/Components.utils.unwaiveXrays">unwaiveXrays()</a></code></td>
   <td>Undoes <a href="/en-US/docs/Components.utils.waiveXrays"><code>waiveXrays()</code></a>: reapplies the <a href="/en-US/docs/Xray_vision">Xray</a> filtering protection.</td>
  </tr>
  <tr>
   <td><code><a href="/en-US/docs/Components.utils.waiveXrays">waiveXrays()</a></code></td>
   <td>Removes the filtering provided by an <a href="/en-US/docs/Xray_vision">Xray</a>.</td>
  </tr>
 </tbody>
</table>

<h2 id="Properties">Properties</h2>

<table class="standard-table" style="width: auto;">
 <tbody>
  <tr>
   <td class="header">Property</td>
   <td class="header">Type</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code><a href="/en/Components.utils.Sandbox" title="en/Components.utils.Sandbox">Sandbox</a></code></td>
   <td><code><a href="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXPCComponents_utils_Sandbox" title="">nsIXPCComponents_utils_Sandbox</a></code></td>
   <td>Creates sandbox objects for use with <code>evalInSandbox()</code>.</td>
  </tr>
  <tr>
   <td><code>ion</code> </td>
   <td><code>Boolean</code></td>
   <td><strong>Read only.</strong></td>
  </tr>
  <tr>
   <td><code>strict</code> </td>
   <td><code>Boolean</code></td>
   <td>Strict mode is enabled. This reflects the value of the <a href="/en/Introduction_to_the_JavaScript_shell#options%28.5Boption_....5D%29" title="https://developer.mozilla.org/en/Introduction_to_the_JavaScript_shell#options%28.5Boption_....5D%29">JavaScript environment's option</a> by the same name.<strong> Read only.</strong></td>
  </tr>
  <tr>
   <td><code>strict_mode</code> </td>
   <td><code>Boolean</code></td>
   <td><strong>Read only.</strong></td>
  </tr>
  <tr>
   <td><code>werror</code> </td>
   <td><code>Boolean</code></td>
   <td>Warnings should be treated as errors. This reflects the value of the <a href="/en/Introduction_to_the_JavaScript_shell#options%28.5Boption_....5D%29" title="https://developer.mozilla.org/en/Introduction_to_the_JavaScript_shell#options%28.5Boption_....5D%29">JavaScript environment's option</a> by the same name.<strong> Read only.</strong></td>
  </tr>
 </tbody>
</table>

<p> </p>