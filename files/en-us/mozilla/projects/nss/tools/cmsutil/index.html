---
title: 'NSS tools : cmsutil'
slug: Mozilla/Projects/NSS/Tools/cmsutil
---
<p>Name<br>
<br>
&nbsp;&nbsp; cmsutil â€” Performs basic cryptograpic operations, such as encryption and<br>
&nbsp;&nbsp; decryption, on Cryptographic Message Syntax (CMS) messages.<br>
<br>
Synopsis<br>
<br>
&nbsp;&nbsp; cmsutil [options] <a href="arguments">arguments</a><br>
<br>
Description<br>
<br>
&nbsp;&nbsp; The cmsutil command-line uses the S/MIME Toolkit to perform basic<br>
&nbsp;&nbsp; operations, such as encryption and decryption, on Cryptographic Message<br>
&nbsp;&nbsp; Syntax (CMS) messages.<br>
<br>
&nbsp;&nbsp; To run cmsutil, type the command cmsutil option [arguments] where option<br>
&nbsp;&nbsp; and arguments are combinations of the options and arguments listed in the<br>
&nbsp;&nbsp; following section. Each command takes one option. Each option may take<br>
&nbsp;&nbsp; zero or more arguments. To see a usage string, issue the command without<br>
&nbsp;&nbsp; options.<br>
<br>
Options and Arguments<br>
<br>
&nbsp;&nbsp; Options<br>
<br>
&nbsp;&nbsp; Options specify an action. Option arguments modify an action. The options<br>
&nbsp;&nbsp; and arguments for the cmsutil command are defined as follows:<br>
<br>
&nbsp;&nbsp; -D<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Decode a message.<br>
<br>
&nbsp;&nbsp; -C<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Encrypt a message.<br>
<br>
&nbsp;&nbsp; -E<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Envelope a message.<br>
<br>
&nbsp;&nbsp; -O<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Create a certificates-only message.<br>
<br>
&nbsp;&nbsp; -S<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sign a message.<br>
<br>
&nbsp;&nbsp; Arguments<br>
<br>
&nbsp;&nbsp; Option arguments modify an action and are lowercase.<br>
<br>
&nbsp;&nbsp; -c content<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Use this detached content (decode only).<br>
<br>
&nbsp;&nbsp; -d dbdir<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Specify the key/certificate database directory (default is ".")<br>
<br>
&nbsp;&nbsp; -e envfile<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Specify a file containing an enveloped message for a set of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; recipients to which you would like to send an encrypted message.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; If this is the first encrypted message for that set of recipients,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; a new enveloped message will be created that you can then use for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; future messages (encrypt only).<br>
<br>
&nbsp;&nbsp; -G<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Include a signing time attribute (sign only).<br>
<br>
&nbsp;&nbsp; -h num<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Generate email headers with info about CMS message (decode only).<br>
<br>
&nbsp;&nbsp; -i infile<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Use infile as a source of data (default is stdin).<br>
<br>
&nbsp;&nbsp; -N nickname<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Specify nickname of certificate to sign with (sign only).<br>
<br>
&nbsp;&nbsp; -n<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Suppress output of contents (decode only).<br>
<br>
&nbsp;&nbsp; -o outfile<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Use outfile as a destination of data (default is stdout).<br>
<br>
&nbsp;&nbsp; -P<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Include an S/MIME capabilities attribute.<br>
<br>
&nbsp;&nbsp; -p password<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Use password as key database password.<br>
<br>
&nbsp;&nbsp; -r recipient1,recipient2, ...<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Specify list of recipients (email addresses) for an encrypted or<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enveloped message. For certificates-only message, list of<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; certificates to send.<br>
<br>
&nbsp;&nbsp; -T<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Suppress content in CMS message (sign only).<br>
<br>
&nbsp;&nbsp; -u certusage<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Set type of cert usage (default is certUsageEmailSigner).<br>
<br>
&nbsp;&nbsp; -Y ekprefnick<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Specify an encryption key preference by nickname.<br>
<br>
Usage<br>
<br>
&nbsp;&nbsp; Encrypt Example<br>
<br>
&nbsp;cmsutil -C [-i infile] [-o outfile] [-d dbdir] [-p password] -r "recipient1,recipient2, . . ." -e envfile<br>
<br>
<br>
&nbsp;&nbsp; Decode Example<br>
<br>
&nbsp;cmsutil -D [-i infile] [-o outfile] [-d dbdir] [-p password] [-c content] [-n] [-h num]<br>
<br>
<br>
&nbsp;&nbsp; Envelope Example<br>
<br>
&nbsp;cmsutil -E [-i infile] [-o outfile] [-d dbdir] [-p password] -r "recipient1,recipient2, ..."<br>
<br>
<br>
&nbsp;&nbsp; Certificate-only Example<br>
<br>
&nbsp;cmsutil -O [-i infile] [-o outfile] [-d dbdir] [-p password] -r "cert1,cert2, . . ."<br>
<br>
<br>
&nbsp;&nbsp; Sign Message Example<br>
<br>
&nbsp;cmsutil -S [-i infile] [-o outfile] [-d dbdir] [-p password] -N nickname[-TGP] [-Y ekprefnick]<br>
<br>
<br>
See also<br>
<br>
&nbsp;&nbsp; certutil(1)<br>
<br>
See Also<br>
<br>
Additional Resources<br>
<br>
&nbsp;&nbsp; NSS is maintained in conjunction with PKI and security-related projects<br>
&nbsp;&nbsp; through Mozilla dn Fedora. The most closely-related project is Dogtag PKI,<br>
&nbsp;&nbsp; with a project wiki at [1]<a class=" external" href="http://pki.fedoraproject.org/wiki/">http://pki.fedoraproject.org/wiki/</a>.<br>
<br>
&nbsp;&nbsp; For information specifically about NSS, the NSS project wiki is located at<br>
&nbsp;&nbsp; [2]<a class=" external" href="https://www.mozilla.org/projects/security/pki/nss/">http://www.mozilla.org/projects/security/pki/nss/</a>. The NSS site relates<br>
&nbsp;&nbsp; directly to NSS code changes and releases.<br>
<br>
&nbsp;&nbsp; Mailing lists: <a class=" link-mailto" href="mailto:pki-devel@redhat.com">pki-devel@redhat.com</a> and <a class=" link-mailto" href="mailto:pki-users@redhat.com">pki-users@redhat.com</a><br>
<br>
&nbsp;&nbsp; IRC: Freenode at #dogtag-pki<br>
<br>
Authors<br>
<br>
&nbsp;&nbsp; The NSS tools were written and maintained by developers with Netscape and<br>
&nbsp;&nbsp; now with Red Hat.<br>
<br>
&nbsp;&nbsp; Authors: Elio Maldonado &lt;<a class=" link-mailto" href="mailto:emaldona@redhat.com">emaldona@redhat.com</a>&gt;, Deon Lackey<br>
&nbsp;&nbsp; &lt;<a class=" link-mailto" href="mailto:dlackey@redhat.com">dlackey@redhat.com</a>&gt;.<br>
<br>
Copyright<br>
<br>
&nbsp;&nbsp; (c) 2010, Red Hat, Inc. Licensed under the GNU Public License version 2.<br>
<br>
References<br>
<br>
&nbsp;&nbsp; Visible links<br>
&nbsp;&nbsp; 1. <a class=" external" href="http://pki.fedoraproject.org/wiki/">http://pki.fedoraproject.org/wiki/</a><br>
&nbsp;&nbsp; 2. <a class=" external" href="https://www.mozilla.org/projects/security/pki/nss/">http://www.mozilla.org/projects/security/pki/nss/</a></p>
