<div>{{SpiderMonkeySidebar("JSAPI")}}</div>

<p>{{ jsapi_minversion_header("1.8.5") }}</p>

<div class="summary">
<p>Write a string into buffer with escaping.</p>
</div>

<h2 id="Syntax" name="Syntax">Syntax</h2>

<pre class="brush: cpp">size_t
JS_PutEscapedString(JSContext *cx, char *buffer, size_t size,
                    JSString *str, char quote);

size_t
JS_PutEscapedFlatString(char *buffer, size_t size, JSFlatString *str,
                        char quote);
</pre>

<table class="fullwidth-table">
 <tbody>
  <tr>
   <th>Name</th>
   <th>Type</th>
   <th>Description</th>
  </tr>
  <tr>
   <td><code>cx</code></td>
   <td>{{jsapixref("JSRuntime", "JSContext *")}}</td>
   <td>A context. {{ Jsapi-requires-request() }}</td>
  </tr>
  <tr>
   <td><code>buffer</code></td>
   <td><code>char *</code></td>
   <td>A pointer to char buffer to write into.</td>
  </tr>
  <tr>
   <td><code>size</code></td>
   <td><code>size_t</code></td>
   <td>The size of <code>buffer</code> in bytes.</td>
  </tr>
  <tr>
   <td><code>str</code></td>
   <td>{{jsapixref("JSString", "JSString *")}} <em>or</em> {{jsapixref("JSString", "JSFlatString *")}}</td>
   <td>A string to write into the file.</td>
  </tr>
  <tr>
   <td><code>quote</code></td>
   <td><code>char</code></td>
   <td>One of 0, single quote, and double quote.</td>
  </tr>
 </tbody>
</table>

<h2 id="Description" name="Description">Description</h2>

<p><code>JS_PutEscapedString</code> and <code>JS_PutEscapedString</code> write <code>str</code> into <code>buffer</code> escaping any non-printable or non-ASCII character using <code>\escapes</code> for JS string literals. Guarantees that a NUL is at the end of the buffer unless size is 0. Returns the length of the written output, NOT including the NUL. Thus, a return value of size or more means that the output was truncated. If buffer is <code>null</code>, just returns the length of the output. If quote is not 0, it must be a single or double quote character that will quote the output.</p>

<h2 id="See_Also" name="See_Also">See Also</h2>

<ul>
 <li>{{ LXRSearch("ident", "i", "JS_PutEscapedString") }}</li>
 <li>{{ LXRSearch("ident", "i", "JS_PutEscapedFlatString") }}</li>
 <li>{{bug(609440)}}</li>
</ul>