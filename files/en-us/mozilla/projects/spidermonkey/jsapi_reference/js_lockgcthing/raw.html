<div>{{SpiderMonkeySidebar("JSAPI")}}</div>
<p>{{ obsolete_header("jsapi22") }}</p>
<div class="summary">
<p>Protect a specified JS item from garbage collection.</p>
</div>
<h2 id="Syntax" name="Syntax">Syntax</h2>
<pre class="brush: cpp">JSBool
JS_LockGCThing(JSContext *cx, void *thing); // Obsolete since JSAPI 21

JSBool
JS_UnlockGCThing(JSContext *cx, void *thing); // Obsolete since JSAPI 21

JSBool
JS_LockGCThingRT(JSRuntime *rt, void *thing);

JSBool
JS_UnlockGCThingRT(JSRuntime *rt, void *thing);
</pre>
<table class="fullwidth-table">
 <tbody>
  <tr>
   <th>Name</th>
   <th>Type</th>
   <th>Description</th>
  </tr>
  <tr>
   <td><code>cx</code></td>
   <td>{{jsapixref("JSRuntime", "JSContext *")}}</td>
   <td>A context. {{ Jsapi-requires-request() }}</td>
  </tr>
  <tr>
   <td><code>rt</code></td>
   <td>{{jsapixref("JSRuntime", "JSRuntime *")}}</td>
   <td>A runtime.</td>
  </tr>
  <tr>
   <td><code>thing</code></td>
   <td><code>void *</code></td>
   <td>Pointer to the item to protect.</td>
  </tr>
 </tbody>
</table>
<h2 id="Description" name="Description">Description</h2>
<p><code>JS_LockGCThing</code> is a deprecated function that protects a specified item, <code>thing</code>, associated with an executable script context, <code>cx</code>, from garbage collection. <code>thing</code> is a pointer to a {{jsapixref("jsdouble")}}, {{jsapixref("JSString")}}, or {{jsapixref("JSObject")}}.</p>
<p><code>JS_UnlockGCThing</code> removes a lock from a specified item, <code>thing</code>, allowing it to be garbage collected when the JavaScript engine determines it is unreachable.</p>
<p><code>JS_LockGCThing</code> and <code>JS_UnlockGCThing</code> are available only for backward compatibility with existing applications. Use {{jsapixref("JS_AddRoot")}} and {{jsapixref("JS_RemoveRoot")}} instead.</p>
<h2 id="See_Also" name="See_Also">See Also</h2>
<ul>
  <li>{{bug(734250)}} - removed <code>*RT</code> functions</li>
<li>{{bug(706885)}}</li>
</ul>