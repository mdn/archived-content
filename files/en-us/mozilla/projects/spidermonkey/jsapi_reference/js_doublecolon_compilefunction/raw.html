<div>{{SpiderMonkeySidebar("JSAPI")}}</div>

<p>{{ Jsapi_minversion_header("17") }}</p>

<div class="summary">
<p>Create a JavaScript function from a text string.</p>
</div>

<h2 id="Syntax" name="Syntax">Syntax</h2>

<pre class="brush: cpp">bool
JS::CompileFunction(JSContext *cx, JS::AutoObjectVector &amp;scopeChain,
                    const JS::ReadOnlyCompileOptions &amp;options,
                    const char *name, unsigned nargs, const char *const *argnames,
                    const char16_t *chars, size_t length, JS::MutableHandleFunction fun);

bool
JS::CompileFunction(JSContext *cx, JS::AutoObjectVector &amp;scopeChain,
                    const JS::ReadOnlyCompileOptions &amp;options,
                    const char *name, unsigned nargs, const char *const *argnames,
                    JS::SourceBufferHolder &amp;srcBuf, JS::MutableHandleFunction fun);

bool
JS::CompileFunction(JSContext *cx, JS::AutoObjectVector &amp;scopeChain,
                    const JS::ReadOnlyCompileOptions &amp;options,
                    const char *name, unsigned nargs, const char *const *argnames,
                    const char *bytes, size_t length, JS::MutableHandleFunction fun);
</pre>

<table class="fullwidth-table">
 <tbody>
  <tr>
   <th>Name</th>
   <th>Type</th>
   <th>Description</th>
  </tr>
  <tr>
   <td><code>cx</code></td>
   <td>{{jsapixref("JSRuntime", "JSContext *")}}</td>
   <td>The context in which to compile the function. {{ Jsapi-requires-request() }}</td>
  </tr>
  <tr>
   <td><code>scopeChain</code></td>
   <td>{{jsapixref("JS::AutoObjectVector", "JS::AutoObjectVector &amp;")}}</td>
   <td>The scope in which to compile the function.</td>
  </tr>
  <tr>
   <td><code>options</code></td>
   <td>{{jsapixref("JS::CompileOptions", "JS::ReadOnlyCompileOptions &amp;")}}</td>
   <td>Compile options.</td>
  </tr>
  <tr>
   <td><code>name</code></td>
   <td><code>const char *</code></td>
   <td>Name to assign the newly compiled function.</td>
  </tr>
  <tr>
   <td><code>nargs</code></td>
   <td><code>unsigned</code></td>
   <td>Number of arguments to pass to the function.</td>
  </tr>
  <tr>
   <td><code>argnames</code></td>
   <td><code>const char *const *</code></td>
   <td>Names to assign to the arguments passed to the function.</td>
  </tr>
  <tr>
   <td><code>chars</code></td>
   <td><code>const char16_t *</code></td>
   <td>String containing the body of the function to compile.</td>
  </tr>
  <tr>
   <td><code>bytes</code></td>
   <td><code>const char *</code></td>
   <td>String containing the body of the function to compile.</td>
  </tr>
  <tr>
   <td><code>length</code></td>
   <td><code>size_t</code></td>
   <td>The length, in characters, of <code>body</code>.</td>
  </tr>
  <tr>
   <td><code>srcBuf</code></td>
   <td>{{jsapixref("JS::SourceBufferHolder", "JS::SourceBufferHolder &amp;")}}</td>
   <td>Source buffer containing the script function compile.</td>
  </tr>
  <tr>
   <td><code>fun</code></td>
   <td>{{jsapixref("JSFunction", "JS::MutableHandleFunction")}}</td>
   <td>Out parameter. On success, <code>fun</code> receives the result function.</td>
  </tr>
 </tbody>
</table>

<h2 id="Description" name="Description">Description</h2>

<p><strong><code>JS::CompileFunction</code></strong> compiles a function from a text string <code>chars</code>, <code>bytes</code>, or <code>srcBuf</code>.</p>

<p><code>name</code> is the name to assign to the newly created function. <code>nargs</code> is the number of arguments the function takes, and <code>argnames</code> is a pointer to the first element of an array of names to assign each argument. The number of argument names should match the number of arguments specified in <code>nargs</code>.</p>

<p><code>chars</code>, <code>bytes</code>, or <code>srcBuf</code> is a string containing the source code of the function. <code>length</code> is the length of the source code in characters.</p>

<p>On success, <code>JS::CompileFunction</code> stores an function object representing the newly compiled function into <code>fun</code> and and returns <code>true</code>. Otherwise, it returns <code>false</code> and the value left in <code>fun</code> is undefined.</p>

<h2 id="See_Also" name="See_Also">See Also</h2>

<ul>
 <li>The <a href="/en-US/docs/Mozilla/Projects/SpiderMonkey/JSAPI_User_Guide#Compiled_scripts">JSAPI User Guide</a> contains example code using compiled scripts.</li>
 <li>{{ LXRSearch("ident", "i", "JS::CompileFunction") }}</li>
 <li>{{jsapixref("JS::Evaluate")}}</li>
 <li>{{jsapixref("JS::Compile")}}</li>
 <li>{{jsapixref("JS::CompileOffThread")}}</li>
 <li>{{jsapixref("JS_ExecuteScript")}}</li>
 <li>{{jsapixref("JS_DecompileScript")}}</li>
 <li>{{bug(771705)}}</li>
</ul>