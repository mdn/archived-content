<div>
 {{SpiderMonkeySidebar("JSAPI")}}</div>
<div class="note">
 <strong>Note:</strong> <code>JS_NewString()</code> was removed in SpiderMonkey 1.8.5. Use {{jsapixref("JS_NewStringCopyN")}} and {{jsapixref("JS_NewStringCopyN", "JS_NewUCStringCopyN")}} instead.</div>
<h2 id="Syntax" name="Syntax">Syntax</h2>
<pre class="brush: cpp">JSString *
JS_NewUCString(JSContext *cx, char16_t *chars, size_t length);

JSString *
JS_NewString(JSContext *cx, char *buf, size_t length); // Obsolete since JSAPI 1.8.5
</pre>
<table class="fullwidth-table">
 <tbody>
  <tr>
   <th>Name</th>
   <th>Type</th>
   <th>Description</th>
  </tr>
  <tr>
   <td><code>cx</code></td>
   <td>{{jsapixref("JSRuntime", "JSContext *")}}</td>
   <td>The context in which to create the new string. {{ Jsapi-requires-request() }}</td>
  </tr>
  <tr>
   <td><code>buf</code></td>
   <td><code>char *</code> <em>or</em> <code>char16_t *</code></td>
   <td>Pointer to a character array, allocated with {{jsapixref("JS_malloc")}}, containing the characters for the JS string to create. The JavaScript engine adopts the buffer.</td>
  </tr>
  <tr>
   <td><code>length</code></td>
   <td><code>size_t</code></td>
   <td>Number of characters in the text string.</td>
  </tr>
 </tbody>
</table>
<h2 id="Description" name="Description">Description</h2>
<p><code>JS_NewString</code> creates and returns a new string, using the memory starting at <code>buf</code> and ending at <code>buf + length</code> as the character storage. <code>JS_NewUCString</code> is the Unicode version of the function.</p>
<p>The character array, <code>buf</code>, must be allocated on the heap using {{jsapixref("JS_malloc")}}. On success, the JavaScript engine adopts responsibility for memory management of this region. The application must not read, write, or free the buffer. This allows the JavaScript engine to avoid needless data copying.</p>
<p>On success, <code>JS_NewString</code> and <code>JS_NewUCString</code> return a pointer to the new string. On error or exception, they return <code>NULL</code>.</p>
<h2 id="See_Also" name="See_Also">See Also</h2>
<ul>
 <li>{{jsapixref("JS_ConvertValue")}}</li>
 <li>{{jsapixref("JS_GetEmptyStringValue")}}</li>
 <li>{{jsapixref("JS_GetStringBytes")}}</li>
 <li>{{jsapixref("JS_GetStringChars")}}</li>
 <li>{{jsapixref("JS_GetStringLength")}}</li>
 <li>{{jsapixref("JS_InternString")}}</li>
 <li>{{jsapixref("JS_InternString", "JS_InternUCString")}}</li>
 <li>{{jsapixref("JS_InternString", "JS_InternUCStringN")}}</li>
 <li>{{jsapixref("JS_NewStringCopyN")}}</li>
 <li>{{jsapixref("JS_NewStringCopyZ")}}</li>
 <li>{{jsapixref("JS_NewStringCopyN", "JS_NewUCStringCopyN")}}</li>
 <li>{{jsapixref("JS_NewStringCopyZ", "JS_NewUCStringCopyZ")}}</li>
 <li>{{jsapixref("JS_ValueToString")}}</li>
 <li>{{bug(618262)}} - removed <code>JS_NewString</code></li>
</ul>