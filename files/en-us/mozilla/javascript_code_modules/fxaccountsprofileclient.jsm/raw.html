<p>{{ gecko_minversion_header("34") }}</p>
<p>The <code>FxAccountsProfileClient.jsm</code> JavaScript module provides a way to fetch Firefox Accounts profile information. The modules uses the <a href="https://github.com/mozilla/fxa-profile-server/blob/master/docs/API.md">Firefox Profiler Server API</a>.</p>
<pre>Components.utils.import("resource://gre/modules/FxAccountsProfileClient.jsm");
</pre>
<h2 id="Creating_a_new_FxAccountsProfileClient">Creating a new FxAccountsProfileClient</h2>
<pre>new FxAccountsProfileClient(Object options);</pre>
<h2 id="Method_overview">Method overview</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td><span style="font-family: 'Courier New', 'Andale Mono', monospace;">fetchProfile();</span></td>
  </tr>
 </tbody>
</table>
<h2 id="Attributes" name="Attributes" style="line-height: 30px;">Attributes</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td><span style="font-family: 'Courier New', 'Andale Mono', monospace;">serverURL</span></td>
   <td><span style="font-family: 'Courier New', 'Andale Mono', monospace;">URL</span></td>
   <td>Profiler server URL.</td>
  </tr>
  <tr>
   <td><code>token</code></td>
   <td><font face="Courier New, Andale Mono, monospace">String</font></td>
   <td>Bearer token.</td>
  </tr>
 </tbody>
</table>
<h2 id="Constructor_FxAccountsProfileClient()">Constructor <span style="font-size: 2.142857142857143rem;">FxAccountsProfileClient()</span></h2>
<p>Creates and returns a new FxAccountsProfileClient object.</p>
<pre>FxAccountsProfileClient FxAccountsProfileClient(
  Object options
    String serverURL,
    String token
);
</pre>
<h6 id="Parameters">Parameters</h6>
<ul>
 <li><strong>serverURL</strong> - Firefox Profile server url.</li>
 <li><strong>token</strong> - Firefox Accounts OAuth Bearer token.</li>
</ul>
<h6 id="Return_value">Return value</h6>
<p>A newly created FxAccountsProfileClient object implementing the methods described in this article.</p>
<h2 id="Methods">Methods</h2>
<h3 id="fetchProfile()">fetchProfile()</h3>
<div>
 Fetches Firefox Accounts profile information.</div>
<h6 id="Parameters_2">Parameters</h6>
<dl>
 <dt>
  <font face="Courier New, Andale Mono, monospace">None</font></dt>
 <dt>
  <span style="font-size: 9px; line-height: 14.0699996948242px;">Return value</span></dt>
 <dt>
  <font face="Courier New, Andale Mono, monospace">Promise</font></dt>
 <dd>
  <span style="font-weight: normal; line-height: 1.5;">Resolves: <strong>Object</strong> - </span><span style="line-height: 1.5;">Successful response from the '/profile' endpoint.</span><br>
  <span style="line-height: 1.5;">Rejects: <strong>FxAccountsProfileClientError</strong></span><span style="line-height: 1.5;"> - Profile client error.</span></dd>
</dl>
<h2 id="Examples">Examples</h2>
<h3 id="Using_the_FxAccountsProfileClient">Using the FxAccountsProfileClient</h3>
<h4 id="Chrome_code">Chrome code</h4>
<pre>let client = new FxAccountsProfileClient({
  serverURL: "https://profile.accounts.firefox.com/v1",
  token: "FXA_OAUTH_BEARER_TOKEN",
});

client.fetchProfile().then(profile =&gt; console.log(profile));
</pre>
<h2 id="Error_Handling">Error Handling</h2>
<p>The <strong>FxAccountsProfileClient.jsm </strong>normalizes request and client errors into <strong>FxAccountsProfileClientError </strong>object.</p>
<h3 id="FxAccountsProfileClientError">FxAccountsProfileClientError</h3>
<p>Attributes</p>
<table class="standard-table">
 <tbody>
  <tr>
   <td><span style="font-family: 'Courier New', 'Andale Mono', monospace;">name</span></td>
   <td><span style="font-family: 'Courier New', 'Andale Mono', monospace;">String</span></td>
   <td>Name of the error <strong>FxAccountsProfileClientError</strong></td>
  </tr>
  <tr>
   <td><code>code</code></td>
   <td><font face="Courier New, Andale Mono, monospace">Number</font></td>
   <td>Status code of the request</td>
  </tr>
  <tr>
   <td><span style="font-family: 'Courier New', 'Andale Mono', monospace;">errno</span></td>
   <td><span style="font-family: 'Courier New', 'Andale Mono', monospace;">Number</span></td>
   <td>Error number</td>
  </tr>
  <tr>
   <td><font face="Courier New, Andale Mono, monospace">error</font></td>
   <td><span style="font-family: 'Courier New', 'Andale Mono', monospace;">String</span></td>
   <td>Error description</td>
  </tr>
  <tr>
   <td><span style="font-family: 'Courier New', 'Andale Mono', monospace;">message</span></td>
   <td><span style="font-family: 'Courier New', 'Andale Mono', monospace;">String</span></td>
   <td>Error message</td>
  </tr>
 </tbody>
</table>
<h2 id="See_also">See also</h2>
<ul>
 <li><a class="internal" href="/en-US/docs/JavaScript_code_modules/Using" title="en-US/docs/JavaScript code modules/Using JavaScript code modules">Using JavaScript code modules</a></li>
 <li><a class="internal" href="/en-US/docs/Mozilla/JavaScript_code_modules" title="en-US/docs/Mozilla/JavaScript code modules">JavaScript code modules</a></li>
 <li><a class="internal" href="/en-US/docs/Components.utils.import" title="en-US/docs/Components.utils.import"><code>Components.utils.import</code></a></li>
</ul>