<p>The searchBar class simplifies the access for the searchbar.</p>
<h2 id="Method_overview">Method overview</h2>
<table class="standard-table"> <tbody> <tr> <td><code><a href="#searchBar.28.29" title="#searchBar.28.29">searchBar</a>(in <a href="/en/Mozmill/Mozmill_Base_Object_Interfaces#mozmill.controller.MozMillController" title="en/Mozmill/Mozmill Base Object
            Interfaces#mozmill.controller.MozMillController">MozMillController</a> controller);</code></td> </tr> <tr> <td><code><a href="#checkSearchResultPage.28.29" title="#checkSearchResultPage.28.29">checkSearchResultPage</a>(in string searchTerm);</code></td> </tr> <tr> <td><code><a href="#clear.28.29" title="#clear.28.29">clear</a>();</code></td> </tr> <tr> <td><code><a href="#focus.28.29" title="#focus.28.29">focus</a>(in object event);</code></td> </tr> <tr> <td><code><a href="/en/Mozmill/Mozmill_Elements_Library_Object#Elem_Interface" title="en/Mozmill/Mozmill Elements Library Object#Elem
            Interface">ElemBase</a> <a href="#getElement.28.29" title="#getElement.28.29">getElement</a>(in object spec);</code></td> </tr> <tr> <td><code>array of string <a href="#getSearchSuggestions.28.29" title="#getSearchSuggestions.28.29">getSearchSuggestions</a>(in string searchTerm);</code></td> </tr> <tr> <td><code>boolean <a href="#isEngineInstalled.28.29" title="#isEngineInstalled.28.29">isEngineInstalled</a>(in string name);</code></td> </tr> <tr> <td><code><a href="#openEngineManager.28.29" title="#openEngineManager.28.29">openEngineManager</a>(in func_ptr handler);</code></td> </tr> <tr> <td><code><a href="#removeEngine.28.29" title="#removeEngine.28.29">removeEngine</a>(in string name);</code></td> </tr> <tr> <td><code><a href="#restoreDefaultEngines.28.29" title="#restoreDefaultEngines.28.29">restoreDefaultEngines</a>();</code></td> </tr> <tr> <td><code><a href="#search.28.29" title="#search.28.29">search</a>(in object data);</code></td> </tr> <tr> <td><code><a href="#type.28.29" title="#type.28.29">type</a>(in string searchTerm);</code></td> </tr> </tbody>
</table>
<h2 id="Attributes">Attributes</h2>
<table class="standard-table"> <tbody> <tr> <th scope="col">Attribute</th> <th scope="col">Type</th> <th scope="col">Description</th> </tr> <tr> <td><code>controller</code></td> <td><code><a href="/en/Mozmill/Mozmill_Base_Object_Interfaces#mozmill.controller.MozMillController" title="en/Mozmill/Mozmill Base Object
            Interfaces#mozmill.controller.MozMillController">MozMillController</a></code></td> <td>Mozmill controller of the browser window.</td> </tr> <tr> <td><code>engines</code></td> <td><code>array of object</code></td> <td>Properties of each engine (<code>engine.name</code>, <code>engine.selected</code>, <code>engine.tooltipText</code>).</td> </tr> <tr> <td><code>enginesDropDownOpen</code></td> <td><code>boolean</code></td> <td>Open state of the search engine drop down popup.</td> </tr> <tr> <td><code>installableEngines</code></td> <td><code>array of object</code></td> <td>Properties of each installable engine (<code>engine.name</code>, <code>engine.selected</code>, <code>engine.tooltipText</code>).</td> </tr> <tr> <td><code>selectedEngine</code></td> <td><code>string</code></td> <td>Name of the currently selected search engine.</td> </tr> <tr> <td><code>visibleEngines</code></td> <td><code>{{ interface("nsISearchEngine") }}</code></td> <td>Retrieves all visible search engines (do not use for functional tests because it calls an API method).</td> </tr> </tbody>
</table>
<h2 id="Methods">Methods</h2>
<h3 id="searchBar.28.29" name="searchBar.28.29">searchBar()</h3>
<p>Constructor of the <code>searchBar</code> class.</p>
<pre>searchBar(
  in <a title="en/Mozmill/Mozmill Base Object Interfaces#mozmill.controller.MozMillController">MozMillController</a> controller
);</pre>
<h6 id="Parameters">Parameters</h6>
<dl> <dt><code>controller</code></dt> <dd><code>MozMillController</code> of the browser window to operate on.</dd>
</dl>
<h3 id="checkSearchResultPage.28.29" name="checkSearchResultPage.28.29">checkSearchResultPage()</h3>
<p>Checks if the correct target URL has been opened for the search. An exception will be thrown if the search term cannot be found in the URL or if the current domain name in the location bar doesn't match the one from the search engine.</p>
<pre>checkSearchResultPage(
  in string searchTerm
);
</pre>
<h6 id="Parameters_2">Parameters</h6>
<dl> <dt>searchTerm</dt> <dd>Text which should be checked for.</dd>
</dl>
<h3 id="clear.28.29" name="clear.28.29">clear()</h3>
<p>Clears the search field.</p>
<pre>clear();
</pre>
<h6 id="Parameters_3">Parameters</h6>
<p>None.</p>
<h3 id="focus.28.29" name="focus.28.29">focus()</h3>
<p>Focus the search bar text field by using the specified event.</p>
<pre>focus(
  in object event
);
</pre>
<h6 id="Parameters_4">Parameters</h6>
<dl> <dt><code>event</code></dt> <dd>Event which should be used to focus the location bar (click or keyboard shortcut). <table class="standard-table"> <thead> <tr> <th scope="col">event.type (<code>string</code>)</th> <th scope="col">Description</th> </tr> </thead> <tbody> <tr> <td>"click"</td> <td>Use a mouse click.</td> </tr> <tr> <td>"shortcut"</td> <td>Use the keyboard shortcut</td> </tr> </tbody> </table> </dd>
</dl>
<h3 id="getElement.28.29" name="getElement.28.29">getElement()</h3>
<p>Retrieves an UI element based on the given spec object.</p>
<pre><a title="en/Mozmill/Mozmill Elements Library Object#Elem Interface">ElemBase</a> getElement(
  in object spec
);</pre>
<h6 id="Parameters_5">Parameters</h6>
<dl> <dt><code>spec</code></dt> <dd>JSON object which specifies the element to retrieve. Use <code>its </code>attributes to specify the exact element. This <a href="/en/Mozmill_Tests/Shared_Modules/ToolbarAPI/autoCompleteResults#Examples" title="en/Mozmill Tests/Shared
    Modules/ToolbarAPI/autoCompleteResults#Examples">example</a> shows the correct usage. <table class="standard-table"> <thead> <tr> <th scope="col">spec.type  (<code>string</code>)<span id="1266966869729S" style="display: none;"><br> </span></th> <th scope="col">spec.subtype (<code>string</code>)</th> <th scope="col">spec.value (<code>mixed</code>)</th> <th scope="col">Description</th> </tr> </thead> <tbody> <tr> <td><code><span style="font-family: Verdana,Tahoma,sans-serif;">"engine</span>"</code></td> <td><code>nodeName<br> </code></td> <td><code>nodeValue<br> </code></td> <td>Get the search engine element from the engine drop down.</td> </tr> <tr> <td><code>"engine_manager"<br> </code></td> <td><code>-<br> </code></td> <td><code>-<br> </code></td> <td>Get the engine manager element from the engine drop down.</td> </tr> <tr> <td><code>"searchBar"<br> </code></td> <td><code>-<br> </code></td> <td><code>-<br> </code></td> <td>Get the search bar element.</td> </tr> <tr> <td><code>"searchBar_contextMenu"</code></td> <td><code> -<br> </code></td> <td><code>-<br> </code></td> <td>Get the context menu element for the search bar.</td> </tr> <tr> <td><code>"searchBar_dropDown"</code></td> <td><code>-<br> </code></td> <td><code>-<br> </code></td> <td>Get the engine drop down button element.</td> </tr> <tr> <td><code>"searchBar_goButton"<br> </code></td> <td><code>-<br> </code></td> <td><code>-<br> </code></td> <td>Get the go button element.</td> </tr> <tr> <td><code>"searchBar_input"<br> </code></td> <td><code>-<br> </code></td> <td><code>-<br> </code></td> <td>Get the input field element.</td> </tr> <tr> <td><code>"searchBar_popup"<br> </code></td> <td><code>-<br> </code></td> <td><code>-<br> </code></td> <td>Get the popup element of the engine drop down.</td> </tr> <tr> <td><code>"searchBar_textBox"<br> </code></td> <td><code>-<br> </code></td> <td><code>-<br> </code></td> <td>Get the whole text box element.</td> </tr> </tbody> </table> </dd>
</dl>
<h6 id="Return_value">Return value</h6>
<p><code><a href="/en/Mozmill_Tests/Shared_Modules/DownloadsAPI/downloadManager#getElement.28.29" rel="internal" title="en/Mozmill Tests/Shared
Modules/DownloadsAPI/downloadManager#getElement.28.29">ElemBase</a></code> instance of the requested element which matches the specifications.</p>
<h3 id="getSearchSuggestions.28.29" name="getSearchSuggestions.28.29">getSearchSuggestions()</h3>
<p>Returns the search suggestions for the search term.</p>
<pre>array of string getSearchSuggestions(
  in string searchTerm
);
</pre>
<h6 id="Parameters_6">Parameters</h6>
<dl> <dt>searchTerm</dt> <dd>Search term to enter into the search bar to get search suggestions for.</dd>
</dl>
<h6 id="Return_value_2">Return value</h6>
<p>Array of all the shown search suggestions.</p>
<h3 id="isEngineInstalled.28.29" name="isEngineInstalled.28.29">isEngineInstalled()</h3>
<p>Check if a search engine is installed (This function calls an API method).</p>
<pre>boolean isEngineInstalled(
  in string name
);
</pre>
<h6 id="Parameters_7">Parameters</h6>
<dl> <dt>name</dt> <dd>Name of the search engine to check.</dd>
</dl>
<h6 id="Return_value_3">Return value</h6>
<p>Returns <code>true</code> if the engine with the given name is installed.</p>
<h3 id="openEngineManager.28.29" name="openEngineManager.28.29">openEngineManager()</h3>
<p>Open the search engine manager.</p>
<pre>openEngineManager(
  in func_ptr handler
);
</pre>
<h6 id="Parameters_8">Parameters</h6>
<dl> <dt>handler</dt> <dd>Callback handler which will be called when the modal engine manager dialog has been opened.</dd>
</dl>
<h3 id="removeEngine" name="removeEngine">removeEngine()</h3>
<p>Remove the search engine with the given name (Ths function calls an API method).</p>
<pre>removeEngine(
  in string name
);
</pre>
<h6 id="Parameters_9">Parameters</h6>
<dl> <dt>name</dt> <dd>Name of the search engine to remove.</dd>
</dl>
<h3 id="restoreDefaultEngines.28.29" name="restoreDefaultEngines.28.29">restoreDefaultEngines()</h3>
<p>Restore the default set of search engines (This function calls an API method).</p>
<pre>restoreDefaultEngines();
</pre>
<h6 id="Parameters_10">Parameters</h6>
<p>None.</p>
<h3 id="search.28.29" name="search.28.29">search()</h3>
<p>Start a search with the given search term and check if the resulting URL contains the search term and the search engines domain name.</p>
<pre>search(
  in object data
);
</pre>
<h6 id="Parameters_11">Parameters</h6>
<dl> <dt><code>data<br> </code></dt> <dd>JSON object which specifies the search text and action to use to start the search. This <a href="/en/Mozmill_Tests/Shared_Modules/SearchAPI/searchBar#Examples" title="en/Mozmill Tests/Shared Modules/SearchAPI/searchBar#Examples">example</a> shows the correct usage. <table class="standard-table"> <thead> <tr> <th scope="col">data.text  (<code>string</code>)<span id="1266966869729S" style="display: none;"><br> </span></th> <th scope="col">data.action (<code>string</code>)</th> <th scope="col">Description</th> </tr> </thead> <tbody> <tr> <td><code>search term<br> </code></td> <td><code>returnKey<br> </code></td> <td>Starts the search for the search term by synthesizing a return keypress.</td> </tr> <tr> <td><code>search term<br> </code></td> <td><code>goButton<br> </code></td> <td>Starts the search for the search term by clicking the go button.</td> </tr> </tbody> </table> </dd>
</dl>
<h3 id="type.28.29" name="type.28.29">type()</h3>
<p>Enters a search term into the search bar.</p>
<pre>type(
  in string searchTerm
);
</pre>
<h6 id="Parameters_12">Parameters</h6>
<dl> <dt>searchTerm</dt> <dd>Search term to enter into the search bar.</dd>
</dl>
<h6 id="Return_value_4">Return value</h6>
<p>None.</p>
<h2 id="Examples">Examples</h2>
<pre class="brush: js">var RELATIVE_ROOT = '../../shared-modules';
var MODULE_REQUIRES = ['SearchAPI'];

var setupModule = function(module)
{
  controller = mozmill.getBrowserController();
  engine = new SearchAPI.searchBar(controller);
}

var testClickAndSearch = function()
{
  engine.focus({type: "click"});
  engine.search({text: "Firefox", action: "goButton"});
  engine.clear();
}
</pre>