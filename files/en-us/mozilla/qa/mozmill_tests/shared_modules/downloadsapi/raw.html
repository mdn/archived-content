
<p>If a test needs to interact with the Download Manager or simply has to handle a download of a given file, the DownloadsAPI can be used.</p>
<h2 id="Class_overview">Class overview</h2>
<table class="standard-table"> <thead> <tr> <th scope="col">Class</th> <th scope="col">Description</th> </tr> </thead> <tbody> <tr> <td><code><a href="/en/Mozmill_Tests/Shared_Modules/DownloadsAPI/downloadManager" title="en/Mozmill Tests/Shared Modules/DownloadsAPI/downloadManager">downloadManager</a></code></td> <td>This class supplies a full set of helper functions to provide access to any area of the download manager.</td> </tr> </tbody>
</table>
<h2 id="Method_overview">Method overview</h2>
<table class="standard-table"> <tbody> <tr> <td><code><a href="/en/Mozmill_Tests/Shared_Modules/DownloadsAPI#downloadFileOfUnknownType()" title="en/Mozmill Tests/Shared Modules/DownloadsAPI#downloadFileOfUnknownType()">downloadFileOfUnknownType</a>(in <a href="/en/Mozmill/Mozmill_Base_Object_Interfaces#mozmill.controller.MozMillController" title="en/Mozmill/Mozmill Base Object Interfaces#mozmill.controller.MozMillController">MozMillController</a> controller, in string url)</code></td> </tr> <tr> <td><code><a href="/en/XPCOM_Interface_Reference/nsILocalFile" title="en/XPCOM Interface Reference/nsILocalFile">nsILocalFile</a> <a href="/en/Mozmill_Tests/Shared_Modules/DownloadsAPI#getLocalFileFromNativePathOrUrl()" title="en/Mozmill Tests/Shared Modules/DownloadsAPI#getLocalFileFromNativePathOrUrl()">getLocalFileFromNativePathOrUrl</a>(in string aPathOrUrl)</code></td> </tr> </tbody>
</table>
<h2 id="Constants">Constants</h2>
<h3 id="downloadState_constants">downloadState constants</h3>
<table class="standard-table"> <thead> <tr> <th scope="col">Constant</th> <th scope="col">Value</th> <th scope="col">Description</th> </tr> </thead> <tbody> <tr> <td><code>notStarted</code></td> <td>-1</td> <td>Download state for uninitialized download object.</td> </tr> <tr> <td><code>downloading</code></td> <td>0</td> <td>Download is currently transferring data.</td> </tr> <tr> <td><code>finished</code></td> <td>1</td> <td>Download finished including any processing of the target file.</td> </tr> <tr> <td><code>failed</code></td> <td>2</td> <td>Transfer failed due to error. (completed)</td> </tr> <tr> <td><code>canceled</code></td> <td>3</td> <td>Download was canceled by the user. (completed)</td> </tr> <tr> <td><code>paused</code></td> <td>4</td> <td>Transfer was paused by the user.</td> </tr> <tr> <td><code>queued</code></td> <td>5</td> <td>Download is active but data has not yet been received.</td> </tr> <tr> <td><code>blockedParental</code></td> <td>6</td> <td>Transfer request was blocked by parental controls proxy. (completed)</td> </tr> <tr> <td><code>scanning</code></td> <td>7</td> <td>Transferred download is being scanned by virus scanners.</td> </tr> <tr> <td><code>dirty</code></td> <td>8</td> <td>A virus was detected in the download. The target will most likely no longer exist. (completed)</td> </tr> <tr> <td><code>blockedPolicy</code></td> <td>9</td> <td>Windows specific: Request was blocked by zone policy settings. (completed)</td> </tr> </tbody>
</table>
<h2 id="Methods">Methods</h2>
<h3 id="downloadFileOfUnknownType()">downloadFileOfUnknownType()</h3>
<p>Until we are able to interact with the system level File Save dialog we can only use the helper application dialog to download a file of an unknown content type. This function will automatically download the given file specified by the URL to the current download folder.</p>
<pre>downloadFileOfUnknownType(
  in <a title="en/Mozmill/Mozmill Base Object Interfaces#mozmill.controller.MozMillController">MozMillController</a> controller,
  in string url
);</pre>
<h6 id="Parameters">Parameters<a href="/en/Mozmill/Mozmill_Base_Object_Interfaces#mozmill.controller.MozMillController" title="en/Mozmill/Mozmill Base Object Interfaces#mozmill.controller.MozMillController"><code><br>
</code></a></h6>
<dl> <dt>controller</dt> <dd>MozMillController of the browser window to work on.</dd>
</dl>
<dl> <dl> <dt>url</dt> <dd>URL of the file which has to be downloaded.</dd> </dl> <h3 id="getLocalFileFromNativePathOrUrl()">getLocalFileFromNativePathOrUrl()</h3> <p>When a test needs access to the real file object this function will return the {{ interface("nsILocalFile") }} object from the given path or URL.</p> <pre><a title="en/XPCOM Interface Reference/nsILocalFile">nsILocalFile</a> getLocalFileFromNativePathOrUrl(
  in string aPathOrUrl
);</pre> <h6 id="Parameters_2">Parameters</h6>
<dl> <dt>aPathOrUrl</dt> <dd>Native path or URL of the file.</dd>
</dl><h6 id="Return_value">Return value</h6> <p>An {{ interface("nsILocalFile") }} instance specifying the file.<br>   </p>
</dl>
