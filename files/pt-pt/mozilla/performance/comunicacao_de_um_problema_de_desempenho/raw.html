<p>Este artigo irá guiá-lo na comunicação de um problema de desempenho utilizando a <a href="/pt-PT/docs/Mozilla/Performance/Perfilar_com_o_Profiler_integrado">extensão do Gecko Profiler</a>. Se preferir, também existe um<a href="https://www.youtube.com/watch?v=kGBs0BQsoQg"> tutorial em vídeo</a>, em vez da leitura.</p>

<h2 id="Configurar_a_extensão_Gecko_Profiler">Configurar a extensão Gecko Profiler</h2>

<ol>
 <li>Transferir e instalar a ú<a class="external" href="https://perf-html.io/" title="geckoprofiler.xpi">ltima versão da extensão Gecko Profiler</a></li>
 <li>A exntensção de perfilar irá aparecer no topo à direita da barra do URL como um ícone globo (se não, <a href="https://support.mozilla.org/pt-PT/kb/como-personalizar-barras-ferramentas#Como_é_que_personalizo_ou_reorganizo_os_itens_da_barra_de_ferramentas">arraste-a para lá da janela de Personalizar</a>).<br>
  <br>
  <img alt="The Gecko Profiler Add-on installed and visible within the Nightly toolbar." src="https://mdn.mozillademos.org/files/14859/Gecko%20Profiler%20Toolbar%20Button.PNG" style="height: 139px; width: 254px;"></li>
 <li><strong>Lembre-se de desativar ou desinstalar a extensão se a não estiver a utilizar.</strong></li>
</ol>

<p><em>Apenas macOS, </em>ou para verificar se um problema foi corrigido numa versão posterior do Firefox (as compilações do macOS atualmente irão produzir informação importante dos perfis em falta)<em>:</em></p>

<ol>
 <li>Transferir e instalar a <a class="external" href="http://nightly.mozilla.org/" title="http://nightly.mozilla.org/">compilação <em>nightly</em></a> para a sua platforma. Terá de fechar todas as instâncias do Firefox antes de executar <em>nightly</em>.</li>
 <li><em>Nightly</em> é uma versão de desenvolvimento, que pode conter erros, por isso, <a href="https://support.mozilla.org/en-US/kb/profile-manager-create-and-remove-firefox-profiles">teste com um novo perfil ou efetue uma cópia de segurança dos seus dados</a>.</li>
 <li>Verifique se está a funcionar corretamente, indo até 'Sobre Nightly' procurando por 'nightly' como o canal de atualização (3ª. linha). O ícone deverá ser um globo azul .</li>
</ol>

<h2 id="Using_the_Add-on">Using the Add-on</h2>

<p>Once installed, the profiler becomes active immediately (the icon being blue indicates it is active). The profiler uses a fixed size buffer to store sample data. When it runs out of space in its buffer, it discards old entries so you may want to increase the buffer size if you find you are unable to capture the profile quickly enough after you notice a performance problem. In the Settings part of the UI you can adjust the size of the buffer (presently defaults to 9 MB) and the time interval between data collection (presently defaults to 1 ms). Note that increasing the buffer size uses more memory and can make capturing a profile take longer.</p>

<p><img alt="Profiler UI" src="https://perf-html.io/e9a699daa7c33fcf80c361278055c65d.png" style="height: 376px; width: 546px;"></p>

<p>Using the keyboard shortcuts is often more convenient than using the mouse to interact with the UI:</p>

<ul>
 <li><code>Ctrl+Shift+1</code> - Start/Stop the profiler</li>
 <li><code>Ctrl+Shift+2</code> - Take a profile and launch Cleopatra to view it</li>
</ul>

<h2 id="Capturing_and_sharing_a_profile">Capturing and sharing a profile</h2>

<ol>
 <li>Reproduce the performance problem. If possible let the problem manifest itself for 5-10 seconds.</li>
 <li>Press <code>Ctrl+Shift+2</code> or click on the 'Globe' icon in the top right and select 'Capture Profile'. Try to do this within a few seconds from reproducing the performance problem as only the last few seconds are recorded. If the timeline has a large red block it's a good sign.<br>
  <img alt="Jank markers appearing in the Perf.html profile analysis tool." src="https://mdn.mozillademos.org/files/14861/Perf%20Dot%20HTML%20Red%20Lines.PNG" style="height: 238px; width: 558px;"></li>
 <li>The data will open in a new tab. Wait until the "Waiting for symbol tables for library libxul.pdb..." notification disappears before sharing the profile.</li>
 <li>There will be a button in the top right labeled 'Share' which will upload this profile and once completed will write out a link. Copy this URL to your clipboard by right clicking and add the profile URL to the bug for your performance problem and/or send it to the appropriate person. Try to give some context about what you were doing when the performance problem arose such as the URL you were viewing and what actions were you doing (ex. scrolling on gmail.com).<br>
  <img alt="The button for sharing a profile." src="https://mdn.mozillademos.org/files/14863/Share.PNG" style="height: 142px; width: 329px;"></li>
</ol>